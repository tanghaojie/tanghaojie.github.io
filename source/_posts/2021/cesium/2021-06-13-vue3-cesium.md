---
title: vue3+cesium+typescript踩坑之路
top: false
cover: false
toc: true
mathjax: false
comment: true
date: 2021-06-13 23:41:38
author:
keywords:
img:
coverImg:
password:
summary:
categories:
tags:
---

## cesium 对象挂载到全局 window

新建`global-cesium.d.ts`，文件，文件名随意（以`.d.ts`结尾就行），然后输入：

```typescript
/* eslint-disable */
declare namespace globalThis {
  import('cesium')
  import * as Cesium from 'cesium'

  interface Window {
    viewer: Cesium.Viewer
  }
}
```

即可在 window 上挂载 viewer 对象了，要挂载其他属性，请自行扩展。

## vue 全局挂载 cesium 对象

在`main.ts`文件中，新增代码：

```typescript
import * as Cesium from 'cesium'
declare module '@vue/runtime-core' {
  interface cesium {
    viewer: Cesium.Viewer
    viewerContainer?: HTMLElement
  }
  interface ComponentCustomProperties {
    $vcesium: cesium
  }
}
```

[官方讨论](https://github.com/vuejs/vue-next/pull/982)

`interface cesium{}`是我自己定义的数据类型，方便后续扩展更多的属性上去，然后就可以全局通过`this.$vcesium`进行访问了。比之前 vue2 的时候，挂载到根组件上的方式更灵活更好。

---

_版权声明：_
_除非注明，本博文章均为原创，转载请以链接形式标明本文地址。_

---
