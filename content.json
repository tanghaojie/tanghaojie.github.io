{"meta":{"title":"æ¡€å£«","subtitle":"ã€æ¡€å£«ã€","description":"æˆ‘ä»¬è¿½é€çš„ç»ä¸æ˜¯åˆ«äººçš„èµ·ç‚¹ï¼Œè€Œæ˜¯æ¯ä¸€ä¸ªæœªçŸ¥çš„æ˜å¤©ï¼","author":"Jackie Tang(å”æµ©æ¡€)","url":"https://tanghaojie.github.io","root":"/"},"pages":[{"title":"about","date":"2018-09-30T09:25:30.000Z","updated":"2019-10-11T07:00:53.111Z","comments":true,"path":"about/index.html","permalink":"https://tanghaojie.github.io/about/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-09-30T09:25:30.000Z","updated":"2019-10-11T06:59:13.783Z","comments":true,"path":"categories/index.html","permalink":"https://tanghaojie.github.io/categories/index.html","excerpt":"","text":""},{"title":"contact","date":"2018-09-30T09:25:30.000Z","updated":"2019-10-11T07:01:24.899Z","comments":true,"path":"contact/index.html","permalink":"https://tanghaojie.github.io/contact/index.html","excerpt":"","text":""},{"title":"friends","date":"2018-12-12T13:25:30.000Z","updated":"2019-10-11T07:01:39.596Z","comments":true,"path":"friends/index.html","permalink":"https://tanghaojie.github.io/friends/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-09-30T10:23:38.000Z","updated":"2019-10-11T07:00:25.097Z","comments":true,"path":"tags/index.html","permalink":"https://tanghaojie.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"3D Tilesæ ·å¼æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"3d-tiles-styling-specification","date":"2021-04-23T14:10:34.000Z","updated":"2021-05-06T07:12:15.742Z","comments":true,"path":"2021/04/23/3d-tiles-styling-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/3d-tiles-styling-specification/","excerpt":"","text":"å¼•å®˜ç½‘æ–‡æ¡£ To do ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"3D Tilesæ‰¹å¤„ç†è¡¨(Batch Table)æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"3d-tiles-batch-table-specification","date":"2021-04-23T13:45:35.000Z","updated":"2021-05-06T07:11:35.702Z","comments":true,"path":"2021/04/23/3d-tiles-batch-table-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/3d-tiles-batch-table-specification/","excerpt":"","text":"å¯¼èˆª å¼• æ¦‚è¿° æ–‡ä»¶ç»“æ„ ç»“æ„å¡«å…… JSON å¤´ äºŒè¿›åˆ¶ä½“ å®ä¾‹ å±æ€§å‚è€ƒ å¼•å®˜ç½‘æ–‡æ¡£ æ¦‚è¿°æ‰¹å¤„ç†è¡¨æ˜¯ç“¦ç‰‡äºŒè¿›åˆ¶ä½“çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼ŒåŒ…å«ç“¦ç‰‡ä¸­æ¯ä¸ªè¦ç´ çš„åº”ç”¨ç¨‹åºç‰¹å®šå±æ€§ã€‚åœ¨è¿è¡Œæ—¶æŸ¥è¯¢è¿™äº›å±æ€§ä»¥å£°æ˜æ ·å¼å’Œä»»ä½•åº”ç”¨ç¨‹åºç‰¹å®šçš„ç”¨æ³•ï¼Œä¾‹å¦‚å¡«å…… UI æˆ–å‘å‡º REST API è¯·æ±‚ã€‚ä¸€äº›ç¤ºä¾‹æ‰¹å¤„ç†è¡¨å±æ€§æ˜¯å»ºç­‘ç‰©é«˜åº¦ï¼Œåœ°ç†åæ ‡å’Œæ•°æ®åº“ä¸»é”®ã€‚ æ‰¹å¤„ç†è¡¨ç”¨äºä»¥ä¸‹æ•°æ®æ ¼å¼ï¼š æ‰¹å¤„ç† 3D æ¨¡å‹ (Batched 3D Model (b3dm)) å®ä¾‹ 3D æ¨¡å‹ (Instanced 3D Model (i3dm)) ç‚¹äº‘ (Point Cloud (pnts)) æ–‡ä»¶ç»“æ„æ‰¹å¤„ç†è¡¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šJSON å¤´å’Œå¯é€‰çš„å°ç«¯å­—èŠ‚åºäºŒè¿›åˆ¶ä¸»ä½“ã€‚JSON æè¿°äº†å±æ€§ï¼Œè¿™äº›å±æ€§çš„å€¼å¯ä»¥ç›´æ¥åœ¨ JSON ä¸­å®šä¹‰ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨äºŒè¿›åˆ¶ä¸»ä½“ä¸­çš„éƒ¨åˆ†ã€‚å°†é•¿æ•°å­—æ•°ç»„å­˜å‚¨åœ¨äºŒè¿›åˆ¶ä½“ä¸­çš„æ•ˆç‡æ›´é«˜ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†æ‰¹å¤„ç†è¡¨å¸ƒå±€ï¼š å½“ç“¦ç‰‡æ•°æ®åŒ…å«æ‰¹å¤„ç†è¡¨æ—¶ï¼Œæ‰¹å¤„ç†è¡¨å°†ç´§éšç“¦ç‰‡çš„è¦ç´ è¡¨ä¹‹åã€‚æ–‡ä»¶å¤´è¿˜å°†åŒ…å« batchTableJSONByteLength å’Œ batchTableBinaryByteLength çš„ uint32 å­—æ®µï¼Œå¯ç”¨äºæå–æ‰¹å¤„ç†è¡¨çš„å„ä¸ªéƒ¨åˆ†ã€‚ ç»“æ„å¡«å……JSON å¤´å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚ä¸ºç•Œç»“æŸï¼Œå¦åˆ™ï¼Œåœ¨ JSON å¤´å°¾éƒ¨å¡«å……ç©ºæ ¼ï¼ˆ0x20ï¼‰ä»¥æ»¡è¶³æ­¤è¦æ±‚ã€‚ äºŒè¿›åˆ¶ä½“å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚ä¸ºç•Œå¼€å§‹å’Œç»“æŸã€‚ä¸ºäº†æ»¡è¶³æ­¤è¦æ±‚ï¼Œå¯ä»¥ç”¨ä»»æ„å€¼å¡«å……ç©ºç™½éƒ¨åˆ†ã€‚ äºŒè¿›åˆ¶å±æ€§å¿…é¡»ä»¥ä¸€ä¸ªå­—èŠ‚åç§»é‡å¼€å§‹ï¼Œè¯¥å­—èŠ‚åç§»é‡æ˜¯å¿…é¡»æ˜¯å±æ€§éšå«ç±»å‹å¤§å°çš„å€æ•°ã€‚ä¾‹å¦‚ï¼Œç»„ä»¶çš„æŸä¸ªå…ƒç´ æœ‰ 4 ä¸ªå­—èŠ‚é•¿åº¦çš„å±æ€§ FLOAT ï¼Œå› æ­¤å¿…é¡»ä»¥ 4 çš„å€æ•°è®¡ç®—åç§»é‡ã€‚ä¸ºäº†æ»¡è¶³æ­¤è¦æ±‚ï¼Œå¯ä»¥ç”¨ä»»æ„å€¼å¡«å……ç©ºç™½éƒ¨åˆ†ã€‚ JSON å¤´æ‰¹å¤„ç†è¡¨å€¼å¯ä»¥ä¸¤ç§ä¸åŒçš„æ–¹å¼åœ¨ JSON æ ‡å¤´ä¸­è¡¨ç¤ºï¼š å€¼çš„æ•°ç»„ï¼Œä¾‹å¦‚ï¼Œ\"name\" : ['name1', 'name2', 'name3']æˆ–\"height\" : [10.0, 20.0, 15.0]ã€‚ æ•°ç»„å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ JSON æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬å¯¹è±¡å’Œæ•°ç»„ã€‚å…ƒç´ å¯èƒ½æ˜¯nullã€‚ æ¯ä¸ªæ•°ç»„çš„é•¿åº¦ç­‰äº batchLengthï¼Œä»¥æ¯ç§æ•°æ®æ ¼å¼æŒ‡å®šã€‚è¿™æ˜¯æ•°æ®ä¸­è¦ç´ çš„æ•°é‡ã€‚ä¾‹å¦‚ï¼ŒbatchLength å¯ä»¥æ˜¯ b3dm æ•°æ®ä¸­çš„æ¨¡å‹æ•°ï¼Œi3dm æ•°æ®ä¸­çš„å®ä¾‹æ•°ï¼Œæˆ– pnts æ•°æ®ä¸­çš„ç‚¹æ•°ï¼ˆæˆ–å¯¹è±¡æ•°ï¼‰ã€‚ å¼•ç”¨æ•°æ®çš„äºŒè¿›åˆ¶ä½“ï¼Œé€šè¿‡byteOffsetè¡¨ç¤ºå¯¹è±¡ï¼ŒcomponentType å’Œ type å±æ€§ï¼Œä¾‹å¦‚ï¼Œ\"height\" : { \"byteOffset\" : 24, \"componentType\" : \"FLOAT\", \"type\" : \"SCALAR\"}ã€‚ byteOffset æŒ‡å®šç›¸å¯¹äºäºŒè¿›åˆ¶ä¸»ä½“ä»é›¶å¼€å§‹çš„åç§»é‡ã€‚ byteOffset çš„å€¼å¿…é¡»æ˜¯è¯¥å±æ€§componentTypeå­—èŠ‚å¤§å°çš„å€æ•° ï¼Œä¾‹å¦‚ï¼Œå±æ€§å…·æœ‰ç»„ä»¶ç±»å‹ FLOAT çš„ byteOffset çš„å€¼å¿…é¡»æ˜¯4çš„å€æ•°ã€‚ componentType æ˜¯ç»„ä»¶ç‰¹å®šçš„æ•°æ®ç±»å‹ã€‚å…è®¸çš„å€¼æ˜¯\"BYTE\"ï¼Œ\"UNSIGNED_BYTE\"ï¼Œ\"SHORT\"ï¼Œ\"UNSIGNED_SHORT\"ï¼Œ\"INT\"ï¼Œ\"UNSIGNED_INT\"ï¼Œ\"FLOAT\"ï¼Œå’Œ\"DOUBLE\"ã€‚ type æŒ‡å®šå±æ€§æ˜¯æ ‡é‡è¿˜æ˜¯å‘é‡ã€‚å…è®¸çš„å€¼æ˜¯\"SCALAR\"ï¼Œ\"VEC2\"ï¼Œ\"VEC3\"ï¼Œå’Œ\"VEC4\"ã€‚ æ‰¹å¤„ç†è¡¨ JSON æ˜¯ UTF-8 çš„ JSON å­—ç¬¦ä¸²ã€‚ æ³¨æ„ï¼šåœ¨ JavaScript ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ArrayBufferçš„TextDecoderJavaScript API æ¥æå– Batch Table JSONï¼Œå¹¶ä½¿ç”¨JSON.parseè½¬æ¢ä¸º JavaScript å¯¹è±¡ã€‚ batchIdç”¨äºè®¿é—®æ¯ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ å¹¶æå–ç›¸åº”çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ‰¹å¤„ç†è¡¨æœ‰ä¸¤ä¸ªè¦ç´ çš„ä¸€æ‰¹å±æ€§ï¼š { \"id\": [\"unique id\", \"another unique id\"], \"displayName\": [\"Building name\", \"Another building name\"], \"yearBuilt\": [1999, 2015], \"address\": [ { \"street\": \"Main Street\", \"houseNumber\": \"1\" }, { \"street\": \"Main Street\", \"houseNumber\": \"2\" } ] } è¦ç´ batchId = 0çš„å±æ€§æ˜¯ï¼š id[0] = 'unique id' displayName[0] = 'Building name' yearBuilt[0] = 1999 address[0] = { street: 'Main Street', houseNumber: '1' } è¦ç´ batchId = 1çš„å±æ€§æ˜¯ï¼š id[1] = 'another unique id' displayName[1] = 'Another building name' yearBuilt[1] = 2015 address[1] = { street: 'Main Street', houseNumber: '2' } å®Œæ•´çš„ JSON å¤´å®šä¹‰ï¼Œè¯¦è§å±æ€§å‚è€ƒã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ JSON æ ¼å¼ã€‚ JSON: { \"$schema\": \"http://json-schema.org/draft-04/schema\", \"id\": \"batchTable.schema.json\", \"title\": \"Batch Table\", \"type\": \"object\", \"description\": \"A set of properties defining application-specific metadata for features in a tile.\", \"properties\": { \"extensions\": { \"$ref\": \"extension.schema.json\" }, \"extras\": { \"$ref\": \"extras.schema.json\" } }, \"additionalProperties\": { \"$ref\": \"#/definitions/property\" }, \"definitions\": { \"binaryBodyReference\": { \"title\": \"BinaryBodyReference\", \"type\": \"object\", \"description\": \"An object defining the reference to a section of the binary body of the batch table where the property values are stored if not defined directly in the JSON.\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 }, \"componentType\": { \"type\": \"string\", \"description\": \"The datatype of components in the property.\", \"enum\": [ \"BYTE\", \"UNSIGNED_BYTE\", \"SHORT\", \"UNSIGNED_SHORT\", \"INT\", \"UNSIGNED_INT\", \"FLOAT\", \"DOUBLE\" ] }, \"type\": { \"type\": \"string\", \"description\": \"Specifies if the property is a scalar or vector.\", \"enum\": [\"SCALAR\", \"VEC2\", \"VEC3\", \"VEC4\"] } }, \"required\": [\"byteOffset\", \"componentType\", \"type\"] }, \"property\": { \"title\": \"Property\", \"description\": \"A user-defined property which specifies per-feature application-specific metadata in a tile. Values either can be defined directly in the JSON as an array, or can refer to sections in the binary body with a `BinaryBodyReference` object.\", \"oneOf\": [ { \"$ref\": \"#/definitions/binaryBodyReference\" }, { \"type\": \"array\" } ] } } } äºŒè¿›åˆ¶ä½“å½“ JSON å¤´åŒ…å«å¯¹äºŒè¿›åˆ¶éƒ¨åˆ†çš„å¼•ç”¨æ—¶ï¼Œæ‰€æä¾›çš„ byteOffset ç”¨äºç´¢å¼•æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥ä½¿ç”¨è¦ç´ é•¿åº¦æ¥æ•°æ®å€¼batchLengthï¼›æ‰€éœ€çš„æ‰¹é‡è¡¨ IDbatchId; componentType å’Œ type å®šä¹‰åœ¨ JSON å¤´ä¸­ã€‚ ä¸‹è¡¨å¯ç”¨äºè®¡ç®—å±æ€§çš„å­—èŠ‚å¤§å°ã€‚ componentType å­—èŠ‚å¤§å° \"BYTE\" 1 \"UNSIGNED_BYTE\" 1 \"SHORT\" 2 \"UNSIGNED_SHORT\" 2 \"INT\" 4 \"UNSIGNED_INT\" 4 \"FLOAT\" 4 \"DOUBLE\" 8 type éƒ¨ä»¶æ•° \"SCALAR\" 1 \"VEC2\" 2 \"VEC3\" 3 \"VEC4\" 4 æ‰©å±•ä»¥ä¸‹æ‰©å±•å¯ä»¥åº”ç”¨äºæ‰¹å¤„ç†è¡¨ã€‚ 3DTILES_batch_table_hierarchy å®ä¾‹æœ¬èŠ‚æ˜¯éè§„èŒƒæ€§çš„ ä»¥ä¸‹ç¤ºä¾‹è®¿é—®æ‰¹å¤„ç†è¡¨ JSON çš„\"height\"å’Œ\"geographic\"çš„å€¼batchLengthçš„é•¿åº¦æ˜¯ 10ï¼š { \"height\": { \"byteOffset\": 0, \"componentType\": \"FLOAT\", \"type\": \"SCALAR\" }, \"geographic\": { \"byteOffset\": 40, \"componentType\": \"DOUBLE\", \"type\": \"VEC3\" } } è·å¾—\"height\"çš„å€¼ï¼š var height = batchTableJSON.height var byteOffset = height.byteOffset var componentType = height.componentType var type = height.type var heightArrayByteLength = batchLength * sizeInBytes(componentType) * numberOfComponents(type) // 10 * 4 * 1 var heightArray = new Float32Array( batchTableBinary.buffer, byteOffset, heightArrayByteLength ) var heightOfFeature = heightArray[batchId] è·å¾—\"geographic\"çš„å€¼ï¼š var geographic = batchTableJSON.geographic var byteOffset = geographic.byteOffset var componentType = geographic.componentType var type = geographic.type var componentSizeInBytes = sizeInBytes(componentType) var numberOfComponents = numberOfComponents(type) var geographicArrayByteLength = batchLength * componentSizeInBytes * numberOfComponents // 10 * 8 * 3 var geographicArray = new Float64Array( batchTableBinary.buffer, byteOffset, geographicArrayByteLength ) var geographicOfFeature = positionArray.subarray( batchId * numberOfComponents, batchId * numberOfComponents + numberOfComponents ) // Using subarray creates a view into the array, and not a new array. CesiumJS çš„ 3D Tiles å®ç°äº†è¯»å–æ‰¹é‡è¡¨çš„åŠŸèƒ½ï¼ŒCesium3DTileBatchTable.jsã€‚ å±æ€§å‚è€ƒæ‰¹å¤„ç†è¡¨äºŒè¿›åˆ¶ä½“å¼•ç”¨å±æ€§ æ‰¹å¤„ç†è¡¨ä¸€ç»„å±æ€§ï¼Œç”¨äºå®šä¹‰æ•°æ®ä¸­è¦ç´ çš„åº”ç”¨ç¨‹åºç‰¹å®šå…ƒæ•°æ®ã€‚ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» extensions object ç‰¹å®šæ‰©å±•å¯¹è±¡çš„å­—å…¸å¯¹è±¡ No extras any åº”ç”¨ç¨‹åºçš„ç‰¹å®šæ•°æ® No å…è®¸å…¶ä»–å±æ€§ã€‚ äºŒè¿›åˆ¶ä½“å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå®šä¹‰å¯¹è¦ç´ è¡¨çš„äºŒè¿›åˆ¶ä¸»ä½“éƒ¨åˆ†çš„å¼•ç”¨ï¼Œå¦‚æœæœªåœ¨ JSON å¤´ä¸­ç›´æ¥å®šä¹‰å±æ€§å€¼ï¼Œåˆ™åœ¨è¯¥éƒ¨åˆ†å­˜å‚¨ã€‚ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» byteOffset number ç¼“å†²åŒºçš„åç§»é‡ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ âœ… Yes componentType string å±æ€§æ‰€å±éƒ¨åˆ†çš„æ•°æ®ç±»å‹ âœ… Yes type string æŒ‡å®šå±æ€§æ˜¯æ ‡é‡è¿˜æ˜¯å‘é‡ âœ… Yes å…è®¸å…¶ä»–å±æ€§ã€‚ å±æ€§ç”¨æˆ·å®šä¹‰çš„å±æ€§ï¼Œç”¨äºåœ¨æ•°æ®ä¸­æŒ‡å®šæ¯ä¸ªåŠŸèƒ½çš„ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„å…ƒæ•°æ®ã€‚å€¼å¯ä»¥ç›´æ¥åœ¨ JSON ä¸­å®šä¹‰ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡å¼•ç”¨äºŒè¿›åˆ¶ä¸»ä½“ä¸­çš„éƒ¨åˆ†ã€‚ JSON å‚è€ƒï¼Œè§ä¸Šé¢ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"3D Tilesè¦ç´ è¡¨(Feature Table)æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"3d-tiles-feature-table-specification","date":"2021-04-23T13:45:23.000Z","updated":"2021-05-06T07:11:54.958Z","comments":true,"path":"2021/04/23/3d-tiles-feature-table-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/3d-tiles-feature-table-specification/","excerpt":"","text":"å¯¼èˆª å¼• æ¦‚è¿° æ–‡ä»¶ç»“æ„ ç»“æ„å¡«å…… JSON å¤´ äºŒè¿›åˆ¶ä½“ å®ä¾‹ å±æ€§å‚è€ƒ å¼•å®˜ç½‘æ–‡æ¡£ æ¦‚è¿°è¦ç´ è¡¨(Feature Table)æ˜¯ç“¦ç‰‡çš„å®ä¾‹äºŒè¿›åˆ¶ç»„ä»¶ï¼Œç”¨æˆ·æè¿°æ¯ä¸€ä¸ªç“¦ç‰‡åœ¨ æ¸²æŸ“ æ—¶çš„ä½ç½®å’Œå¤–è§‚å±æ€§ã€‚è€Œæ‰¹å¤„ç†è¡¨(Batch Table)ï¼Œåªç”¨äºåŒ…å«åº”ç”¨ç¨‹åºç‰¹å®šçš„ å±æ€§ï¼Œåœ¨æ¸²æŸ“æ—¶ä¸æ˜¯å¿…é¡»çš„ã€‚ è¦ç´ è¡¨å¯ä»¥è¢«æ‰€æœ‰ç“¦ç‰‡æ ¼å¼ä½¿ç”¨ï¼Œä¾‹å¦‚æ‰¹å¤„ç† 3D æ¨¡å‹ (Batched 3D Model (b3dm))ï¼Œæ¯ä¸€ä¸ªæ¨¡å‹æ˜¯ä¸€ä¸ªè¦ç´ ï¼›ç‚¹äº‘ (Point Cloud (pnts))ï¼Œæ¯ä¸€ä¸ªç‚¹æ˜¯ä¸€ä¸ªè¦ç´ ã€‚ æ¯ä¸ªè¦ç´ çš„å±æ€§æ˜¯ç”±æ¯ç§æ•°æ®æ ¼å¼è§„èŒƒæ‰€å®šä¹‰çš„ç‰¹å®šè¯­æ³•ã€‚ä¾‹å¦‚ï¼Œå®ä¾‹ 3D æ¨¡å‹ï¼ŒSCALE_NON_UNIFORM å®šä¹‰æ¯ä¸ª 3D æ¨¡å‹å®ä¾‹çš„éå‡åŒ€æ¯”ä¾‹ã€‚ æ–‡ä»¶ç»“æ„è¦ç´ è¡¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šJSON å¤´å’Œå¯é€‰çš„å°ç«¯å­—èŠ‚åºäºŒè¿›åˆ¶ä¸»ä½“ã€‚JSON å±æ€§åç§°æ˜¯æ•°æ®æ ¼å¼ç‰¹å®šçš„è¯­æ³•ï¼Œå¹¶ä¸”å®ƒä»¬çš„å€¼å¯ä»¥ç›´æ¥åœ¨ JSON ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨äºŒè¿›åˆ¶ä¸»ä½“éƒ¨åˆ†ã€‚å°†é•¿æ•°å­—æ•°ç»„å­˜å‚¨åœ¨äºŒè¿›åˆ¶ä½“ä¸­çš„æ•ˆç‡æ›´é«˜ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†è¦ç´ è¡¨å¸ƒå±€ï¼š å½“ä¸€ç§æ•°æ®åŒ…æ‹¬è¦ç´ è¡¨æ—¶ï¼Œè¦ç´ è¡¨ç´§éšåœ¨è‹¥å¹²ä¸ªå­—èŠ‚çš„æ–‡ä»¶å¤´åã€‚æ–‡ä»¶å¤´è¿˜è¦åŒ…å« featureTableJSONByteLength å’Œ featureTableBinaryByteLength çš„ uint32 å­—æ®µï¼Œå¯ç”¨äºè¡¨ç¤ºè¦ç´ è¡¨çš„å„ä¸ªéƒ¨åˆ†ã€‚ ç»“æ„å¡«å……JSON å¤´å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚ä¸ºç•Œç»“æŸï¼Œå¦åˆ™ï¼Œåœ¨ JSON å¤´å°¾éƒ¨å¡«å……ç©ºæ ¼ï¼ˆ0x20ï¼‰ä»¥æ»¡è¶³æ­¤è¦æ±‚ã€‚ äºŒè¿›åˆ¶ä½“å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚ä¸ºç•Œå¼€å§‹å’Œç»“æŸã€‚ä¸ºäº†æ»¡è¶³æ­¤è¦æ±‚ï¼Œå¯ä»¥ç”¨ä»»æ„å€¼å¡«å……ç©ºç™½éƒ¨åˆ†ã€‚ äºŒè¿›åˆ¶å±æ€§å¿…é¡»ä»¥ä¸€ä¸ªå­—èŠ‚åç§»é‡å¼€å§‹ï¼Œè¯¥å­—èŠ‚åç§»é‡æ˜¯å¿…é¡»æ˜¯å±æ€§éšå«ç±»å‹å¤§å°çš„å€æ•°ã€‚ä¾‹å¦‚ï¼Œç»„ä»¶çš„æŸä¸ªå…ƒç´ æœ‰ 4 ä¸ªå­—èŠ‚é•¿åº¦çš„å±æ€§ FLOAT ï¼Œå› æ­¤å¿…é¡»ä»¥ 4 çš„å€æ•°è®¡ç®—åç§»é‡ã€‚ä¸ºäº†æ»¡è¶³æ­¤è¦æ±‚ï¼Œå¯ä»¥ç”¨ä»»æ„å€¼å¡«å……ç©ºç™½éƒ¨åˆ†ã€‚ è¿™é‡Œå¦‚æœçœ‹ä¸æ‡‚ï¼Œå…ˆæŠŠåé¢çœ‹å®Œå†å›å¤´æ¥çœ‹ï¼Œåº”è¯¥å°±æ‡‚äº†ã€‚ JSON å¤´å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼åœ¨ JSON æ ‡ä¸­è¡¨ç¤ºè¦ç´ è¡¨çš„å€¼ï¼š å•ä¸ªå€¼æˆ–å¯¹è±¡ï¼Œå¦‚ï¼Œ\"INSTANCES_LENGTH\": 4ã€‚ è¿™ç”¨äºå…¨å±€å®šä¹‰ï¼Œå¦‚ï¼Œ\"INSTANCES_LENGTH\"ï¼Œå®ƒå®šä¹‰äº†å®ä¾‹åŒ– 3D æ¨¡å‹æ•°æ®ä¸­çš„æ¨¡å‹å®ä¾‹æ•°ã€‚ æ•°ç»„ï¼Œå¦‚ï¼Œ\"POSITION\" : [1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]ã€‚ è¿™ç”¨äºæŒ‰è¦ç´ å®šä¹‰ï¼Œå¦‚ï¼Œå®ä¾‹ 3D æ¨¡å‹ä¸­çš„\"POSITION\"ã€‚å¦‚ä¸Šé¢çš„æ•°ç»„ï¼Œæ¯ä¸ªéƒ½ POSITION å¯¹åº” float32[3] æ•°æ®ç±»å‹ï¼Œå› æ­¤æœ‰ä¸‰ä¸ªè¦ç´ ï¼šè¦ç´  0's position= (1.0, 0.0, 0.0)ï¼Œè¦ç´  1's position= (0.0, 1.0, 0.0)ï¼Œè¦ç´  2's position= (0.0, 0.0, 1.0)ã€‚ ä¸€ä¸ªæŒ‡å‘äºŒè¿›åˆ¶ä½“ä¸­æ•°æ®çš„å¼•ç”¨ï¼Œç”±å…·æœ‰ byteOffset å±æ€§çš„å¯¹è±¡è¡¨ç¤ºï¼Œä¾‹å¦‚\"SCALE\" : { \"byteOffset\" : 24}ã€‚ byteOffset æŒ‡å®šç›¸å¯¹äºäºŒè¿›åˆ¶ä½“ä»é›¶å¼€å§‹çš„åç§»é‡ã€‚byteOffset çš„å€¼å¿…é¡»æ˜¯å±æ€§éšå«ç±»å‹å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰çš„å€æ•°ï¼Œä¾‹å¦‚ï¼Œ\"POSITION\"å±æ€§çš„æ•°æ®ç±»å‹æ˜¯ FLOATï¼ˆ4 ä¸ªå­—èŠ‚ï¼‰ï¼Œå› æ­¤ byteOffsetçš„å€¼å¿…é¡»æ˜¯ 4 çš„å€æ•° ã€‚ è¯­æ³•å®šä¹‰äº†å…è®¸çš„æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå®ä¾‹ 3D æ¨¡å‹çš„\"POSITION\"å±æ€§ä»äºŒè¿›åˆ¶ä½“ä¸­å¼•ç”¨æ—¶ï¼Œå±æ€§ç±»å‹ä¸ºFLOATï¼Œå±æ€§é•¿åº¦ä¸º3ã€‚ æœ‰äº›è¯­æ³•å…è®¸è¦†ç›–ï¼ˆoverrideï¼‰å±æ€§éšå«çš„ç±»å‹ã€‚è¿™äº›æƒ…å†µä»¥æ¯ç§å›¾å—æ ¼å¼æŒ‡å®šï¼Œå¦‚ï¼Œ\"BATCH_ID\" : { \"byteOffset\" : 24, \"componentType\" : \"UNSIGNED_BYTE\"}ã€‚JSON å¤´ä¸­æœ‰æ•ˆçš„å±æ€§æ˜¯å„ä¸ªæ•°æ®æ ¼å¼é¢„å®šä¹‰çš„ï¼Œä»¥åŠå¯é€‰çš„ extras å’Œ extensions å±æ€§ã€‚åº”ç”¨ç¨‹åºç‰¹å®šçš„æ•°æ®åº”å­˜å‚¨åœ¨æ‰¹å¤„ç†è¡¨(Batch Table)ä¸­ã€‚ å®Œæ•´çš„ JSON å¤´å®šä¹‰ï¼Œè¯¦è§å±æ€§å‚è€ƒã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ JSON æ ¼å¼ã€‚ JSON: { \"$schema\": \"http://json-schema.org/draft-04/schema\", \"id\": \"featureTable.schema.json\", \"title\": \"Feature Table\", \"type\": \"object\", \"description\": \"A set of semantics containing per-tile and per-feature values defining the position and appearance properties for features in a tile.\", \"definitions\": { \"binaryBodyReference\": { \"title\": \"BinaryBodyReference\", \"type\": \"object\", \"description\": \"An object defining the reference to a section of the binary body of the features table where the property values are stored if not defined directly in the JSON.\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 }, \"componentType\": { \"type\": \"number\", \"description\": \"The datatype of components in the property. This is defined only if the semantic allows for overriding the implicit component type. These cases are specified in each tile format.\", \"enum\": [ \"BYTE\", \"UNSIGNED_BYTE\", \"SHORT\", \"UNSIGNED_SHORT\", \"INT\", \"UNSIGNED_INT\", \"FLOAT\", \"DOUBLE\" ] } }, \"required\": [\"byteOffset\"] }, \"numericArray\": { \"type\": \"array\", \"items\": { \"type\": \"number\" } }, \"property\": { \"title\": \"Property\", \"description\": \"A user-defined property which specifies per-feature application-specific metadata in a tile. Values either can be defined directly in the JSON as an array, or can refer to sections in the binary body with a `BinaryBodyReference` object.\", \"oneOf\": [ { \"$ref\": \"#/definitions/binaryBodyReference\" }, { \"type\": \"array\", \"items\": { \"type\": \"number\" } }, { \"type\": \"number\" } ] }, \"globalPropertyBoolean\": { \"title\": \"GlobalPropertyBoolean\", \"description\": \"An object defining a global boolean property value for all features.\", \"type\": \"boolean\" }, \"globalPropertyScalar\": { \"title\": \"GlobalPropertyScalar\", \"description\": \"An object defining a global numeric property value for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 1, \"maxItems\": 1 }, { \"type\": \"number\", \"minimum\": 0 } ] }, \"globalPropertyCartesian3\": { \"title\": \"GlobalPropertyCartesian3\", \"description\": \"An object defining a global 3-component numeric property values for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 3, \"maxItems\": 3 } ] }, \"globalPropertyCartesian4\": { \"title\": \"GlobalPropertyCartesian4\", \"description\": \"An object defining a global 4-component numeric property values for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 4, \"maxItems\": 4 } ] } }, \"properties\": { \"extensions\": { \"$ref\": \"extension.schema.json\" }, \"extras\": { \"$ref\": \"extras.schema.json\" } }, \"additionalProperties\": { \"$ref\": \"#/definitions/property\" } } äºŒè¿›åˆ¶ä½“å½“ JSON å¤´åŒ…å«å¯¹äºŒè¿›åˆ¶æ–‡ä»¶çš„å¼•ç”¨æ—¶ï¼Œæ‰€æä¾›çš„byteOffsetå†…å®¹å°†ç”¨äºç´¢å¼•æ•°æ®ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†å¦‚ä½•åœ¨è¦ç´ è¡¨äºŒè¿›åˆ¶ä½“ä¸­ç´¢å¼•æ•°æ®ï¼š ä½¿ç”¨è¦ç´ æ•°é‡æ¥æ£€ç´¢å€¼,featuresLengthï¼›è¦ç´  ID,featureIdï¼›ä»¥åŠè¦ç´ å®šä¹‰çš„å…¶ä»–æ•°æ®ç±»å‹ï¼ˆå±æ€§ç±»å‹å’Œé•¿åº¦ï¼‰ã€‚ å®ä¾‹æœ¬èŠ‚æ˜¯éè§„èŒƒæ€§çš„ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨POSITIONè®¿é—® position å±æ€§ï¼ŒPOSITIONæ˜¯float32[3]çš„ç±»å‹ï¼š var byteOffset = featureTableJSON.POSITION.byteOffset var positionArray = new Float32Array( featureTableBinary.buffer, byteOffset, featuresLength * 3 ) // There are three components for each POSITION feature. var position = positionArray.subarray(featureId * 3, featureId * 3 + 3) // Using subarray creates a view into the array, and not a new array. CesiumJS çš„ 3D Tiles å®ç°äº†è¯»å–è¦ç´ è¡¨çš„åŠŸèƒ½ï¼ŒCesium3DTileFeatureTable.jsã€‚ å±æ€§å‚è€ƒè¦ç´ è¡¨ äºŒè¿›åˆ¶ä½“å¼•ç”¨ å±æ€§ è¦ç´ è¡¨ä¸€ç»„è¯­æ³•å®šä¹‰ï¼Œç”¨äºä¸ºç“¦ç‰‡ä¸­çš„è¦ç´ æä¾›æ¯ä¸ªç“¦ç‰‡æ¯ä¸ªè¦ç´ çš„ä½ç½®å’Œå±æ€§çš„å®šä¹‰ã€‚ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» extensions object å…·æœ‰æ‰©å±•ç‰¹å®šå¯¹è±¡çš„å­—å…¸å¯¹è±¡ No extras any åº”ç”¨ç‰¹å®šæ•°æ® No å…è®¸å…¶ä»–å±æ€§ã€‚ äºŒè¿›åˆ¶ä½“å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå®šä¹‰å¯¹è¦ç´ è¡¨çš„äºŒè¿›åˆ¶ä¸»ä½“éƒ¨åˆ†çš„å¼•ç”¨ï¼Œå¦‚æœæœªåœ¨ JSON å¤´ä¸­ç›´æ¥å®šä¹‰å±æ€§å€¼ï¼Œåˆ™åœ¨è¯¥éƒ¨åˆ†å­˜å‚¨ã€‚ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» byteOffset number ç¼“å†²åŒºçš„åç§»é‡ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ âœ… Yes å…è®¸å…¶ä»–å±æ€§ã€‚ å±æ€§ç”¨æˆ·å®šä¹‰çš„å±æ€§ï¼Œç”¨äºåœ¨æ•°æ®ä¸­æŒ‡å®šæ¯ä¸ªåŠŸèƒ½çš„ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„å…ƒæ•°æ®ã€‚å€¼å¯ä»¥ç›´æ¥åœ¨ JSON ä¸­å®šä¹‰ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡å¼•ç”¨äºŒè¿›åˆ¶ä¸»ä½“ä¸­çš„éƒ¨åˆ†ã€‚ JSON å‚è€ƒï¼Œè§ä¸Šé¢ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"3D Tileså¤åˆå¯¹è±¡(Composite)æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"3d-tiles-composite-specification","date":"2021-04-23T13:44:17.000Z","updated":"2021-05-06T07:11:49.083Z","comments":true,"path":"2021/04/23/3d-tiles-composite-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/3d-tiles-composite-specification/","excerpt":"","text":"å¯¼èˆª å¼• æ¦‚è¿° æ–‡ä»¶ç»“æ„ ç»“æ„å¡«å…… æ–‡ä»¶å¤´ å†…éƒ¨ç“¦ç‰‡ æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹ å®ç°ç¤ºä¾‹ å¼•å®˜ç½‘æ–‡æ¡£ æ¦‚è¿°å¤åˆå¯¹è±¡æ ¼å¼å…è®¸æ‹¼æ¥çš„ä¸åŒæ ¼å¼çš„æ•°æ®å˜æˆä¸€ä¸ªåŒºå—ã€‚ 3D ç“¦ç‰‡å’Œå¤åˆå¯¹è±¡ç“¦ç‰‡ä¸ºæµå¼å¼‚æ„æ•°æ®é›†æä¾›äº†çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œå»ºç­‘ç‰©å’Œæ ‘æœ¨å¯ä»¥å­˜å‚¨åœ¨ä¸¤ä¸ªå•ç‹¬çš„â€œæ‰¹å¤„ç† 3D æ¨¡å‹â€å’Œâ€œå®ä¾‹åŒ– 3D æ¨¡å‹â€å›¾å—ä¸­ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨â€œå¤åˆâ€å›¾å—è¿›è¡Œç»„åˆã€‚ æ”¯æŒç“¦ç‰‡é—´ï¼ˆåŒä¸€æ•°æ®é›†ä¸­ä¸åŒæ ¼å¼çš„ä¸åŒç“¦ç‰‡ï¼‰å’Œç“¦ç‰‡å†…ï¼ˆåŒä¸€å¤åˆå›¾å—ä¸­ä¸åŒæ ¼å¼çš„ç“¦ç‰‡ï¼‰é€‰é¡¹çš„å¼‚æ„æ•°æ®é›†ï¼Œä½¿è½¬æ¢å·¥å…·å¯ä»¥åœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´è¿›è¡Œæƒè¡¡ï¼Œä¼˜åŒ–ç‰¹å®šç±»å‹çš„ç»†åˆ†æ–¹å¼ï¼Œä»¥åŠå¯è§/éšè—å±‚çš„æµå¼ä¼ è¾“æ–¹å¼ã€‚ å¤åˆæ•°æ®æ˜¯å°ç«¯å­—èŠ‚åºçš„äºŒè¿›åˆ¶ Blobã€‚ æ–‡ä»¶ç»“æ„å¤åˆæ•°æ®çš„æ–‡ä»¶ç»“æ„ï¼ˆç ´æŠ˜å·è¡¨ç¤ºå¯é€‰å­—æ®µï¼‰ï¼š ç»“æ„å¡«å……æ•°æ® byteLength å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚è¿›è¡Œè¾¹ç•Œå¯¹é½ã€‚åŒ…å«çš„æ‰€æœ‰æ•°æ®ä¹Ÿå¿…é¡»å¯¹é½ 8 ä¸ªå­—èŠ‚çš„è¾¹ç•Œã€‚ æ–‡ä»¶å¤´16 å­—èŠ‚çš„æ–‡ä»¶å¤´åŒ…å«ä»¥ä¸‹å­—æ®µï¼š å­—æ®µå ç±»å‹ æè¿° magic 4 å­—èŠ‚ ANSI å­—ç¬¦ä¸² \"cmpt\" version uint32 ç‰ˆæœ¬ã€‚ç°åœ¨æ˜¯1 byteLength uint32 æ•´ä¸ªå¤åˆæ•°æ®çš„é•¿åº¦ï¼ˆåŒ…æ‹¬æ ‡å¤´å’Œæ¯ä¸ªå†…éƒ¨æ•°æ®ï¼‰ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ tilesLength uint32 å¤åˆä¸­çš„å›¾å—æ•° å†…éƒ¨ç“¦ç‰‡å†…éƒ¨ç“¦ç‰‡å­—æ®µç´§è·Ÿåœ¨æ–‡ä»¶å¤´éƒ¨åˆ†ä¹‹åã€‚ä»¥ä¸‹ä¿¡æ¯æè¿°äº†å¤åˆå›¾å—è¯»å–å™¨å¯èƒ½åˆ©ç”¨å…¶æ¥æŸ¥æ‰¾å†…éƒ¨å›¾å—è¾¹ç•Œçš„æ‰€æœ‰å›¾å—æ ¼å¼çš„ä¸€èˆ¬ç‰¹å¾ï¼š æ¯ä¸ªå›¾å—å‡ä»¥ 4 å­—èŠ‚ ANSI å­—ç¬¦ä¸²å¼€å¤´ï¼Œè¯¥å­—ç¬¦ä¸² magic å¯ç”¨äºç¡®å®šå›¾å—æ ¼å¼ä»¥è¿›è¡Œè¿›ä¸€æ­¥è§£æã€‚æœ‰å…³å¯èƒ½æ ¼å¼çš„åˆ—è¡¨ï¼Œè¯·å‚è§ç“¦ç‰‡æ ¼å¼è§„èŒƒã€‚å¤åˆå›¾å—å¯ä»¥åŒ…å«å¤åˆå›¾å—ã€‚ æ¯ä¸ªå›¾å—çš„æ ‡å¤´åŒ…å«ä¸€ä¸ª uint32 byteLengthï¼Œç”¨äºå®šä¹‰å†…éƒ¨å›¾å—çš„é•¿åº¦ï¼ˆåŒ…æ‹¬å…¶æ ‡å¤´ï¼‰ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚è¿™å¯ç”¨äºéå†å†…éƒ¨ç“¦ç‰‡ã€‚ å¯¹äºä»»ä½•ç‰ˆæœ¬ä¸º 1 çš„å›¾å—æ ¼å¼ï¼Œæ‰€æœ‰å›¾å—çš„å‰ 12 ä¸ªå­—èŠ‚ä¸ºä»¥ä¸‹å­—æ®µï¼š å­—æ®µå ç±»å‹ æè¿° magic 4 å­—èŠ‚ ANSI å­—ç¬¦ä¸² è¡¨ç¤ºå›¾å—æ ¼å¼ version uint32 1 byteLength uint32 æ•´ä¸ªå›¾å—çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒæ¯ç§å›¾å—æ ¼å¼çš„è§„èŒƒã€‚ æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹å¤åˆå›¾å—ä½¿ç”¨.cmptæ‰©å±•åå’Œapplication/octet-streamMIME ç±»å‹ã€‚ æ˜¾å¼æ–‡ä»¶æ‰©å±•åæ˜¯å¯é€‰çš„ã€‚æœ‰æ•ˆçš„å®ç°å¯èƒ½ä¼šå¿½ç•¥å®ƒï¼Œå¹¶é€šè¿‡ magic å…¶æ ‡å¤´ä¸­çš„å­—æ®µæ ‡è¯†å†…å®¹çš„æ ¼å¼ã€‚ å®ç°ç¤ºä¾‹æœ¬èŠ‚æ˜¯éè§„èŒƒæ€§çš„ Python gltf2glb å·¥å…·é›†ä¸­çš„ packcmpt å·¥å…·åŒ…å«ç”¨äºå°†ä¸€ä¸ªæˆ–å¤šä¸ªâ€œæ‰¹å¤„ç† 3D æ¨¡å‹â€æˆ–â€œå®ä¾‹åŒ– 3D æ¨¡å‹â€å›¾å—ç»„åˆåˆ°å•ä¸ªâ€œå¤åˆâ€å›¾å—æ–‡ä»¶ä¸­çš„ä»£ç ã€‚ å¯ä»¥åœ¨ 3D Tiles çš„ CesiumJS å®ç° Composite3DTileContent.js ä¸­æ‰¾åˆ°ç”¨äºè¯»å–æ–‡ä»¶å¤´çš„ä»£ç  ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"3D Tilesç‚¹äº‘(Point Cloud)æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"3d-tiles-point-cloud-specification","date":"2021-04-23T13:44:04.000Z","updated":"2021-05-06T07:12:11.726Z","comments":true,"path":"2021/04/23/3d-tiles-point-cloud-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/3d-tiles-point-cloud-specification/","excerpt":"","text":"å¯¼èˆª å¼• æ¦‚è¿° æ–‡ä»¶ç»“æ„ ç»“æ„å¡«å…… æ–‡ä»¶å¤´ è¦ç´ è¡¨ è¯­æ³•å®šä¹‰ ç‚¹è¯­æ³• å…¨å±€è¯­æ³• ç‚¹ä½ç½® åæ ‡ç³» RTC_CENTER é‡åŒ–ä½ç½® ç‚¹é¢œè‰² ç‚¹æ³•çº¿ å…«è¿›åˆ¶ç¼–ç çš„æ³•å‘å‘é‡ æ‰¹å¤„ç†ç‚¹ ä¾‹å­ ä»…ä½ç½® ä½ç½®å’Œé¢œè‰² é‡åŒ–ä½ç½®å’Œå…«è¿›åˆ¶ç¼–ç æ³•çº¿ æ‰¹å¤„ç†ç‚¹ æ¯ä¸ªç‚¹çš„å±æ€§ æ‰¹é‡è¡¨ æ‰©å±• æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹ å®ç°ç¤ºä¾‹ å±æ€§å‚è€ƒ å¼•å®˜ç½‘æ–‡æ¡£ æ¦‚è¿° æ–‡ä»¶ç»“æ„ ç»“æ„å¡«å…… æ–‡ä»¶å¤´ è¦ç´ è¡¨ è¯­æ³•å®šä¹‰ ç‚¹è¯­æ³• å…¨å±€è¯­æ³• ç‚¹ä½ç½® åæ ‡ç³» RTC_CENTER é‡åŒ–ä½ç½® ç‚¹é¢œè‰² ç‚¹æ³•çº¿ å…«è¿›åˆ¶ç¼–ç çš„æ³•å‘å‘é‡ æ‰¹å¤„ç†ç‚¹ ä¾‹å­ ä»…ä½ç½® ä½ç½®å’Œé¢œè‰² é‡åŒ–ä½ç½®å’Œå…«è¿›åˆ¶ç¼–ç æ³•çº¿ æ‰¹å¤„ç†ç‚¹ æ¯ä¸ªç‚¹çš„å±æ€§ æ‰¹é‡è¡¨ æ‰©å±• æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹ å®ç°ç¤ºä¾‹ å±æ€§å‚è€ƒ ç‚¹äº‘è¦ç´ è¡¨ äºŒè¿›åˆ¶ä½“å¼•ç”¨ å…¨å±€ç¬›å¡å°” 3 åæ ‡ç³»å±æ€§ å…¨å±€ç¬›å¡å°” 4 åæ ‡ç³»å±æ€§ å…¨å±€æ ‡é‡å±æ€§ å±æ€§ ç‚¹äº‘è¦ç´ è¡¨ äºŒè¿›åˆ¶ä½“å¼•ç”¨ å…¨å±€ç¬›å¡å°” 3 åæ ‡ç³»å±æ€§ å…¨å±€ç¬›å¡å°” 4 åæ ‡ç³»å±æ€§ å…¨å±€æ ‡é‡å±æ€§ å±æ€§ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"3D Tileså®ä¾‹3Dæ¨¡å‹(Instanced 3D Model)æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"3d-tiles-instanced-3d-model-specification","date":"2021-04-23T13:43:49.000Z","updated":"2021-05-06T07:12:06.614Z","comments":true,"path":"2021/04/23/3d-tiles-instanced-3d-model-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/3d-tiles-instanced-3d-model-specification/","excerpt":"","text":"å¯¼èˆª å¼• æ¦‚è¿° æ–‡ä»¶ç»“æ„ ç»“æ„å¡«å…… æ–‡ä»¶å¤´ è¦ç´ è¡¨ è¯­æ³•å®šä¹‰ å®ä¾‹è¯­æ³• å…¨å±€è¯­æ³• å®ä¾‹æ–¹å‘ å…«è¿›åˆ¶ç¼–ç çš„æ³•å‘å‘é‡ é»˜è®¤æ–¹å‘ å®ä¾‹ä½ç½® RTC_CENTER é‡åŒ–ä½ç½® å®ä¾‹ç¼©æ”¾ ä¾‹å­ ä»…ä½ç½® é‡åŒ–ä½ç½®å’Œå…«è¿›åˆ¶ç¼–ç æ³•çº¿ æ‰¹å¤„ç†è¡¨ glTF åæ ‡ç³» æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹ å±æ€§å‚è€ƒ å¼•å®˜ç½‘æ–‡æ¡£ æ¦‚è¿°å®ä¾‹ 3D æ¨¡å‹æ˜¯ä¸€ç§åˆ‡ç‰‡æ•°æ®æ ¼å¼ï¼Œç”¨äºé«˜æ•ˆåœ°æµå¼ä¼ è¾“å’Œæ¸²æŸ“å¤§æ•°æ®é‡çš„æ¨¡å‹ï¼Œç§°ä¸ºå®ä¾‹ï¼Œä½†ä¼šç¨æœ‰å˜åŒ–ã€‚åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œä¾‹å¦‚ï¼ŒåŒä¸€æ£µæ ‘æ¨¡å‹å¯èƒ½ä¼šæ”¾ç½®åœ¨å¤šä¸ªåœ°æ–¹ï¼ˆå®ä¾‹åŒ–ï¼‰ã€‚æ¯ä¸ªå®ä¾‹éƒ½å¼•ç”¨ç›¸åŒçš„æ¨¡å‹ï¼Œä½†æ¯ä¸ªå®ä¾‹éƒ½æœ‰å±æ€§ï¼Œä¾‹å¦‚ä½ç½®ã€‚ä½¿ç”¨ core 3D Tiles è§„èŒƒè¯­è¨€ï¼Œæ¯ä¸ªå®ä¾‹æ˜¯ä¸€ä¸ªè¦ç´ ã€‚ é™¤æ ‘æœ¨å¤–ï¼Œå®ä¾‹ 3D æ¨¡å‹è¿˜å¯ç”¨äºè¡¨é¢ç‰¹å¾ï¼ˆä¾‹å¦‚æ¶ˆç«æ “ï¼Œä¸‹æ°´é“ç›–ï¼Œç¯å’Œäº¤é€šä¿¡å·ç¯ï¼‰ï¼Œä»¥åŠç”¨äºå†…éƒ¨ CAD ç‰¹å¾ï¼ˆä¾‹å¦‚èºæ “ï¼Œé˜€é—¨å’Œç”µæºæ’åº§ï¼‰ã€‚ å®ä¾‹åŒ– 3D æ¨¡å‹æ•°æ®æ˜¯å°ç«¯å­—èŠ‚åºçš„äºŒè¿›åˆ¶ Blobã€‚ å®ç°æç¤ºï¼šå¤åˆå¯¹è±¡ (Composite)å¯ä»¥é€šè¿‡ç»„åˆä¸åŒç±»å‹çš„å®ä¾‹æ¨¡å‹æ¥åˆ›å»ºï¼Œä¾‹å¦‚ï¼Œé€šè¿‡åˆå¹¶ä¸¤ä¸ªå®ä¾‹åŒ– 3D æ¨¡å‹å›¾å—æ¥ç»˜åˆ¶æ ‘æœ¨å’Œäº¤é€šä¿¡å·ç¯ã€‚ å®ç°æç¤ºï¼šå®ä¾‹åŒ– 3D æ¨¡å‹å¯ä»¥å¾ˆå¥½åœ°æ˜ å°„åˆ° ANGLE_instanced_arrays æ‰©å±•ï¼Œä»¥ä¾¿ä½¿ç”¨ WebGL è¿›è¡Œé«˜æ•ˆæ¸²æŸ“ã€‚ æ–‡ä»¶ç»“æ„æ•°æ®ç”±æ–‡ä»¶å¤´éƒ¨åˆ†å’Œç´§éšå…¶åçš„äºŒè¿›åˆ¶ä¸»ä½“ç»„æˆã€‚ä¸‹å›¾æ˜¾ç¤ºäº†å®ä¾‹åŒ– 3D æ¨¡å‹çš„å¸ƒå±€ï¼ˆç ´æŠ˜å·è¡¨ç¤ºå¯é€‰å­—æ®µï¼‰ï¼š ç»“æ„å¡«å……æ•°æ® byteLength å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚è¿›è¡Œè¾¹ç•Œå¯¹é½ã€‚åŒ…å«çš„è¦ç´ è¡¨(Feature Table)å’Œæ‰¹å¤„ç†è¡¨(Batch Table)å¿…é¡»ç¬¦åˆå…¶å„è‡ªçš„å¡«å……è¦æ±‚ã€‚ äºŒè¿›åˆ¶ glTF ï¼ˆå¦‚æœå­˜åœ¨ï¼‰çš„å¼€å§‹å’Œç»“æŸä½ç½®å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚è¿›è¡Œè¾¹ç•Œå¯¹é½ï¼Œä»¥ä¾¿æ»¡è¶³ glTF çš„å­—èŠ‚å¯¹é½è¦æ±‚ã€‚è¿™å¯ä»¥é€šè¿‡å¡«å……åŠŸèƒ½è¡¨æˆ–æ‰¹å¤„ç†è¡¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰æ¥å®ç°ã€‚ å¦åˆ™ï¼Œå¦‚æœ glTF å­—æ®µæ˜¯ UTF-8 å­—ç¬¦ä¸²ï¼Œåˆ™å¿…é¡»ç”¨å°¾éšç©ºæ ¼å­—ç¬¦ï¼ˆ0x20ï¼‰å¡«å……å®ƒï¼Œä»¥æ»¡è¶³æ•°æ®çš„å¯¹é½è¦æ±‚ï¼Œåœ¨è¯·æ±‚ glTF æ•°æ®ä¹‹å‰ï¼Œå¿…é¡»åœ¨è¿è¡Œæ—¶å°†å…¶åˆ é™¤ã€‚ æ–‡ä»¶å¤´32 å­—èŠ‚çš„æ–‡ä»¶å¤´åŒ…å«ä»¥ä¸‹å­—æ®µï¼š Field name Data type Description magic 4-byte ANSI string \"i3dm\"ã€‚ç”¨äºå°†å†…å®¹æ ‡è¯†ä¸ºâ€œå®ä¾‹ 3D æ¨¡å‹â€ version uint32 ç‰ˆæœ¬ã€‚ç°åœ¨æ˜¯1ã€‚ byteLength uint32 æ•´ä¸ªæ•°æ®çš„é•¿åº¦ï¼ˆåŒ…æ‹¬æ–‡ä»¶å¤´ï¼‰ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ featureTableJSONByteLength uint32 è¦ç´ è¡¨ JSON éƒ¨åˆ†çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ featureTableBinaryByteLength uint32 è¦ç´ è¡¨äºŒè¿›åˆ¶éƒ¨åˆ†çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ batchTableJSONByteLength uint32 æ‰¹å¤„ç†è¡¨ JSON éƒ¨åˆ†çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œé›¶è¡¨ç¤ºæ²¡æœ‰æ‰¹å¤„ç†è¡¨ batchTableBinaryByteLength uint32 æ‰¹å¤„ç†è¡¨äºŒè¿›åˆ¶éƒ¨åˆ†çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œå¦‚æœbatchTableJSONByteLengthä¸ºé›¶ï¼Œåˆ™ä¹Ÿå°†ä¸ºé›¶ã€‚ gltfFormat uint32 æŒ‡ç¤ºä¸»ä½“çš„ glTF å­—æ®µçš„æ ¼å¼ã€‚ 0è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ª uriï¼Œ1è¡¨ç¤ºå®ƒæ˜¯åµŒå…¥å¼äºŒè¿›åˆ¶ glTFã€‚è¯·å‚é˜…ä¸‹é¢çš„ glTF éƒ¨åˆ†ã€‚ ä¸»ä½“éƒ¨åˆ†ç´§ç€æ–‡ä»¶å¤´ï¼Œå¹¶ä¸”ç”±ä¸‰ä¸ªå­—æ®µç»„æˆï¼šFeature Tableï¼ŒBatch Tableï¼Œå’ŒglTFã€‚ è¦ç´ è¡¨è¦ç´ è¡¨åŒ…å«i3dmç”¨äºåˆ›å»ºå®ä¾‹æ¨¡å‹çš„è¯­æ³•å€¼ã€‚æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹è¦ç´ è¡¨(Feature Table)è§„èŒƒã€‚ åœ¨å±æ€§å‚è€ƒ æŸ¥çœ‹i3dm è¦ç´ è¡¨çš„å‚è€ƒã€‚å®Œæ•´ JSON å®šä¹‰i3dm.featureTable.schema.jsonã€‚ { \"$schema\": \"http://json-schema.org/draft-04/schema\", \"id\": \"i3dm.featureTable.schema.json\", \"title\": \"Instanced 3D Model Feature Table\", \"type\": \"object\", \"description\": \"A set of Instanced 3D Model semantics that contains values defining the position and appearance properties for instanced models in a tile.\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json\" }, { \"properties\": { \"POSITION\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"POSITION_QUANTIZED\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"NORMAL_UP\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"NORMAL_RIGHT\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"NORMAL_UP_OCT32P\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"NORMAL_RIGHT_OCT32P\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"SCALE\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"SCALE_NON_UNIFORM\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"BATCH_ID\": { \"description\": \"A `BinaryBodyReference` object defining the reference to a section of the binary body where the property values are stored. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/binaryBodyReference\" } ] }, \"INSTANCES_LENGTH\": { \"description\": \"A `GlobalPropertyScalar` object defining a numeric property for all features. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/globalPropertyScalar\" } ] }, \"RTC_CENTER\": { \"description\": \"A `GlobalPropertyCartesian3` object defining a 3-component numeric property for all features. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/globalPropertyCartesian3\" } ] }, \"QUANTIZED_VOLUME_OFFSET\": { \"description\": \"A `GlobalPropertyCartesian3` object defining a 3-component numeric property for all features. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/globalPropertyCartesian3\" } ] }, \"QUANTIZED_VOLUME_SCALE\": { \"description\": \"A `GlobalPropertyCartesian3` object defining a 3-component numeric property for all features. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/globalPropertyCartesian3\" } ] }, \"EAST_NORTH_UP\": { \"description\": \"A `GlobalPropertyBoolean` object defining a boolean property for all features. See the corresponding property semantic in [Semantics](/specification/TileFormats/Instanced3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/globalPropertyBoolean\" } ] }, \"extensions\": { \"$ref\": \"extension.schema.json\" }, \"extras\": { \"$ref\": \"extras.schema.json\" } }, \"oneOf\": [ { \"required\": [\"POSITION\"] }, { \"required\": [\"POSITION_QUANTIZED\"] } ], \"dependencies\": { \"POSITION_QUANTIZED\": [ \"QUANTIZED_VOLUME_OFFSET\", \"QUANTIZED_VOLUME_SCALE\" ], \"NORMAL_UP\": [\"NORMAL_RIGHT\"], \"NORMAL_RIGHT\": [\"NORMAL_UP\"], \"NORMAL_UP_OCT32P\": [\"NORMAL_RIGHT_OCT32P\"], \"NORMAL_RIGHT_OCT32P\": [\"NORMAL_UP_OCT32P\"] }, \"required\": [\"INSTANCES_LENGTH\"] } ] } è¯­æ³•å®šä¹‰ å®ä¾‹è¯­æ³•è¯­æ³•æ˜ å°„åˆ°è¦ç´ å€¼çš„æ•°ç»„ï¼Œç”¨äºåˆ›å»ºå®ä¾‹çš„ã€‚å¯¹äºè¯­æ³•ï¼Œè¿™äº›æ•°ç»„çš„é•¿åº¦å¿…é¡»ç›¸åŒï¼Œå¹¶ä¸”å¿…é¡»ç­‰äºå®ä¾‹æ•°ã€‚æ¯ä¸ªå®ä¾‹çš„å€¼å¿…é¡»æ˜¯å¯¹è¦ç´ è¡¨äºŒè¿›åˆ¶ä¸»ä½“çš„å¼•ç”¨ï¼›å®ƒä»¬ä¸èƒ½åµŒå…¥è¦ç´ è¡¨çš„ JSON å¤´ä¸­ã€‚ å¦‚æœä¸€ä¸ªè¯­æ³•ä¾èµ–äºå¦ä¸€ä¸ªè¯­æ³•ï¼Œåˆ™å¿…é¡»å®šä¹‰è¯¥è¯­æ³•ã€‚å¦‚æœå®ä¾‹åŒæ—¶å®šä¹‰äº† SCALE å’Œ SCALE_NON_UNIFORMï¼Œåˆ™å°†åº”ç”¨ä¸¤ä¸ªç¼©æ”¾æ“ä½œã€‚å¦‚æœå®ä¾‹åŒæ—¶å®šä¹‰äº† POSITION å’Œ POSITION_QUANTIZEDï¼Œæ›´é«˜ç²¾åº¦çš„POSITION å°†è¢«ä½¿ç”¨ã€‚å¦‚æœå®ä¾‹åŒæ—¶å®šä¹‰äº† NORMAL_UPï¼ŒNORMAL_RIGHTï¼ŒNORMAL_UP_OCT32Pï¼Œå’Œ NORMAL_RIGHT_OCT32Pï¼Œæ›´é«˜ç²¾åº¦çš„ NORMAL_UP å’Œ NORMAL_RIGHT å°†è¢«ä½¿ç”¨ã€‚ è¯­æ³• æ•°æ®ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» POSITION float32[3] 3 ä¸ªéƒ¨åˆ†çš„æ•°ç»„åŒ…å«xï¼Œyä»¥åŠzçš„ç¬›å¡å°”åæ ‡è¡¨ç¤ºå®ä¾‹çš„ä½ç½® âœ… Yes, é™¤éå®šä¹‰äº† POSITION_QUANTIZED POSITION_QUANTIZED uint16[3] 3 ä¸ªéƒ¨åˆ†çš„æ•°ç»„åŒ…å«xï¼Œyä»¥åŠzçš„é‡åŒ–ç¬›å¡å°”åæ ‡ï¼ˆquantized Cartesian coordinatesï¼‰è¡¨ç¤ºå®ä¾‹çš„ä½ç½® âœ… Yes, é™¤éå®šä¹‰äº† POSITION NORMAL_UP float32[3] å®šä¹‰å®ä¾‹upæ–¹å‘çš„å•ä½å‘é‡ ğŸ”´ No, é™¤éå®šä¹‰äº† NORMAL_RIGHT NORMAL_RIGHT float32[3] å®šä¹‰å®ä¾‹rightæ–¹å‘çš„å•ä½å‘é‡ï¼Œå¿…é¡»ä¸upæ–¹å‘æ­£äº¤ ğŸ”´ No, é™¤éå®šä¹‰äº† NORMAL_UP NORMAL_UP_OCT32P uint16[2] 32 ä½ç²¾åº¦çš„å…«è¿›åˆ¶ç¼–ç çš„å•ä½çŸ¢é‡ï¼Œupç”¨äºå®šä¹‰å®ä¾‹å®šå‘çš„æ–¹å‘ ğŸ”´ No, é™¤éå®šä¹‰äº† NORMAL_RIGHT_OCT32P NORMAL_RIGHT_OCT32P uint16[2] 32 ä½ç²¾åº¦çš„å…«è¿›åˆ¶ç¼–ç çš„å•ä½çŸ¢é‡ï¼Œrightç”¨äºå®šä¹‰å®ä¾‹å®šå‘çš„æ–¹å‘ï¼Œå¿…é¡»ä¸upæ–¹å‘æ­£äº¤ ğŸ”´ No, é™¤éå®šä¹‰äº† NORMAL_UP_OCT32P SCALE float32 ä¸€ä¸ªæ•°å­—ç”¨äºå®šä¹‰å®ä¾‹æ‰€æœ‰è½´çš„æ¯”ä¾‹ ğŸ”´ No. SCALE_NON_UNIFORM float32[3] 3 ä¸ªéƒ¨åˆ†æ•°ç»„çš„æ¯”ä¾‹æ•°å­—ï¼Œå®šä¹‰å®ä¾‹xï¼Œyä»¥åŠzè½´çš„æ¯”ä¾‹ ğŸ”´ No. BATCH_ID uint8, uint16 (default), or uint32 å®ä¾‹çš„batchIdç”¨äºä»Batch Tableæ£€ç´¢å…ƒæ•°æ® ğŸ”´ No. å…¨å±€è¯­æ³•è¿™äº›è¯­æ³•å®šä¹‰äº†æ‰€æœ‰å®ä¾‹çš„å…¨å±€å±æ€§ã€‚ è¯­æ³• æ•°æ®ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» INSTANCES_LENGTH uint32 è¦ç”Ÿæˆçš„å®ä¾‹æ•°ã€‚å®ä¾‹è¯­ä¹‰çš„æ¯ä¸ªæ•°ç»„å€¼çš„é•¿åº¦åº”ç­‰äºæ­¤é•¿åº¦ âœ… Yes. RTC_CENTER float32[3] å½“å®ä¾‹ä½ç½®ç›¸å¯¹äºä¸­å¿ƒå®šä¹‰æ—¶ï¼Œç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„æ•°å­—æ•°ç»„å®šä¹‰ä¸­å¿ƒä½. ğŸ”´ No. QUANTIZED_VOLUME_OFFSET float32[3] ç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„æ•°å­—æ•°ç»„ï¼Œç”¨äºå®šä¹‰é‡åŒ–ä½“ç§¯çš„åç§»é‡ ğŸ”´ No, é™¤éå®šä¹‰äº† POSITION_QUANTIZED QUANTIZED_VOLUME_SCALE float32[3] ç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„æ•°å­—æ•°ç»„ï¼Œç”¨äºå®šä¹‰é‡åŒ–ä½“ç§¯çš„æ¯”ä¾‹ ğŸ”´ No, é™¤éå®šä¹‰äº† POSITION_QUANTIZED EAST_NORTH_UP boolean å½“trueæœªå®šä¹‰æŒ‰å®ä¾‹çš„æ–¹å‘æ—¶ï¼Œæ¯ä¸ªå®ä¾‹å°†é»˜è®¤ä¸ºæ¤­çƒeast/north/upä¸Šå‚è€ƒæ¡†æ¶çš„æ–¹å‘WGS84 ğŸ”´ No. å®ä¾‹æ–¹å‘å®ä¾‹çš„æ–¹å‘ç”±upå’ŒrightçŸ¢é‡åˆ›å»ºçš„æ­£äº¤åŸºå‡†å®šä¹‰ã€‚æ–¹å‘å°†é€šè¿‡ç“¦ç‰‡å˜æ¢ è¿›è¡Œã€‚ xæ ‡å‡†åŸºå‘é‡åœ¨å˜æ¢æ—¶æ˜ å°„åˆ°rightåŸºå‘é‡ï¼Œyå‘é‡æ˜ å°„åˆ°upå‘é‡ã€‚zå‘é‡æ˜ å°„åˆ°forwardå‘é‡ï¼Œä½†å®ƒå¿½ç•¥ï¼Œå› ä¸ºå®ƒæ€»æ˜¯rightå’Œupçš„æ­£äº¤ã€‚ åœ¨æ ‡å‡†åæ ‡è½´ä¸­çš„ç›’å­ ç»è¿‡æ—‹è½¬å˜æ¢çš„ç›’å­ å…«è¿›åˆ¶ç¼–ç çš„æ³•å‘å‘é‡å¦‚æœNORMAL_UPä¸NORMAL_RIGHTä¸è¢«å®ä¾‹æ‰€å®šä¹‰ï¼Œå…¶å–å‘å¯ä»¥è¢«å­˜å‚¨ä¸ºå…«è¿›åˆ¶ç¼–ç çš„æ³•å‘NORMAL_UP_OCT32På’ŒNORMAL_RIGHT_OCT32Pã€‚å®ƒä»¬å®šä¹‰upå’Œrightä½¿ç”¨ç‹¬ç«‹å•ä½å‘é‡çš„æœ‰æ•ˆè¡¨ç¤ºæ³•ä¸­æè¿°çš„å…«è¿›åˆ¶ç¼–ç ã€‚å…«è¿›åˆ¶ç¼–ç çš„å€¼å­˜å‚¨åœ¨æ— ç¬¦å·çš„éè§„èŒƒåŒ–èŒƒå›´ï¼ˆ[0, 65535]ï¼‰ä¸­ï¼Œç„¶ååœ¨è¿è¡Œæ—¶æ˜ å°„åˆ°æœ‰ç¬¦å·ï¼ˆ[-1.0, 1.0]ï¼‰çš„è§„èŒƒåŒ–èŒƒå›´ã€‚ åœ¨ CesiumJS çš„AttributeCompressionæ¨¡å—ä¸­å¯ä»¥æ‰¾åˆ°å¯¹è¿™äº›å•ä½çŸ¢é‡è¿›è¡Œç¼–ç å’Œè§£ç çš„å®ç°ã€‚ é»˜è®¤æ–¹å‘å¦‚æœä¸å­˜åœ¨NORMAL_UPå’ŒNORMAL_RIGHTæˆ–NORMAL_UP_OCT32På’ŒNORMAL_RIGHT_OCT32Pï¼Œåˆ™å®ä¾‹å°†æ²¡æœ‰è‡ªå®šä¹‰æ–¹å‘ã€‚å¦‚æœEAST_NORTH_UPä¸º trueï¼Œåˆ™å‡å®šè¯¥å®ä¾‹ä½äºWGS84æ¤­çƒä½“ä¸Šï¼Œå¹¶ä¸”å…¶æ–¹å‘å°†é»˜è®¤ä¸ºeast/north/upå‚è€ƒæ¡†æ¶åœ¨å…¶åˆ¶å›¾ä½ç½®å¤„çš„ä½ç½®ã€‚è¿™é€‚ç”¨äºè¯¸å¦‚æ ‘æœ¨ä¹‹ç±»çš„å®ä¾‹æ¨¡å‹ï¼Œå…¶æ–¹å‘å§‹ç»ˆä»å…¶åœ¨æ¤­çƒè¡¨é¢ä¸Šçš„ä½ç½®æœä¸Šã€‚ å®ä¾‹ä½ç½®POSITIONå®šä¹‰å®ä¾‹çš„ä½ç½®ï¼Œåœ¨åº”ç”¨ä»»ä½•å˜æ¢ä¹‹å‰ã€‚ RTC_CENTERå¯ä»¥ç›¸å¯¹äºä¸­å¿ƒå®šä¹‰ä½ç½®ä»¥è¿›è¡Œé«˜ç²¾åº¦æ¸²æŸ“ï¼Œè¯·å‚è§Precisionsï¼ŒPrecisionsã€‚å¦‚æœå®šä¹‰ï¼Œåˆ™ RTC_CENTER æŒ‡å®šä¸­å¿ƒä½ç½®ï¼Œå¹¶ä¸”æ‰€æœ‰å®ä¾‹ä½ç½®å‡ç›¸å¯¹äºæ­¤å€¼ã€‚ é‡åŒ–ä½ç½®å¦‚æœæ²¡æœ‰ä¸ºå®ä¾‹å®šä¹‰POSITIONï¼Œåˆ™å…¶ä½ç½®å¯ä»¥å­˜å‚¨åœ¨POSITION_QUANTIZEDä¸­ï¼Œå…¶å®šä¹‰äº†ç›¸å¯¹äºé‡åŒ–ä½“çš„å®ä¾‹ä½ç½®ã€‚å¦‚æœæ²¡æœ‰ POSITION æˆ– POSITION_QUANTIZED å®šä¹‰ï¼Œå®ä¾‹å°†ä¸ä¼šè¢«åˆ›å»ºã€‚ é‡åŒ–ä½“ç”±offsetå’Œscaleå®šä¹‰ï¼Œå¹¶å°†é‡åŒ–çš„ä½ç½®æ˜ å°„åˆ°å±€éƒ¨ç©ºé—´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š offsetå…¨å±€è¯­ä¹‰å­˜å‚¨åœ¨QUANTIZED_VOLUME_OFFSETï¼Œscaleå…¨å±€è¯­ä¹‰å­˜å‚¨åœ¨QUANTIZED_VOLUME_SCALEã€‚å¦‚æœæœªå®šä¹‰è¿™äº›å…¨å±€è¯­ä¹‰ï¼Œåˆ™POSITION_QUANTIZEDæ— æ³•ä½¿ç”¨ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å…¬å¼å°†é‡åŒ–çš„ä½ç½®æ˜ å°„åˆ°æœ¬åœ°ç©ºé—´ï¼š POSITION = POSITION_QUANTIZED \\* QUANTIZED_VOLUME_SCALE / 65535.0 + QUANTIZED_VOLUME_OFFSET å®ä¾‹ç¼©æ”¾ç¼©æ”¾å¯ä»¥ä½¿ç”¨SCALEå’ŒSCALE_NON_UNIFORMè¯­ä¹‰åº”ç”¨äºå®ä¾‹ã€‚ SCALEæ²¿ç€æ‰€æœ‰è½´åº”ç”¨ç»Ÿä¸€çš„ç¼©æ”¾ï¼ŒSCALE_NON_UNIFORMåˆ†åˆ«åœ¨xï¼Œyå’Œzè½´åº”ç”¨ç‹¬ç«‹çš„ç¼©æ”¾ã€‚ ä¾‹å­è¿™äº›ç¤ºä¾‹è¯´æ˜å¦‚ä½•ä¸ºè¦ç´ è¡¨ç”Ÿæˆ JSON å’ŒäºŒè¿›åˆ¶ç¼“å†²åŒºã€‚ ä»…ä½ç½®åœ¨è¿™ä¸ªæœ€å°çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†å››ä¸ªå®ä¾‹ä»¥é»˜è®¤æ–¹å‘æ”¾ç½®åœ¨å•ä½é•¿åº¦æ­£æ–¹å½¢çš„è§’ä¸Šï¼š var featureTableJSON = { INSTANCES_LENGTH: 4, POSITION: { byteOffset: 0 } } var featureTableBinary = new Buffer( new Float32Array([ 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0 ]).buffer ) é‡åŒ–ä½ç½®å’Œå…«è¿›åˆ¶ç¼–ç æ³•çº¿åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå››ä¸ªå®ä¾‹ä¼šè¢«æ”¾ç½®åœ¨upæ–¹å‘ä¸º[0.0, 1.0, 0.0]ï¼Œright ä¸º[1.0, 0.0, 0.0]çš„å…«è¿›åˆ¶ç¼–ç æ ¼å¼ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ”¾ç½®åœ¨é‡åŒ–ä½“ç§¯çš„è§’ä¸Šï¼Œè¯¥é‡åŒ–ä½“ç§¯åœ¨xå’Œzæ–¹å‘ä¸Šè·¨åº¦ä¸º-250.0 åˆ° 250.0 ä¸ªå•ä½ï¼š var featureTableJSON = { INSTANCES_LENGTH: 4, QUANTIZED_VOLUME_OFFSET: [-250.0, 0.0, -250.0], QUANTIZED_VOLUME_SCALE: [500.0, 0.0, 500.0], POSITION_QUANTIZED: { byteOffset: 0 }, NORMAL_UP_OCT32P: { byteOffset: 24 }, NORMAL_RIGHT_OCT32P: { byteOffset: 40 } } var positionQuantizedBinary = new Buffer( new Uint16Array([0, 0, 0, 65535, 0, 0, 0, 0, 65535, 65535, 0, 65535]).buffer ) var normalUpOct32PBinary = new Buffer( new Uint16Array([ 32768, 65535, 32768, 65535, 32768, 65535, 32768, 65535 ]).buffer ) var normalRightOct32PBinary = new Buffer( new Uint16Array([ 65535, 32768, 65535, 32768, 65535, 32768, 65535, 32768 ]).buffer ) var featureTableBinary = Buffer.concat([ positionQuantizedBinary, normalUpOct32PBinary, normalRightOct32PBinary ]) æ‰¹å¤„ç†è¡¨åŒ…å«ç”±batchIdç»„æˆçš„å…ƒæ•°æ®ï¼Œå¯ç”¨äºæ ·å¼å£°æ˜ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§æ‰¹å¤„ç†è¡¨(Batch Table)ã€‚ glTFå®ä¾‹åŒ– 3D æ¨¡å‹åµŒå…¥äº†åŒ…å«æ¨¡å‹å‡ ä½•å’Œçº¹ç†ä¿¡æ¯çš„ glTF 2.0ã€‚ glTF èµ„æºå­˜å‚¨åœ¨è¦ç´ è¡¨å’Œæ‰¹å¤„ç†è¡¨ä¹‹åã€‚å®ƒå¯èƒ½åµŒå…¥äº†æ‰€æœ‰çš„å‡ ä½•ï¼Œçº¹ç†å’ŒåŠ¨ç”»ï¼Œæˆ–è€…å¯èƒ½å¼•ç”¨äº†æŸäº›æˆ–æ‰€æœ‰è¿™äº›æ•°æ®çš„å¤–éƒ¨æ¥æºã€‚ header.gltfFormat ç¡®å®š glTF å­—æ®µçš„æ ¼å¼ å½“ header.gltfFormat çš„å€¼æ˜¯ 0ï¼Œ glTF å­—æ®µæ˜¯ UTF-8 å­—ç¬¦ä¸²ï¼Œå…¶åŒ…å« glTF æˆ–äºŒè¿›åˆ¶ glTF æ¨¡å‹çš„å†…å®¹çš„ URIã€‚ å½“ header.gltfFormat çš„å€¼æ˜¯ 1ï¼ŒglTF å­—æ®µæ˜¯åŒ…å«äºŒè¿›åˆ¶ glTF çš„äºŒè¿›åˆ¶ blob ã€‚ åæ ‡ç³»é»˜è®¤æƒ…å†µä¸‹ï¼ŒglTF ä½¿ç”¨å³æ‰‹åæ ‡ç³»ï¼Œå…¶ä¸­ y è½´æœä¸Šã€‚ä¸ºäº†ä¸ 3D Tiles çš„ z å‘ä¸Šåæ ‡ç³»ä¿æŒä¸€è‡´ï¼Œå¿…é¡»åœ¨è¿è¡Œæ—¶è½¬æ¢ glTFã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§glTF å˜æ¢ ã€‚ æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹å®ä¾‹åŒ– 3D æ¨¡å‹ä½¿ç”¨.i3dm æ‰©å±•åå’Œ application/octet-stream MIME ç±»å‹ã€‚ æ˜¾å¼æ–‡ä»¶æ‰©å±•åæ˜¯å¯é€‰çš„ã€‚æœ‰æ•ˆçš„å®ç°å¯èƒ½ä¼šå¿½ç•¥å®ƒï¼Œå¹¶é€šè¿‡ magic å…¶æ ‡å¤´ä¸­çš„å­—æ®µæ ‡è¯†å†…å®¹çš„æ ¼å¼ã€‚ å±æ€§å‚è€ƒ å®ä¾‹åŒ– 3D æ¨¡å‹è¦ç´ è¡¨ äºŒè¿›åˆ¶ä½“å¼•ç”¨ å…¨å±€ç¬›å¡å°”åæ ‡ç³»å±æ€§ å…¨å±€æ ‡é‡å±æ€§ å…¨å±€å¸ƒå°”å±æ€§ å±æ€§ å®ä¾‹åŒ– 3D æ¨¡å‹è¦ç´ è¡¨ä¸€ç»„å®ä¾‹åŒ– 3D æ¨¡å‹è¯­ä¹‰ï¼Œå…¶ä¸­åŒ…å«å®šä¹‰å›¾å—ä¸­å®ä¾‹åŒ–æ¨¡å‹çš„ä½ç½®å’Œå¤–è§‚å±æ€§çš„å€¼ã€‚ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» extensions object æ‰©å±•ç‰¹å®šçš„å­—å…¸å¯¹è±¡ No extras any åº”ç”¨ç‰¹å®šæ•°æ® No POSITION object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No POSITION_QUANTIZED object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No NORMAL_UP object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No NORMAL_RIGHT object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No NORMAL_UP_OCT32P object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No NORMAL_RIGHT_OCT32P object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No SCALE object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No SCALE_NON_UNIFORM object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No BATCH_ID object äºŒè¿›åˆ¶ä½“å¼•ç”¨ å¯¹è±¡ï¼Œå®šä¹‰å­˜å‚¨äº†å±æ€§å€¼çš„äºŒè¿›åˆ¶ä½“éƒ¨åˆ†çš„å¼•ç”¨ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No INSTANCES_LENGTH object, number [1], number å…¨å±€æ ‡é‡å±æ€§ å¯¹è±¡ï¼Œå®šä¹‰æ‰€æœ‰è¦ç´ çš„æ•°é‡ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• âœ… Yes RTC_CENTER object, number [3] å…¨å±€ç¬›å¡å°”åæ ‡ç³»å±æ€§ å¯¹è±¡ï¼Œå®šä¹‰æ‰€æœ‰è¦ç´ çš„ 3 éƒ¨åˆ†æ•°å€¼å±æ€§ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No QUANTIZED_VOLUME_OFFSET object, number [3] å…¨å±€ç¬›å¡å°”åæ ‡ç³»å±æ€§ å¯¹è±¡ï¼Œå®šä¹‰æ‰€æœ‰è¦ç´ çš„ 3 éƒ¨åˆ†æ•°å€¼å±æ€§ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No QUANTIZED_VOLUME_SCALE object, number [3] å…¨å±€ç¬›å¡å°”åæ ‡ç³»å±æ€§ å¯¹è±¡ï¼Œå®šä¹‰æ‰€æœ‰è¦ç´ çš„ 3 éƒ¨åˆ†æ•°å€¼å±æ€§ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No EAST_NORTH_UP boolean å…¨å±€å¸ƒå°”å±æ€§ å¯¹è±¡ï¼Œå®šä¹‰æ‰€æœ‰è¦ç´ çš„å¸ƒå°”å€¼å±æ€§ã€‚æŸ¥çœ‹ç›¸åº”å±æ€§çš„å®šä¹‰è¯­æ³• No å…è®¸å…¶ä»–å±æ€§ã€‚ äºŒè¿›åˆ¶ä½“å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå®šä¹‰å¯¹è¦ç´ è¡¨çš„äºŒè¿›åˆ¶ä¸»ä½“éƒ¨åˆ†çš„å¼•ç”¨ï¼Œå¦‚æœæœªåœ¨ JSON ä¸­ç›´æ¥å®šä¹‰å±æ€§å€¼ï¼Œåˆ™åœ¨è¯¥éƒ¨åˆ†å­˜å‚¨å±æ€§å€¼ã€‚ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» byteOffset number ç¼“å†²åŒºçš„åç§»é‡ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ âœ… Yes å…è®¸å…¶ä»–å±æ€§ã€‚ å…¨å±€ç¬›å¡å°”åæ ‡ç³»å±æ€§ä¸ºæ‰€æœ‰è¦ç´ å®šä¹‰å…¨å±€ 3 ç»„åˆ†æ•°å€¼å±æ€§å€¼çš„å¯¹è±¡ã€‚ å…¨å±€æ ‡é‡å±æ€§ä¸ºæ‰€æœ‰è¦ç´ å®šä¹‰å…¨å±€æ•°å€¼å±æ€§å€¼çš„å¯¹è±¡ã€‚ å…¨å±€å¸ƒå°”å±æ€§ä¸ºæ‰€æœ‰è¦ç´ å®šä¹‰å…¨å±€å¸ƒå°”å±æ€§å€¼çš„å¯¹è±¡ã€‚ å±æ€§ç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ï¼Œç”¨æ¥åœ¨æ•°æ®ä¸­æŒ‡å®šæ¯ä¸ªè¦ç´ çš„åº”ç”¨ç¨‹åºç‰¹å®šçš„å…ƒæ•°æ®ã€‚å€¼å¯ä»¥ç›´æ¥åœ¨ JSON ä¸­å®šä¹‰ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨äºŒè¿›åˆ¶ä½“ä¸­çš„éƒ¨åˆ†ã€‚ JSON å®šä¹‰ç¤ºä¾‹ { \"$schema\": \"http://json-schema.org/draft-04/schema\", \"id\": \"featureTable.schema.json\", \"title\": \"Feature Table\", \"type\": \"object\", \"description\": \"A set of semantics containing per-tile and per-feature values defining the position and appearance properties for features in a tile.\", \"definitions\": { \"binaryBodyReference\": { \"title\": \"BinaryBodyReference\", \"type\": \"object\", \"description\": \"An object defining the reference to a section of the binary body of the features table where the property values are stored if not defined directly in the JSON.\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 }, \"componentType\": { \"type\": \"number\", \"description\": \"The datatype of components in the property. This is defined only if the semantic allows for overriding the implicit component type. These cases are specified in each tile format.\", \"enum\": [ \"BYTE\", \"UNSIGNED_BYTE\", \"SHORT\", \"UNSIGNED_SHORT\", \"INT\", \"UNSIGNED_INT\", \"FLOAT\", \"DOUBLE\" ] } }, \"required\": [\"byteOffset\"] }, \"numericArray\": { \"type\": \"array\", \"items\": { \"type\": \"number\" } }, \"property\": { \"title\": \"Property\", \"description\": \"A user-defined property which specifies per-feature application-specific metadata in a tile. Values either can be defined directly in the JSON as an array, or can refer to sections in the binary body with a `BinaryBodyReference` object.\", \"oneOf\": [ { \"$ref\": \"#/definitions/binaryBodyReference\" }, { \"type\": \"array\", \"items\": { \"type\": \"number\" } }, { \"type\": \"number\" } ] }, \"globalPropertyBoolean\": { \"title\": \"GlobalPropertyBoolean\", \"description\": \"An object defining a global boolean property value for all features.\", \"type\": \"boolean\" }, \"globalPropertyScalar\": { \"title\": \"GlobalPropertyScalar\", \"description\": \"An object defining a global numeric property value for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 1, \"maxItems\": 1 }, { \"type\": \"number\", \"minimum\": 0 } ] }, \"globalPropertyCartesian3\": { \"title\": \"GlobalPropertyCartesian3\", \"description\": \"An object defining a global 3-component numeric property values for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 3, \"maxItems\": 3 } ] }, \"globalPropertyCartesian4\": { \"title\": \"GlobalPropertyCartesian4\", \"description\": \"An object defining a global 4-component numeric property values for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 4, \"maxItems\": 4 } ] } }, \"properties\": { \"extensions\": { \"$ref\": \"extension.schema.json\" }, \"extras\": { \"$ref\": \"extras.schema.json\" } }, \"additionalProperties\": { \"$ref\": \"#/definitions/property\" } } ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"3D Tilesæ‰¹å¤„ç†3Dæ¨¡å‹ (Batched 3D Model)æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"3d-tiles-batched-3d-model-specification","date":"2021-04-23T13:43:25.000Z","updated":"2021-05-06T07:11:42.518Z","comments":true,"path":"2021/04/23/3d-tiles-batched-3d-model-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/3d-tiles-batched-3d-model-specification/","excerpt":"","text":"å¯¼èˆª å¼• æ¦‚è¿° æ–‡ä»¶ç»“æ„ ç»“æ„å¡«å…… æ–‡ä»¶å¤´ è¦ç´ è¡¨ è¯­æ³•å®šä¹‰ è¦ç´ è¯­æ³• å…¨å±€è¯­æ³• æ‰¹å¤„ç†è¡¨ äºŒè¿›åˆ¶ glTF åæ ‡ç³» æ‰©å±•åå’Œ MIME ç±»å‹ å®ä¾‹ å±æ€§å‚è€ƒ å¼•å®˜ç½‘æ–‡æ¡£ æ¦‚è¿°æ‰¹å¤„ç† 3D æ¨¡å‹å…è®¸ç¦»çº¿æ‰¹å¤„ç†æ··åˆçš„ 3D æ¨¡å‹ï¼ˆä¾‹å¦‚åŸå¸‚ä¸­çš„å„ä¸ªå»ºç­‘ç‰©ï¼‰ï¼Œé«˜æ•ˆåœ°ä»¥æµå¼ä¼ è¾“åˆ° Web å®¢æˆ·ç«¯è¿›è¡Œæ¸²æŸ“å’Œäº¤äº’ã€‚åœ¨å•ä¸ªè¯·æ±‚ä¸­ä¼ è¾“å¤šä¸ªæ¨¡å‹ï¼Œå¹¶ä½¿ç”¨æœ€å°‘æ•°é‡çš„ WebGL è°ƒç”¨æ¥æ¸²æŸ“ä»¥æä¾›é«˜æ•ˆç‡ã€‚ä½¿ç”¨ 3D Tiles core è§„èŒƒè¯­è¨€ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½æ˜¯ä¸€ä¸ªè¦ç´ ã€‚ æ¯ä¸ªæ¨¡å‹çš„å±æ€§ï¼ˆä¾‹å¦‚ IDï¼‰éƒ½å¯ä»¥åœ¨è¿è¡Œæ—¶è¯†åˆ«å’Œæ›´æ–°ï¼Œä¾‹å¦‚æ˜¾ç¤º/éšè—ï¼Œé«˜äº®é¢œè‰²ç­‰ã€‚å±æ€§å¯ä»¥ç”¨äºé€šè¿‡ Web æœåŠ¡æŸ¥è¯¢è®¿é—®å…ƒæ•°æ®ï¼Œä¾‹å¦‚ä¼ é€’å»ºç­‘ç‰©çš„ ID ä»¥è·å–å…¶åœ°å€ï¼ŒåŠ¨æ€ä¿®æ”¹å¼•ç”¨çš„å±æ€§ä»¥æ›´æ”¹æ¨¡å‹çš„å¤–è§‚ï¼ŒåŸºäºå±æ€§å€¼æ›´æ”¹é«˜äº®é¢œè‰²ç­‰ç­‰ã€‚ æ‰¹å¤„ç† 3D æ¨¡å‹æ•°æ®æ˜¯å°ç«¯å­—èŠ‚åºçš„äºŒè¿›åˆ¶ Blobã€‚ æ–‡ä»¶ç»“æ„æ•°æ®ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæ–‡ä»¶å¤´å’Œç´§éšå…¶åçš„ä¸»ä½“ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†â€œæ‰¹å¤„ç† 3D æ¨¡å‹â€æ–‡ä»¶ç»“æ„ï¼ˆè™šçº¿è¡¨ç¤ºå¯é€‰å­—æ®µï¼‰ï¼š ç»“æ„å¡«å……æ•°æ® byteLength å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚è¿›è¡Œè¾¹ç•Œå¯¹é½ã€‚åŒ…å«çš„è¦ç´ è¡¨(Feature Table)å’Œæ‰¹å¤„ç†è¡¨(Batch Table)å¿…é¡»ç¬¦åˆå…¶å„è‡ªçš„å¡«å……è¦æ±‚ã€‚ äºŒè¿›åˆ¶ glTF çš„å¼€å§‹å’Œç»“æŸä½ç½®å¿…é¡»ä»¥ 8 ä¸ªå­—èŠ‚è¿›è¡Œè¾¹ç•Œå¯¹é½ï¼Œä»¥ä¾¿æ»¡è¶³ glTF çš„å­—èŠ‚å¯¹é½è¦æ±‚ã€‚è¿™å¯ä»¥é€šè¿‡å¡«å……åŠŸèƒ½è¡¨æˆ–æ‰¹å¤„ç†è¡¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰æ¥å®ç°ã€‚ æ–‡ä»¶å¤´28 å­—èŠ‚çš„æ–‡ä»¶å¤´åŒ…å«ä»¥ä¸‹å­—æ®µï¼š å­—æ®µå æ•°æ®ç±»å‹ æè¿° magic 4-byte ANSI string \"b3dm\". ç”¨äºæ ‡è¯†ä¸ºâ€œæ‰¹å¤„ç† 3D æ¨¡å‹â€ version uint32 ç‰ˆæœ¬ã€‚ç°åœ¨æ˜¯1 byteLength uint32 æ•´ä¸ªæ•°æ®çš„é•¿åº¦ï¼ˆåŒ…æ‹¬æ–‡ä»¶å¤´ï¼‰ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ featureTableJSONByteLength uint32 è¦ç´ è¡¨ JSON éƒ¨åˆ†çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ featureTableBinaryByteLength uint32 è¦ç´ è¡¨äºŒè¿›åˆ¶éƒ¨åˆ†çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ batchTableJSONByteLength uint32 æ‰¹å¤„ç†è¡¨ JSON éƒ¨åˆ†çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚é›¶è¡¨ç¤ºæ²¡æœ‰æ‰¹å¤„ç†è¡¨ batchTableBinaryByteLength uint32 æ‰¹å¤„ç†è¡¨äºŒè¿›åˆ¶éƒ¨åˆ†çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚å¦‚æœbatchTableJSONByteLengthä¸ºé›¶ï¼Œåˆ™ä¹Ÿå°†ä¸ºé›¶ã€‚ æ–‡ä»¶ä¸»ä½“éƒ¨åˆ†ç´§è·Ÿç€æ–‡ä»¶å¤´ï¼Œå¹¶ä¸”ç”±ä¸‰ä¸ªå­—æ®µç»„æˆï¼šFeature Tableï¼ŒBatch Tableï¼Œå’ŒBinary glTFã€‚ è¦ç´ è¡¨åŒ…å«b3dmè¯­æ³•ã€‚ è¦ç´ è¡¨(Feature Table) æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚ å±æ€§å‚è€ƒ æŸ¥çœ‹ b3dm è¦ç´ è¡¨çš„æ›´å¤šå‚è€ƒã€‚ å®Œæ•´ JSON å®šä¹‰ï¼š { \"$schema\": \"http://json-schema.org/draft-04/schema\", \"id\": \"b3dm.featureTable.schema.json\", \"title\": \"Batched 3D Model Feature Table\", \"type\": \"object\", \"description\": \"A set of Batched 3D Model semantics that contain additional information about features in a tile.\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json\" }, { \"properties\": { \"BATCH_LENGTH\": { \"description\": \"A `GlobalPropertyScalar` object defining a numeric property for all features. See the corresponding property semantic in [Semantics](/specification/TileFormats/Batched3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/globalPropertyScalar\" } ] }, \"RTC_CENTER\": { \"description\": \"A `GlobalPropertyCartesian3` object defining a 3-component numeric property for all features. See the corresponding property semantic in [Semantics](/specification/TileFormats/Batched3DModel/README.md#semantics).\", \"allOf\": [ { \"$ref\": \"featureTable.schema.json#/definitions/globalPropertyCartesian3\" } ] }, \"extensions\": { \"$ref\": \"extension.schema.json\" }, \"extras\": { \"$ref\": \"extras.schema.json\" } }, \"required\": [\"BATCH_LENGTH\"] } ] } è¯­æ³•å®šä¹‰ è¦ç´ è¯­æ³•å½“å‰æ²¡æœ‰æŒ‰è¦ç´ çš„è¯­æ³•ã€‚ å…¨å±€è¯­æ³•ä»¥ä¸‹è¯­æ³•å®šä¹‰äº†æ‰€æœ‰è¦ç´ çš„å…¨å±€å±æ€§ã€‚ è¯­æ³• æ•°æ®ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» BATCH_LENGTH uint32 æ•°æ®ä¸­å¯åŒºåˆ†æ¨¡å‹ï¼ˆè¦ç´ ï¼‰çš„æ•°é‡ã€‚å¦‚æœ Binary glTF æ²¡æœ‰batchIdå±æ€§ï¼Œåˆ™æ­¤å­—æ®µå¿…é¡»ä¸º0ã€‚ âœ… Yes. RTC_CENTER float32[3] å½“ä½ç½®ç›¸å¯¹äºä¸­å¿ƒå®šä¹‰æ—¶ï¼Œç”±ä¸‰ç»´æ•°ç»„å®šä¹‰çš„ä¸­å¿ƒä½ç½®ï¼ˆè¯·å‚é˜…åæ ‡ç³»ï¼‰ã€‚ ğŸ”´ No. æ‰¹å¤„ç†è¡¨æ‰¹å¤„ç†è¡¨åŒ…å«æ¯ä¸€æ¨¡å‹çš„åº”ç”¨ç‰¹å®šå±æ€§ï¼Œé€šè¿‡batchIdç´¢å¼•ï¼Œå¯è¢«ç”¨äºå£°æ˜æ ·å¼å’Œåº”ç”¨ç‰¹å®šçš„ä½¿ç”¨ï¼Œå¦‚å¡«å…… UI æˆ–è€…è¿›è¡Œ REST API è¯·æ±‚ã€‚åœ¨äºŒè¿›åˆ¶ glTF éƒ¨åˆ†ï¼Œæ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰ä¸€ä¸ª batchId çš„æ•°å€¼å±æ€§ï¼Œæ•´å‹æ•°ç»„èŒƒå›´å†…[0, number of models in the batch - 1]ã€‚batchId æŒ‡ç¤ºè¯¥é¡¶ç‚¹æ‰€å±çš„æ¨¡å‹ã€‚è¿™æ ·å¯ä»¥å°†æ¨¡å‹æ•´åˆåœ¨ä¸€èµ·ï¼ˆbatched togetherï¼‰ï¼Œå¹¶ä¸”ä»ç„¶å¯ä»¥è¯†åˆ«ã€‚ æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œè¯·å‚è§æ‰¹å¤„ç†è¡¨(Batch Table)ã€‚ äºŒè¿›åˆ¶ glTFæ‰¹å¤„ç† 3D æ¨¡å‹åµŒå…¥äº†åŒ…å«æ¨¡å‹å‡ ä½•å’Œçº¹ç†ä¿¡æ¯çš„glTF 2.0ã€‚ äºŒè¿›åˆ¶ glTF ç´§éšè¦ç´ è¡¨å’Œæ‰¹å¤„ç†è¡¨ã€‚å®ƒå¯èƒ½åµŒå…¥äº†å…¶æ‰€æœ‰çš„å‡ ä½•ï¼Œçº¹ç†å’ŒåŠ¨ç”»ï¼Œæˆ–è€…å¯èƒ½å¼•ç”¨äº†æŸäº›æˆ–æ‰€æœ‰è¿™äº›æ•°æ®çš„å¤–éƒ¨æ¥æºã€‚ å¦‚ä¸Šæ‰€è¿°ï¼Œæ¯ä¸ªé¡¶ç‚¹å…·æœ‰ batchId æŒ‡ç¤ºå…¶æ‰€å±æ¨¡å‹çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰ä¸‰ä¸ªæ¨¡å‹çš„æ‰¹å¤„ç†çš„é¡¶ç‚¹å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š batchId: [0, 0, 0, ..., 1, 1, 1, ..., 2, 2, 2, ...] position: [xyz, xyz, xyz, ..., xyz, xyz, xyz, ..., xyz, xyz, xyz, ...] normal: [xyz, xyz, xyz, ..., xyz, xyz, xyz, ..., xyz, xyz, xyz, ...] é¡¶ç‚¹æ˜¯å¿…é¡»ä»¥batchIdæ’åºçš„ï¼Œå› æ­¤ä»¥ä¸‹å½¢å¼ä¹Ÿå¯ä»¥ï¼š batchId: [0, 1, 2, ..., 2, 1, 0, ..., 1, 2, 0, ...] position: [xyz, xyz, xyz, ..., xyz, xyz, xyz, ..., xyz, xyz, xyz, ...] normal: [xyz, xyz, xyz, ..., xyz, xyz, xyz, ..., xyz, xyz, xyz, ...] æ³¨æ„ï¼Œä¸€ä¸ªé¡¶ç‚¹ä¸èƒ½å±äºå¤šä¸ªæ¨¡å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å¤åˆ¶é¡¶ç‚¹ï¼Œä»¥ä¾¿batchIds å¯ä»¥åˆ†é…ã€‚ batchId å‚æ•°æ˜¯åœ¨ glTF å›¾å…ƒä¸­é€šè¿‡è®¾ç½®_BATCHID å±æ€§å®šä¹‰çš„ï¼ŒbatchIdçš„å€¼å¯¹åº” accessor çš„é¡ºåºç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œ \"primitives\": [ { \"attributes\": { \"_BATCHID\": 0 } } ] { \"accessors\": [ { \"bufferView\": 1, \"byteOffset\": 0, \"componentType\": 5126, \"count\": 4860, \"max\": [2], \"min\": [0], \"type\": \"SCALAR\" } ] } accessor.typeçš„å€¼å¿…é¡»æ˜¯\"SCALAR\"ã€‚æ‰€æœ‰å…¶ä»–å±æ€§å¿…é¡»ç¬¦åˆ glTF æ¨¡å¼ï¼Œä½†æ²¡æœ‰å…¶ä»–é¢å¤–è¦æ±‚ã€‚ å½“æ‰¹å¤„ç†è¡¨å­˜åœ¨æˆ–BATCH_LENGTHå±æ€§å¤§äº0æ—¶ï¼Œ_BATCHIDå±æ€§ä¸ºå¿…å¡«ï¼›å¦åˆ™ï¼Œå¯ä»¥ä¸å¡«ã€‚ åæ ‡ç³»é»˜è®¤æƒ…å†µä¸‹ï¼ŒåµŒå…¥å¼ glTF ä½¿ç”¨å³æ‰‹åæ ‡ç³»ï¼Œå…¶ä¸­ y è½´æœä¸Šã€‚ä¸ºäº†ä¸ 3D Tiles çš„ z å‘ä¸Šåæ ‡ç³»ä¿æŒä¸€è‡´ï¼Œå¿…é¡»åœ¨è¿è¡Œæ—¶è½¬æ¢ glTFã€‚è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒglTF è½¬æ¢ã€‚ å¯ä»¥ç›¸å¯¹äºä¸­å¿ƒå®šä¹‰é¡¶ç‚¹ä½ç½®ä»¥è¿›è¡Œé«˜ç²¾åº¦æ¸²æŸ“ï¼Œè¯·å‚è§Precisions,Precisionsã€‚å¦‚æœå®šä¹‰ï¼Œåˆ™ RTC_CENTER æŒ‡å®šåœ¨åº”ç”¨åæ ‡ç³»å˜æ¢å’Œ glTF èŠ‚ç‚¹å±‚æ¬¡ç»“æ„å˜æ¢ä¹‹åï¼Œæ‰€æœ‰é¡¶ç‚¹ä½ç½®éƒ½ç›¸å¯¹äºå…¶çš„ä¸­å¿ƒä½ç½®ã€‚ æ‰©å±•åå’Œ MIME ç±»å‹æ‰¹å¤„ç† 3D æ¨¡å‹æ•°æ®ä½¿ç”¨.b3dmæ‰©å±•åå’Œapplication/octet-streamçš„ MIME ç±»å‹ã€‚ æ˜¾å¼æ–‡ä»¶æ‰©å±•åæ˜¯å¯é€‰çš„ã€‚æœ‰äº›å®ç°å¯èƒ½ä¼šå¿½ç•¥å®ƒï¼Œå¹¶é€šè¿‡ magic å…¶æ ‡å¤´ä¸­çš„å­—æ®µæ ‡è¯†å†…å®¹çš„æ ¼å¼ã€‚ å®ä¾‹æœ¬èŠ‚æ˜¯éè§„èŒƒæ€§çš„ å¯ä»¥åœ¨ CesiumJS çš„ 3D Tiles å®ç°ä¸­æ‰¾åˆ°è¯»å–æ–‡ä»¶å¤´çš„ä»£ç  Batched3DModelTileContent.js ã€‚ å±æ€§å‚è€ƒ æ‰¹å¤„ç† 3D æ¨¡å‹è¦ç´ è¡¨ äºŒè¿›åˆ¶ä½“å¼•ç”¨ å…¨å±€ç¬›å¡å°”åæ ‡ç³»å±æ€§ å…¨å±€æ ‡é‡å±æ€§ å±æ€§ æ‰¹å¤„ç† 3D æ¨¡å‹è¦ç´ è¡¨ä¸€ç»„æ‰¹å¤„ç† 3D æ¨¡å‹å®šä¹‰ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³æ•°æ®ä¸­è¦ç´ çš„é¢å¤–ä¿¡æ¯ã€‚ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» extensions object æ‰©å±•ç‰¹å®šçš„å­—å…¸å¯¹è±¡ No extras any åº”ç”¨ç¨‹åºç‰¹å®šæ•°æ® No BATCH_LENGTH object, number [1], number ä¸€ä¸ªå…¨å±€æ ‡é‡å±æ€§å¯¹è±¡å®šä¹‰æ‰€æœ‰è¦ç´ å¾—æ•°æ®å±æ€§ï¼ŒæŸ¥çœ‹ç›¸åº”è¯­æ³•å®šä¹‰ âœ… Yes RTC_CENTER object, number [3] ä¸€ä¸ªå…¨å±€ç¬›å¡å°”åæ ‡ç³»å±æ€§å¯¹è±¡å®šä¹‰çš„æ‰€æœ‰è¦ç´ çš„ 3 ä¸ªæ•°å€¼å±æ€§ï¼ŒæŸ¥çœ‹ç›¸åº”è¯­æ³•å®šä¹‰ No å…è®¸å…¶ä»–å±æ€§ã€‚ äºŒè¿›åˆ¶ä½“å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰å¯¹è¦ç´ è¡¨çš„äºŒè¿›åˆ¶ä¸»ä½“çš„å¼•ç”¨éƒ¨åˆ†ï¼Œå¦‚æœæœªåœ¨ JSON ä¸­ç›´æ¥å®šä¹‰å±æ€§å€¼ï¼Œåˆ™åœ¨è¯¥éƒ¨åˆ†å‚¨å­˜ã€‚ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» byteOffset number ç¼“å†²åŒºçš„åç§»é‡ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ âœ… Yes å…è®¸å…¶ä»–å±æ€§ã€‚ å…¨å±€ç¬›å¡å°”åæ ‡ç³»å±æ€§å®šä¹‰æ‰€æœ‰è¦ç´ çš„å…¨å±€ä¸‰ç»´æ•°ç»„å±æ€§å¯¹è±¡ã€‚ å…¨å±€æ ‡é‡å±æ€§å®šä¹‰æ‰€æœ‰è¦ç´ çš„å…¨å±€æ•°å€¼å±æ€§å¯¹è±¡ã€‚ å±æ€§ç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ï¼Œç”¨æ¥åœ¨æ•°æ®ä¸­æŒ‡å®šæ¯ä¸ªè¦ç´ çš„åº”ç”¨ç¨‹åºç‰¹å®šçš„å…ƒæ•°æ®ã€‚å€¼å¯ä»¥ç›´æ¥åœ¨ JSON ä¸­å®šä¹‰ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨äºŒè¿›åˆ¶ä½“ä¸­çš„éƒ¨åˆ†ã€‚ JSON å®šä¹‰ç¤ºä¾‹ { \"$schema\": \"http://json-schema.org/draft-04/schema\", \"id\": \"featureTable.schema.json\", \"title\": \"Feature Table\", \"type\": \"object\", \"description\": \"A set of semantics containing per-tile and per-feature values defining the position and appearance properties for features in a tile.\", \"definitions\": { \"binaryBodyReference\": { \"title\": \"BinaryBodyReference\", \"type\": \"object\", \"description\": \"An object defining the reference to a section of the binary body of the features table where the property values are stored if not defined directly in the JSON.\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 }, \"componentType\": { \"type\": \"number\", \"description\": \"The datatype of components in the property. This is defined only if the semantic allows for overriding the implicit component type. These cases are specified in each tile format.\", \"enum\": [ \"BYTE\", \"UNSIGNED_BYTE\", \"SHORT\", \"UNSIGNED_SHORT\", \"INT\", \"UNSIGNED_INT\", \"FLOAT\", \"DOUBLE\" ] } }, \"required\": [\"byteOffset\"] }, \"numericArray\": { \"type\": \"array\", \"items\": { \"type\": \"number\" } }, \"property\": { \"title\": \"Property\", \"description\": \"A user-defined property which specifies per-feature application-specific metadata in a tile. Values either can be defined directly in the JSON as an array, or can refer to sections in the binary body with a `BinaryBodyReference` object.\", \"oneOf\": [ { \"$ref\": \"#/definitions/binaryBodyReference\" }, { \"type\": \"array\", \"items\": { \"type\": \"number\" } }, { \"type\": \"number\" } ] }, \"globalPropertyBoolean\": { \"title\": \"GlobalPropertyBoolean\", \"description\": \"An object defining a global boolean property value for all features.\", \"type\": \"boolean\" }, \"globalPropertyScalar\": { \"title\": \"GlobalPropertyScalar\", \"description\": \"An object defining a global numeric property value for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 1, \"maxItems\": 1 }, { \"type\": \"number\", \"minimum\": 0 } ] }, \"globalPropertyCartesian3\": { \"title\": \"GlobalPropertyCartesian3\", \"description\": \"An object defining a global 3-component numeric property values for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 3, \"maxItems\": 3 } ] }, \"globalPropertyCartesian4\": { \"title\": \"GlobalPropertyCartesian4\", \"description\": \"An object defining a global 4-component numeric property values for all features.\", \"oneOf\": [ { \"type\": \"object\", \"properties\": { \"byteOffset\": { \"type\": \"number\", \"description\": \"The offset into the buffer in bytes.\", \"minimum\": 0 } }, \"required\": [\"byteOffset\"] }, { \"type\": \"array\", \"items\": { \"type\": \"number\" }, \"minItems\": 4, \"maxItems\": 4 } ] } }, \"properties\": { \"extensions\": { \"$ref\": \"extension.schema.json\" }, \"extras\": { \"$ref\": \"extras.schema.json\" } }, \"additionalProperties\": { \"$ref\": \"#/definitions/property\" } } ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"æ–‡ç« ä¸­è¶…é“¾æ¥æ‰“å¼€æ–¹å¼targetä¿®æ”¹","slug":"artical-a-target-default","date":"2021-04-23T11:52:15.000Z","updated":"2021-05-06T07:12:33.549Z","comments":true,"path":"2021/04/23/artical-a-target-default/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/artical-a-target-default/","excerpt":"","text":"é—®é¢˜hexo-theme-materyä¸»é¢˜é»˜è®¤é…ç½®äº†æ‰€æœ‰é“¾æ¥éƒ½æ˜¯ä»æ–°çª—å£ä¸­æ‰“å¼€ï¼Œä½†è‡ªå·±å†™çš„æ–‡ç« é”šç‚¹ï¼Œæˆ‘ä»¬è‚¯å®šå¸Œæœ›ç›´æ¥é¡µé¢å†…ç›´æ¥è·³è½¬å°±è¡Œäº†ï¼Œå¦åˆ™çš„è¯æ‰“å¼€çš„é¡µé¢å°±å¤ªå¤šäº†ã€‚ åŸç†ä¿®æ”¹é…ç½®çš„è¯ï¼Œåœ¨/themes/hexo-theme-matery/source/js/matery.jsè¿™ä¸ªæ–‡ä»¶ä¸‹é¢çš„ï¼š /*æ–‡ç« å†…å®¹è¯¦æƒ…çš„ä¸€äº›åˆå§‹åŒ–ç‰¹æ€§*/ let articleInit = function () { $('#articleContent a').attr('target', '_blank') ... } ä¼˜åŒ–ä¿®æ”¹è¿™é‡Œçš„_blankåˆ°_selfï¼Œå°±å¯ä»¥æŠŠé»˜è®¤é…ç½®ä»æ–°é¡µé¢æ‰“å¼€ä¿®æ”¹ä¸ºå½“å‰é¡µæ‰“å¼€äº†ã€‚ ä½†æ˜¯ä¿®æ”¹é»˜è®¤å€¼è¿™ç§æ–¹å¼ä¼šå½±å“åˆ°å…¨å±€ï¼Œå¯èƒ½å¼•å…¥ä¸å¿…è¦çš„é”™è¯¯ï¼Œæ‰€ä»¥è¿™é‡Œæ¨èä¸€ç§æ›´å¥½ç”¨çš„æ–¹å¼ã€‚ åœ¨ä¸‹é¢æ·»åŠ ä¸€è¡Œï¼Œå†™ä¸Šï¼š /*æ–‡ç« å†…å®¹è¯¦æƒ…çš„ä¸€äº›åˆå§‹åŒ–ç‰¹æ€§*/ let articleInit = function () { $('#articleContent a').attr('target', '_blank') $('#articleContent a.self').attr('target', '_self') ... } ä¹‹å‰å†™çš„æ–‡ç« ä¼šç»§ç»­æŒ‰ç…§é»˜è®¤çš„æ–¹å¼è¿è¡Œï¼Œå¦‚æœæƒ³åœ¨å½“å‰é¡µå†…è·³è½¬çš„è¯ï¼Œå°±ä½¿ç”¨ &lt;a class=\"self\" href=\"è·³è½¬çš„åœ°å€\"&gt;è·³è½¬æŒ‰é’®&lt;/a&gt;ï¼Œè¿™æ ·çš„å†™æ³•ï¼Œé‡ç‚¹æ˜¯class=\"self\"ï¼Œå°±ä¼šåœ¨å½“å‰é¡µå†…è·³è½¬äº†ã€‚ å¦‚ä½•è®¾ç½®é”šç‚¹è®¾ç½®é”šç‚¹çš„è¯ï¼Œå°±æ˜¯åœ¨ä½ æƒ³è·³è½¬åˆ°çš„åœ°æ–¹ï¼Œæ’å…¥ï¼š &lt;a id=\"è‡ªå·±å–ä¸€ä¸ªå”¯ä¸€çš„åå­—ä½œä¸ºid\" name=\"å’Œå·¦è¾¹idé‡Œé¢å¡«å†™ä¸€æ ·çš„å€¼\"&gt;&lt;/a&gt; å…¶å®è®¾ç½®é”šç‚¹ï¼Œåªç”¨è®¾ç½®&lt;a&gt;æ ‡ç­¾é‡Œé¢nameå±æ€§çš„å€¼ï¼Œä½†æ˜¯ HTML4.0 ä¿®æ”¹äº†æ ‡å‡†ï¼Œä»»ä½•æ ‡ç­¾æ·»åŠ äº†idå±æ€§ä»¥åï¼Œéƒ½å¯ä»¥ä½œä¸ºé”šç‚¹æ¥ä½¿ç”¨ã€‚ä½†æ˜¯æ³¨æ„ï¼šmatery ä¸»é¢˜ç”¨å…¶ä»–ä»»æ„æ ‡ç­¾è®¾ç½®é”šç‚¹æ˜¯èƒ½å¤Ÿè‡ªåŠ¨è·³è½¬çš„ï¼Œä½†æ˜¯ç”±äºè§£æåçš„å¤§å°é—®é¢˜ï¼Œæ ·å¼æœ‰ä¸€äº›é—®é¢˜ã€‚æ‰€ä»¥è¿˜æ˜¯å»ºè®®ä½¿ç”¨aæ ‡ç­¾ä½œä¸ºé”šç‚¹ï¼Œä½†åŒæ—¶è®¾ç½®idå’Œnameå±æ€§æ¥ä¿è¯å…¼å®¹æ€§ã€‚ ä¾‹å­å½“å‰æ–‡ç« ç›®å½• é—®é¢˜ï¼ˆé¡µå†…è·³è½¬ï¼‰ åŸç†ï¼ˆé¡µå†…è·³è½¬ï¼‰ ä¼˜åŒ–ï¼ˆé¡µå†…è·³è½¬ï¼‰ å¦‚ä½•è®¾ç½®é”šç‚¹ï¼ˆæ‰“å¼€æ–°é¡µé¢ï¼‰ ä¾‹å­ï¼ˆæ‰“å¼€æ–°é¡µé¢ï¼‰ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"}],"author":null},{"title":"glTF æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"glTF-specification","date":"2021-04-23T05:13:21.000Z","updated":"2021-05-06T07:12:49.381Z","comments":true,"path":"2021/04/23/glTF-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/23/glTF-specification/","excerpt":"","text":"å¼•glTF (GL Transmission Format) çš„åˆ›å»ºç›®çš„ï¼Œæ˜¯ä¸º 3D å†…å®¹å·¥å…·å’ŒæœåŠ¡å®šä¹‰äº†ä¸€ç§å¯æ‰©å±•çš„é€šç”¨å‘å¸ƒæ ¼å¼ã€‚ å®˜ç½‘æ–‡æ¡£ æ³¨æ„ï¼šglTF å·²ç»æœ‰ç‰ˆæœ¬åˆ†æ”¯äº† To do ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"glTF","slug":"glTF","permalink":"https://tanghaojie.github.io/categories/glTF/"},{"name":"specification","slug":"glTF/specification","permalink":"https://tanghaojie.github.io/categories/glTF/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"glTF","slug":"glTF","permalink":"https://tanghaojie.github.io/tags/glTF/"}],"author":null},{"title":"3D Tilesæ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ","slug":"3d-tiles-specification","date":"2021-04-21T12:12:57.000Z","updated":"2021-05-06T07:11:29.314Z","comments":true,"path":"2021/04/21/3d-tiles-specification/","link":"","permalink":"https://tanghaojie.github.io/2021/04/21/3d-tiles-specification/","excerpt":"","text":"å¯¼èˆª å†™åœ¨å‰é¢ å¼•å­ glTF ç®€ä»‹ æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹ JSON ç¼–ç  URIs å•ä½ åæ ‡å‚è€ƒç³»ç»Ÿï¼ˆCRSï¼‰ æ¦‚å¿µ Tiles å‡ ä½•è¯¯å·®ï¼ˆGeometric errorï¼‰ ç»†åŒ–/ä¼˜åŒ–ï¼ˆRefinementï¼‰ è¾¹ç•Œç›’/è¾¹ç•Œä½“ï¼ˆBounding Volumesï¼‰ è¾¹ç•Œç›’ï¼ˆBoxï¼‰ è¾¹ç•Œçƒï¼ˆSphereï¼‰ è¾¹ç•ŒåŒºï¼ˆRegionï¼‰ è§‚å¯Ÿè¯·æ±‚ç›’/ä½“ï¼ˆViewer Request Volumeï¼‰ å˜æ¢ï¼ˆTransformsï¼‰ ç“¦ç‰‡å˜æ¢ï¼ˆTile Transformsï¼‰ glTF å˜æ¢ï¼ˆglTF Transformsï¼‰ å®ä¾‹ ç“¦ç‰‡ JSON Tileset JSON å¤–éƒ¨æ•°æ®é›†ï¼ˆExternal Tilesetsï¼‰ è¾¹ç•Œä½“ç©ºé—´è¿ç»­æ€§ï¼ˆBounding volume spatial coherenceï¼‰ ç©ºé—´æ•°æ®ç»“æ„ï¼ˆSpatial data structuresï¼‰ å››å‰æ ‘ï¼ˆQuadtreesï¼‰ K-d æ ‘ï¼ˆK-dtreesï¼ŒK ç»´æ ‘ï¼‰ å…«å‰æ ‘ï¼ˆOctreesï¼‰ ç½‘æ ¼ï¼ˆGridsï¼‰ æ‰©å±•å’Œé™„åŠ åŠŸèƒ½ æ‰©å±• é™„åŠ åŠŸèƒ½ ç“¦ç‰‡æ ¼å¼è§„èŒƒ å£°æ˜å¼æ ·å¼è§„èŒƒ å±æ€§å‚è€ƒ å†™åœ¨å‰é¢ç»å¸¸è¦ç”¨ 3D Tiles æ•°æ®æ ¼å¼ï¼Œå®˜æ–¹æ–‡æ¡£åªæœ‰è‹±æ–‡çš„ç‰ˆæœ¬ï¼Œçœ‹å®˜ç½‘æ–‡æ¡£å¯¹äºæˆ‘è¿™ä¸ªè‹±æ¸£æ¥è¯´å¤ªæ…¢å¤ªè´¹æ—¶äº†ï¼Œè¿˜æ˜¯ä¸­æ–‡çœ‹ç€æœ€é¡ºçœ¼ã€‚æ•…å‡†å¤‡ç¿»è¯‘å½’çº³æ€»ç»“ä¸€ä¸ªä¸­æ–‡ç‰ˆçš„ 3D Tiles æ•°æ®æ ¼å¼è§„èŒƒï¼Œç•™ç€ä»¥åæŸ¥è¯¢ä½¿ç”¨ã€‚ æœ‰ç–‘é—®ã€å¼‚è®®çš„åœ°æ–¹ï¼Œè¿˜æ˜¯å»ºè®®å»å®˜ç½‘æ–‡æ¡£çœ‹åŸç‰ˆçš„æ›´åŠ å‡†ç¡®ã€‚ 3D Tiles å®˜ç½‘æ–‡æ¡£ å†™åˆ°è¿™çš„æ—¶å€™ï¼Œå®˜ç½‘æ–‡æ¡£çš„ç‰ˆæœ¬ï¼š_Version 1.0, June 6th, 2018_ å¼•å­ glTF3D Tiles è§„èŒƒé‡ç‚¹åœ¨äºè§£å†³ä¸‰ç»´æ¨¡å‹ Tileï¼ˆç“¦ç‰‡ã€åˆ‡ç‰‡ï¼‰çš„é—®é¢˜ï¼Œå®é™…æ¨¡å‹æ˜¯åŸºäº glTF æ¥æ„å»ºçš„ï¼Œæ‰€ä»¥äº†è§£ 3D Tiles å°±è¦å…ˆäº†è§£ glTFã€‚ glTF (GL Transmission Format) çš„åˆ›å»ºç›®çš„ï¼Œæ˜¯ä¸º 3D å†…å®¹å·¥å…·å’ŒæœåŠ¡å®šä¹‰äº†ä¸€ç§å¯æ‰©å±•çš„é€šç”¨å‘å¸ƒæ ¼å¼ã€‚å…·ä½“è§„èŒƒåˆæ˜¯ä¸€å¤§ç‰‡æ–‡ç« äº†ï¼Œè¿™é‡Œå…ˆåŸ‹å‘äº†ï¼Œåé¢å†è¡¥ã€‚ glTF æ•°æ®æ ¼å¼æ ‡å‡†è§„èŒƒ æ³¨æ„ï¼šglTF å·²ç»æœ‰ç‰ˆæœ¬åˆ†æ”¯äº† ç®€ä»‹3D Tiles ä¸“ä¸ºæµå¼ä¼ è¾“å’Œæ¸²æŸ“å¤§é‡ 3D åœ°ç†ç©ºé—´å†…å®¹è€Œè®¾è®¡ï¼Œä¾‹å¦‚æ‘„å½±æµ‹é‡ã€3D å»ºç­‘ã€BIM / CADã€è¦ç´ å®ä¾‹å’Œç‚¹äº‘ã€‚å®ƒå®šä¹‰äº†åˆ†å±‚çš„æ•°æ®ç»“æ„å’Œä¸€ç»„å¯ä¼ é€’æ¸²æŸ“å†…å®¹çš„åˆ‡ç‰‡æ ¼å¼ã€‚3D Tiles æ²¡æœ‰ä¸ºå¯è§†åŒ–çš„å†…å®¹æ˜ç¡®çš„å®šä¹‰è§„åˆ™ã€‚å®¢æˆ·å¯ä»¥è§†å…¶éœ€è¦å¯è§†åŒ– 3D Tiles çš„æ•°æ®ã€‚ åœ¨ 3D Tiles ä¸­ï¼Œtileset æ˜¯æŒ‰ç©ºé—´æ•°æ®ç»“æ„ï¼ˆtreeï¼‰ç»„ç»‡çš„ä¸€ç»„ç“¦ç‰‡(Tile)ã€‚tileset æ˜¯ç”±è‡³å°‘ä¸€ä¸ª tileset JSON æ–‡ä»¶æ„æˆï¼ŒåŒ…æ‹¬ tileset å…ƒæ•°æ®å’Œ ç“¦ç‰‡(Tile) å¯¹è±¡æ ‘ï¼Œå…¶ä¸­æ¯ä¸ªå¯æ¸²æŸ“å†…å®¹å¯¹è±¡éƒ½æ˜¯ä»¥ä¸‹æ ¼å¼ä¹‹ä¸€ï¼š æ ¼å¼ ç”¨é€” æ‰¹å¤„ç† 3D æ¨¡å‹ (Batched 3D Model (b3dm)) å¼‚æ„ 3D æ¨¡å‹ã€‚ä¾‹å¦‚å¸¦çº¹ç†çš„åœ°å½¢å’Œè¡¨é¢ï¼Œ3D å»ºç­‘å¤–éƒ¨å’Œå†…éƒ¨ï¼Œå¤§å‹æ¨¡å‹ã€‚ å®ä¾‹ 3D æ¨¡å‹ (Instanced 3D Model (i3dm)) 3D æ¨¡å‹å®ä¾‹ã€‚ä¾‹å¦‚æ ‘æœ¨ï¼Œé£è½¦ï¼Œèºæ “ã€‚ ç‚¹äº‘ (Point Cloud (pnts)) å¤§é‡çš„ç‚¹ã€‚ å¤åˆå¯¹è±¡ (Composite (cmpt)) å°†ä¸åŒæ ¼å¼çš„å›¾å—åˆå¹¶ä¸ºä¸€ä¸ªå›¾å—ã€‚ ç“¦ç‰‡(Tile)ï¼ˆç“¦ç‰‡æ ¼å¼çš„ä¸€ä¸ªå•ç‹¬å®ä¾‹ï¼‰æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶ blobï¼Œå…·æœ‰ç‰¹å®šçš„ç»„ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬è¦ç´ è¡¨(Feature Table)å’Œæ‰¹å¤„ç†è¡¨(Batch Table)ã€‚ å†…å®¹å¼•ç”¨äº†ä¸€ç»„è¦ç´ ï¼Œä¾‹å¦‚è¡¨ç¤ºå»ºç­‘ç‰©/æ ‘æœ¨çš„ 3D æ¨¡å‹æˆ–ç‚¹äº‘ä¸­çš„ç‚¹ã€‚æ¯ä¸ªè¦ç´ çš„ä½ç½®å’Œå¤–è§‚å±æ€§éƒ½å­˜å‚¨åœ¨ç“¦ç‰‡(Tile)çš„è¦ç´ è¡¨(Feature Table)ä¸­ï¼Œé¢å¤–é™„åŠ æˆ–åº”ç”¨ç‰¹å®šï¼ˆadditional application-specificï¼‰çš„å±æ€§å­˜å‚¨åœ¨æ‰¹å¤„ç†è¡¨(Batch Table)ä¸­ã€‚å®¢æˆ·ç«¯å¯ä»¥åœ¨è¿è¡Œæ—¶é€‰æ‹©è¦ç´ ï¼Œå¹¶è·å–å…¶å±æ€§ä»¥è¿›è¡Œå¯è§†åŒ–æˆ–åˆ†æã€‚ æ‰¹å¤„ç† 3D æ¨¡å‹(Batched 3D Model)å’Œå®ä¾‹ 3D æ¨¡å‹(Instanced 3D Model)æ ¼å¼åŸºäº glTF æ„å»ºï¼ŒglTF æ˜¯ä¸€ä¸ªä¸ºé«˜æ•ˆä¼ è¾“ 3D å†…å®¹è€Œè®¾è®¡çš„å¼€æ”¾è§„èŒƒã€‚è¿™äº›æ ¼å¼çš„ç“¦ç‰‡å†…å®¹åµŒå…¥ glTF èµ„æºçš„äºŒè¿›åˆ¶ä¸»ä½“ä¸­ï¼Œå…¶ä¸­åŒ…å«æ¨¡å‹å‡ ä½•å’Œçº¹ç†ä¿¡æ¯ã€‚ç‚¹äº‘æ ¼å¼æœªåµŒå…¥ glTFã€‚ ç“¦ç‰‡(Tile)ä»¥æ ‘å½¢ç»“æ„ç»„ç»‡ï¼Œå…¶ä¸­ç»“åˆäº†è¯¦ç»†å±‚æ¬¡ç»“æ„ï¼ˆHLODï¼šHierarchical Level of Detailï¼‰çš„æ¦‚å¿µï¼Œä»¥å®ç°ç©ºé—´æ•°æ®çš„æœ€ä½³æ¸²æŸ“å‘ˆç°ã€‚æ¯ä¸ªå›¾å—éƒ½æœ‰ä¸€ä¸ªè¾¹ç•Œç›’ï¼ˆbounding volumeï¼‰ï¼Œå³ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå®Œå…¨åŒ…å›´å…¶å†…å®¹çš„ç©ºé—´èŒƒå›´ã€‚æ ‘å…·æœ‰ç©ºé—´è¿è´¯æ€§; å­ç“¦ç‰‡çš„å†…å®¹å®Œæ•´çš„åŒ…å«åœ¨çˆ¶çº§çš„è¾¹ç•Œç›’ä¹‹å†…ã€‚ åˆ‡ç‰‡é›†å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºæ …æ ¼å’ŒçŸ¢é‡åˆ‡ç‰‡ï¼ˆå¦‚ Web åœ°å›¾åˆ‡ç‰‡æœåŠ¡ï¼ˆWMTSï¼‰æˆ– XYZ æ–¹æ¡ˆï¼‰çš„ 2D ç©ºé—´åˆ‡ç‰‡æ–¹æ¡ˆï¼Œè¯¥äºŒç»´ç©ºé—´åˆ‡ç‰‡æ–¹æ¡ˆä»¥å¤šçº§åˆ«ï¼ˆLODï¼‰ï¼ˆæˆ–ç¼©æ”¾çº§åˆ«ï¼‰æä¾›é¢„å®šä¹‰çš„åˆ‡ç‰‡ã€‚ä½†æ˜¯ï¼Œç”±äºåˆ‡ç‰‡é›†çš„å†…å®¹é€šå¸¸æ˜¯ä¸ä¸€è‡´çš„ï¼Œå¾ˆéš¾ä»…åœ¨äºŒç»´ä¸Šç»„ç»‡ï¼Œå› æ­¤æ ‘å¯ä»¥æ˜¯å…·æœ‰ç©ºé—´ä¸€è‡´æ€§çš„ä»»ä½•ç©ºé—´æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ k-d æ ‘ï¼Œå››å‰æ ‘ï¼Œå…«å‰æ ‘å’Œç½‘æ ¼ã€‚ å¯é€‰åœ°ï¼Œå¯ä»¥å°†3D Tiles æ ·å¼æˆ– style åº”ç”¨äº tilesetã€‚æ ·å¼ç”±è¡¨è¾¾å¼æ¥å®šä¹‰å…¶ä¸­çš„æ¯ä¸€ä¸ªè¦ç´ æ˜¾ç¤ºæ–¹å¼ã€‚ æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹3D Tiles ä½¿ç”¨ä»¥ä¸‹æ–‡ä»¶æ‰©å±•åå’Œ MIME ç±»å‹ã€‚ Tileset æ–‡ä»¶ä½¿ç”¨ .json æ‰©å±•åå’Œ application/json MIME ç±»å‹ã€‚ åˆ‡ç‰‡å†…å®¹æ–‡ä»¶ä½¿ç”¨ç‰¹å®šäºå…¶åˆ‡ç‰‡æ ¼å¼è§„èŒƒçš„æ–‡ä»¶ç±»å‹å’Œ MIME æ ¼å¼ã€‚ Tileset æ ·å¼æ–‡ä»¶ä½¿ç”¨ .json æ‰©å±•åå’Œ application/json MIME ç±»å‹ã€‚æ˜¾å¼æ–‡ä»¶æ‰©å±•åæ˜¯å¯é€‰çš„ã€‚æœ‰æ•ˆçš„å®ç°å¯èƒ½ä¼šå¿½ç•¥å®ƒï¼Œå¹¶é€šè¿‡å…¶å¤´ä¸­çš„ magic å­—æ®µæ ‡è¯†å†…å®¹çš„æ ¼å¼ã€‚ JSON ç¼–ç 3D Tiles å¯¹ JSON æ ¼å¼å’Œç¼–ç å…·æœ‰ä»¥ä¸‹é™åˆ¶ã€‚ JSON å¿…é¡»ä½¿ç”¨æ²¡æœ‰ BOM çš„ UTF-8 ç¼–ç ã€‚ æœ¬è§„èŒƒä¸­å®šä¹‰çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼ˆå±æ€§åç§°ï¼Œæšä¸¾ï¼‰ä»…ä½¿ç”¨ ASCII å­—ç¬¦é›†ï¼Œå¹¶ä¸”å¿…é¡»ä»¥çº¯æ–‡æœ¬å½¢å¼ç¼–å†™ã€‚ JSON å¯¹è±¡ä¸­çš„åç§°ï¼ˆé”®ï¼‰å¿…é¡»å”¯ä¸€ï¼Œå³ä¸å…è®¸é‡å¤çš„é”®ã€‚ URIs3D Tiles ä½¿ç”¨ URI æ¥å¼•ç”¨ tile å†…å®¹ã€‚è¿™äº› URI å¯ä»¥æŒ‡å‘ç›¸å¯¹å¤–éƒ¨å¼•ç”¨ï¼ˆRFC3986ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å°†èµ„æºåµŒå…¥ JSON çš„æ•°æ® URIã€‚åµŒå…¥å¼èµ„æºä½¿ç”¨â€œæ•°æ®â€ URI æ–¹æ¡ˆï¼ˆRFC2397ï¼‰ã€‚ å¦‚æœ URI æ˜¯ç›¸å¯¹çš„ï¼Œåˆ™å…¶æ ¹å§‹ç»ˆç›¸å¯¹äºå¼•ç”¨çš„ tileet JSON æ–‡ä»¶ã€‚ å®¢æˆ·ç«¯å®ç°éœ€è¦æ”¯æŒç›¸å¯¹çš„å¤–éƒ¨å¼•ç”¨å’ŒåµŒå…¥å¼èµ„æºã€‚å¯é€‰åœ°ï¼Œå®¢æˆ·ç«¯å®ç°å¯ä»¥æ”¯æŒå…¶ä»–æ–¹æ¡ˆï¼ˆä¾‹å¦‚ http://ï¼‰ã€‚æ‰€æœ‰ URI å¿…é¡»æœ‰æ•ˆä¸”å¯è§£æã€‚ å•ä½æ‰€æœ‰çº¿æ€§è·ç¦»çš„å•ä½æ˜¯ç±³ã€‚ æ‰€æœ‰è§’åº¦å‡ä»¥å¼§åº¦ä¸ºå•ä½ã€‚ åæ ‡å‚è€ƒç³»ç»Ÿï¼ˆCRSï¼‰3D Tiles ä½¿ç”¨å³æ‰‹ç¬›å¡å°”åæ ‡ç³»ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œx å’Œ y çš„å‰ç§¯å¾—å‡º zã€‚3D Tiles å°† z è½´å®šä¹‰ä¸ºå±€éƒ¨ç¬›å¡å°”åæ ‡ç³»çš„ä¸Šæ–¹å‘ã€‚ä¸€ä¸ªæ•°æ®é›†çš„å…¨å±€åæ ‡ç³»é€šå¸¸ä½äº WGS 84 ä»¥åœ°çƒä¸ºä¸­å¿ƒï¼Œå›ºå®šäºåœ°çƒï¼ˆECEFï¼‰çš„å‚è€ƒç³»ï¼ˆEPSG 4978ï¼‰ä¸­ï¼Œä½†ä¸å¿…é¡»å¦‚æ­¤ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªå‘ç”µå‚å¯ä»¥å®šä¹‰åœ¨å…¶å±€éƒ¨åæ ‡ç³»å†…ï¼Œè€Œä¸ä½¿ç”¨ç©ºé—´æ•°æ®å†…å®¹ï¼Œä»…ä»…ä½¿ç”¨æ¨¡å‹å·¥å…·ã€‚ å¯ä»¥åº”ç”¨é¢å¤–çš„æ•°æ®å˜æ¢ï¼ˆtile transformï¼‰æ¥å°†ç“¦ç‰‡çš„å±€éƒ¨åæ ‡ç³»å˜æ¢ä¸ºçˆ¶ç“¦ç‰‡çš„åæ ‡ç³»ã€‚ è¾¹ç•ŒåŒºï¼ˆRegionï¼‰ä½¿ç”¨åœ°ç†åæ ‡ç³»ï¼ˆçº¬åº¦ï¼Œç»åº¦ï¼Œé«˜åº¦ï¼‰æŒ‡å®šè¾¹ç•Œï¼Œè¯¦æƒ… EPSG 4979ã€‚ æ¦‚å¿µ Tilesç“¦ç‰‡(Tiles)ç”±å…ƒæ•°æ®ç»„æˆï¼Œç”¨äºå®šä¹‰ç“¦ç‰‡(tile)æ˜¯å¦æ¸²æŸ“ï¼Œå¯æ¸²æŸ“å†…å®¹çš„å¼•ç”¨ï¼Œä»¥åŠå­ç“¦ç‰‡çš„æ•°ç»„ã€‚ å‡ ä½•è¯¯å·®ï¼ˆGeometric errorï¼‰ç“¦ç‰‡æ˜¯æ ‘å½¢ç»“æ„åˆå¹¶æ„æˆçš„è¯¦ç»†å±‚æ¬¡ç»“æ„Hierarchical Level of Detail (HLOD)ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯åœ¨è¿è¡Œæ—¶å®ç° ç“¦ç‰‡ æ˜¯å¦å®Œå…¨æ¸²æŸ“ ï¼Œ ä»¥åŠç“¦ç‰‡çš„å†…å®¹æ˜¯å¦åº”ç”±é«˜è´¨é‡çš„å­ç“¦ç‰‡æ¥ä¾æ¬¡å®Œæˆã€‚ä¸€ç§å®ç°æ˜¯è€ƒè™‘æœ€å¤§å±å¹•å…è®¸ç©ºé—´è¯¯å·®Screen-Space Error (SSE)ï¼Œè¯¥è¯¯å·®ä»¥åƒç´ ä¸ºå•ä½ã€‚ ç“¦ç‰‡çš„å‡ ä½•è¯¯å·®å®šä¹‰äº†è¯¥ç“¦ç‰‡çš„é€‰æ‹©æŒ‡æ ‡ã€‚å®ƒçš„å€¼æ˜¯ä¸€ä¸ªéè´Ÿæ•°ï¼Œæ¥æŒ‡å®šç“¦ç‰‡å‡ ä½•å›¾å½¢çš„æœ€ç®€åŒ–è¡¨ç¤ºæ—¶çš„è¯¯å·®ï¼ˆå•ä½ï¼šç±³ï¼‰ã€‚æ ¹å›¾å—æ˜¯æºå‡ ä½•å›¾å½¢çš„æœ€ç®€åŒ–ç‰ˆæœ¬ï¼Œå…¶å‡ ä½•è¯¯å·®æœ€å¤§ã€‚ç„¶åï¼Œæ¯ä¸ªè¿ç»­çº§åˆ«çš„å­çº§å°†å…·æœ‰æ¯”å…¶çˆ¶çº§ä½çš„å‡ ä½•è¯¯å·®ï¼Œè€Œå¶å­å›¾å—çš„å‡ ä½•è¯¯å·®ä¸º 0 æˆ–æ¥è¿‘ 0ã€‚ åœ¨å®¢æˆ·ç«¯å®ç°ä¸­ï¼Œå‡ ä½•è¯¯å·®ä¸å…¶ä»–å±å¹•ç©ºé—´æŒ‡æ ‡ä¸€èµ·ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œç“¦ç‰‡åˆ°ç›¸æœºçš„è·ç¦»ï¼Œå±å¹•å¤§å°å’Œåˆ†è¾¨ç‡ï¼‰ï¼Œä»¥è®¡ç®—å½“ç“¦ç‰‡è¢«æ¸²æŸ“è€Œå­ç“¦ç‰‡ä¸éœ€è¦æ¸²æŸ“æ—¶éœ€è¦å¼•å…¥çš„å‡ ä½•è¯¯å·®ï¼ˆSSEï¼‰ã€‚å¦‚æœå¼•å…¥çš„å‡ ä½•è¯¯å·®ï¼ˆSSEï¼‰è¶…è¿‡äº†æ‰€å…è®¸çš„æœ€å¤§å€¼ï¼Œåˆ™å°†ä¼˜åŒ–ç“¦ç‰‡å¹¶è€ƒè™‘æ¸²æŸ“å…¶å­çº§ã€‚ å‡ ä½•è¯¯å·®æ˜¯æ ¹æ®è¯¸å¦‚ç‚¹å¯†åº¦ï¼Œç±³ä¸ºå•ä½çš„ç“¦ç‰‡å¤§å°ï¼Œæˆ–è¯¥å›¾å—ç‰¹æœ‰çš„å…¶ä»–å› ç´ ä¹‹ç±»çš„åº¦é‡æ ‡å‡†åˆ¶å®šçš„ã€‚é€šå¸¸ï¼Œè¾ƒé«˜çš„å‡ ä½•è¯¯å·®æ„å‘³ç€æ›´ç§¯æåœ°ç»†åŒ–å›¾å—ï¼Œå¹¶ä¸”å°†æ›´å¿«åœ°åŠ è½½å’Œæ¸²æŸ“å­å›¾å—ã€‚ ç»†åŒ–/ä¼˜åŒ–ï¼ˆRefinementï¼‰ä¼˜åŒ–å†³å®šäº†è¾ƒä½åˆ†è¾¨ç‡çš„çˆ¶ç“¦ç‰‡è¢«é€‰æ‹©æ¸²æŸ“çš„å­çº§æ—¶æ¸²æŸ“çš„è¿‡ç¨‹ã€‚å…è®¸çš„ç»†åŒ–ç±»å‹ä¸ºæ›¿æ¢ï¼ˆ\"REPLACE\"ï¼‰å’Œæ·»åŠ ï¼ˆ\"ADD\"ï¼‰ã€‚å¦‚æœç“¦ç‰‡å…·æœ‰â€œæ›¿æ¢â€çš„ç»†åŒ–é…ç½®ï¼Œåˆ™å°†æ¸²æŸ“å­ç“¦ç‰‡ä»£æ›¿çˆ¶ç“¦ç‰‡ï¼Œå³ä¸å†æ¸²æŸ“çˆ¶ç“¦ç‰‡ã€‚å¦‚æœç“¦ç‰‡å…·æœ‰â€œæ·»åŠ â€çš„ç»†åŒ–é…ç½®ï¼Œåˆ™é™¤äº†çˆ¶ç“¦ç‰‡ä¹‹å¤–ï¼Œè¿˜å°†æ¸²æŸ“å­ç“¦ç‰‡ã€‚ åŒºå—é›†å¯ä»¥ä»…ä½¿ç”¨æ›¿æ¢ä¼˜åŒ–ï¼Œä»…æ·»åŠ æ”¹è¿›æˆ–æ·»åŠ å’Œæ›¿æ¢ä¼˜åŒ–çš„ä»»æ„ç»„åˆã€‚ Tileset çš„æ ¹å›¾å—éœ€è¦ç»†åŒ–ç±»å‹ï¼›å¯¹äºæ‰€æœ‰å…¶ä»–ç£è´´ï¼Œå®ƒæ˜¯å¯é€‰çš„ã€‚å¦‚æœçœç•¥ï¼Œåˆ™ tile ä¼šç»§æ‰¿å…¶çˆ¶çº§çš„ä¼˜åŒ–ç±»å‹ã€‚ è¾¹ç•Œç›’/è¾¹ç•Œä½“ï¼ˆBounding volumesï¼‰è¾¹ç•Œç›’å®šä¹‰äº†åŒ…å›´å›¾å—æˆ–å›¾å—å†…å®¹çš„ç©ºé—´èŒƒå›´ã€‚ä¸ºäº†æ”¯æŒå„ç§æ•°æ®é›†çš„ç´§å¯†æ‹Ÿåˆä½“ç§¯ï¼Œä¾‹å¦‚è§„åˆ™åˆ’åˆ†çš„åœ°å½¢ï¼Œæœªä¸çº¬åº¦æˆ–ç»åº¦çº¿å¯¹é½çš„åŸå¸‚ï¼Œæˆ–ä»»æ„ç‚¹äº‘ï¼Œè¾¹ç•Œç›’ç±»å‹åŒ…æ‹¬æœ‰å‘è¾¹ç•Œæ¡†ï¼Œè¾¹ç•Œçƒï¼Œå’Œç”±æœ€å°ã€æœ€å¤§çº¬åº¦ï¼Œç»åº¦å’Œé«˜åº¦å®šä¹‰çš„è¾¹ç•ŒåŒºã€‚ è¾¹ç•Œç›’ï¼ˆBoxï¼‰boundingVolume.boxå±æ€§æ˜¯ç”± 12 ä¸ªæ•°å­—ç»„æˆçš„æ•°ç»„ï¼Œåœ¨å³æ‰‹ 3 è½´ï¼ˆxï¼Œyï¼Œzï¼‰ç¬›å¡å°”åæ ‡ç³»ä¸­å®šä¹‰çš„ä¸€ä¸ªæœ‰å‘åŒ…å›´ç›’ï¼Œå…¶ä¸­ z è½´æ˜¯ã€‚å‰ä¸‰ä¸ªå…ƒç´ å®šä¹‰æ¡†ä¸­å¿ƒçš„ xï¼Œy å’Œ z å€¼ã€‚æ¥ä¸‹æ¥çš„ä¸‰ä¸ªå…ƒç´ ï¼ˆç´¢å¼•ä¸º 3ã€4 å’Œ 5ï¼‰å®šä¹‰äº† x è½´æ–¹å‘å’Œä¸€åŠé•¿åº¦ï¼ˆhalf-lengthï¼‰ã€‚æ¥ä¸‹æ¥çš„ä¸‰ä¸ªå…ƒç´ ï¼ˆç´¢å¼• 6ã€7 å’Œ 8ï¼‰å®šä¹‰ y è½´æ–¹å‘å’Œä¸€åŠé•¿åº¦ï¼ˆhalf-lengthï¼‰ã€‚æœ€åä¸‰ä¸ªå…ƒç´ ï¼ˆç´¢å¼• 9ã€10 å’Œ 11ï¼‰å®šä¹‰ z è½´æ–¹å‘å’Œä¸€åŠé•¿åº¦ï¼ˆhalf-lengthï¼‰ã€‚ \"boundingVolume\": { \"box\": [ 0, 0, 10, 100, 0, 0, 0, 100, 0, 0, 0, 10 ] } è¾¹ç•Œçƒï¼ˆSphereï¼‰boundingVolume.sphereå±æ€§æ˜¯ç”± 4 ä¸ªæ•°å­—ç»„æˆçš„æ•°ç»„å®šä¹‰çš„è¾¹ç•Œçƒã€‚å‰ä¸‰ä¸ªå…ƒç´ åœ¨å³æ‰‹ 3 è½´ï¼ˆxï¼Œyï¼Œzï¼‰ç¬›å¡å°”åæ ‡ç³»ä¸­å®šä¹‰çƒä½“ä¸­å¿ƒçš„ xï¼Œy å’Œ z å€¼ï¼Œå…¶ä¸­ z è½´æœä¸Šã€‚æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆç´¢å¼•ä¸º 3ï¼‰ä»¥ç±³ä¸ºå•ä½å®šä¹‰åŠå¾„ã€‚ \"boundingVolume\": { \"sphere\": [ 0, 0, 10, 141.4214 ] } è¾¹ç•ŒåŒºï¼ˆRegionï¼‰boundingVolume.regionå±æ€§æ˜¯ä¸€ä¸ªç”± 6 ä¸ªæ•°å­—ç»„æˆçš„æ•°ç»„ï¼Œå®šä¹‰äº†ç”±çº¬åº¦ï¼Œç»åº¦å’Œé«˜åº¦åæ ‡çš„åœ°ç†è¾¹ç•ŒåŒºï¼Œä½¿ç”¨[west, south, east, north, minimum height, maximum height]çš„é¡ºåºã€‚çº¬åº¦å’Œç»åº¦æ˜¯åœ¨ EPSG 4979 ä¸­å®šä¹‰çš„ WGS 84 åŸºå‡†ï¼Œä»¥å¼§åº¦è¡¨ç¤ºã€‚é«˜åº¦åœ¨ WGS 84 æ¤­çƒä¸Šæ–¹ï¼ˆæˆ–ä¸‹æ–¹ï¼‰ä»¥ç±³ä¸ºå•ä½ã€‚ \"boundingVolume\": { \"region\": [ -1.3197004795898053, 0.6988582109, -1.3196595204101946, 0.6988897891, 0, 20 ] } è§‚å¯Ÿè¯·æ±‚ç›’/ä½“ï¼ˆViewer request volumeï¼‰ç“¦ç‰‡çš„ è§‚å¯Ÿè¯·æ±‚ç›’/ä½“ï¼ˆViewer request volumeï¼‰ å¯ä»¥ç”¨äºç»„åˆå¼‚æ„æ•°æ®é›†ï¼Œä¹Ÿå¯ä»¥ä¸å¤–éƒ¨æ•°æ®é›†ç»„åˆã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¯ä¸€ä¸ªåœ¨b3dmç“¦ç‰‡ä¸­çš„å»ºç­‘ç‰©ï¼Œå¹¶åœ¨å»ºç­‘ç‰©ä¸­åŒ…å«äº†åœ¨pntsç“¦ç‰‡ä¸­çš„ç‚¹äº‘ã€‚ç‚¹äº‘ç“¦ç‰‡çš„boundingVolumeæ˜¯åŠå¾„ä¸º 1.25 çš„è¾¹ç•Œçƒã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªæ›´å¤§çš„ï¼ŒåŠå¾„ä¸º 15 çš„viewerRequestVolumeè¾¹ç•Œçƒé…ç½®ã€‚ç”±äº geometricError å€¼ä¸ºé›¶ï¼Œå› æ­¤å½“è§‚å¯Ÿè€…ä½äºç”±viewerRequestVolumeæ‰€å®šä¹‰çš„å¤§çš„è¾¹ç•Œçƒå†…æ—¶ï¼Œå§‹ç»ˆä¼šæ¸²æŸ“ç‚¹äº‘çš„å†…å®¹ã€‚ ç®€å•æ¥è¯´ï¼ŒviewerRequestVolumeæ˜¯ä¸€ä¸ªæ¯”boundingVolumeä¼˜å…ˆçº§æ›´é«˜çš„æ˜¾ç¤ºé…ç½®ï¼Œå½“è§†è§’è¿›å…¥viewerRequestVolumeä¸­æ˜¯ï¼Œç“¦ç‰‡å°±ä¼šæ˜¾ç¤ºï¼Œå°±ä¸å¿…é¡»é€šè¿‡boundingVolumeå’ŒgeometricErroræ¥é…ç½®äº†ã€‚ { \"children\": [ { \"transform\": [ 4.843178171884396, 1.2424271388626869, 0, 0, -0.7993325488216595, 3.1159251367235608, 3.8278032889280675, 0, 0.9511533376784163, -3.7077466670407433, 3.2168186118075526, 0, 1215001.7612985559, -4736269.697480114, 4081650.708604793, 1 ], \"boundingVolume\": { \"box\": [0, 0, 6.701, 3.738, 0, 0, 0, 3.72, 0, 0, 0, 13.402] }, \"geometricError\": 32, \"content\": { \"uri\": \"building.b3dm\" } }, { \"transform\": [ 0.968635634376879, 0.24848542777253732, 0, 0, -0.15986650990768783, 0.6231850279035362, 0.7655606573007809, 0, 0.19023066741520941, -0.7415493329385225, 0.6433637229384295, 0, 1215002.0371330238, -4736270.772726648, 4081651.6414821907, 1 ], \"viewerRequestVolume\": { \"sphere\": [0, 0, 0, 15] }, \"boundingVolume\": { \"sphere\": [0, 0, 0, 1.25] }, \"geometricError\": 0, \"content\": { \"uri\": \"points.pnts\" } } ] } å˜æ¢ï¼ˆTransformsï¼‰ ç“¦ç‰‡å˜æ¢ï¼ˆTile transformsï¼‰ä¸ºäº†æ”¯æŒå±€éƒ¨åæ ‡ç³»ï¼ˆä¾‹å¦‚ï¼Œå¯ä»¥åœ¨åŸå¸‚æ•°æ®é›†å†…éƒ¨åŠ è½½è‡ªå®šä¹‰åæ ‡ç³»çš„å»ºç­‘æ•°æ®é›†ï¼Œå¹¶å»ºç­‘æ•°æ®é›†å†…éƒ¨åŠ è½½è‡ªå®šä¹‰åæ ‡ç³»çš„ç‚¹äº‘æ•°æ®é›†ï¼‰ï¼Œæ¯ä¸ªæ•°æ®éƒ½æœ‰å¯é€‰çš„transformå±æ€§ã€‚ transform å±æ€§æ˜¯ä¸€ä¸ª 4x4 ä»¿å°„å˜æ¢çŸ©é˜µï¼ˆaffine transformation matrixï¼‰ï¼Œä»¥åˆ—ä¼˜å…ˆé¡ºåºå­˜å‚¨ï¼Œä»æ•°æ®çš„æœ¬åœ°åæ ‡ç³»è½¬æ¢åˆ°çˆ¶æ•°æ®çš„åæ ‡ç³»ï¼Œæˆ–è€…åˆ°æ•°æ®é›†æ ¹æ•°æ®çš„å˜æ¢ã€‚ *ä»¿å°„å˜æ¢ï¼šä¿æŒåŸæ¥çš„çº¿å…±ç‚¹ã€ç‚¹å…±çº¿çš„å…³ç³»ä¸å˜ï¼Œä¿æŒåŸæ¥ç›¸äº’å¹³è¡Œçš„çº¿ä»ç„¶å¹³è¡Œï¼Œä¿æŒåŸæ¥çš„ä¸­ç‚¹ä»ç„¶æ˜¯ä¸­ç‚¹ï¼Œä¿æŒåŸæ¥åœ¨ä¸€æ¡ç›´çº¿ä¸Šå„ä¸ªçº¿æ®µä¹‹é—´çš„æ¯”ä¾‹å…³ç³»ä¸å˜ã€‚ä½†æ˜¯ä»¿å°„å˜æ¢ä¸èƒ½ä¿æŒåŸæ¥çš„çº¿æ®µé•¿åº¦ä¸å˜ï¼Œä¹Ÿä¸èƒ½ä¿æŒåŸæ¥çš„å¤¹è§’è§’åº¦ä¸å˜ã€‚ transformå±æ€§é€‚ç”¨äº tile.content æ¯ä¸ªè¦ç´ çš„ä½ç½®ã€‚ æ¯ä¸ªè¦ç´ çš„æ³•çº¿å‡åº”é€šè¿‡é€†è½¬ç½®çš„å·¦ä¸Š 3x3 çŸ©é˜µè¿›è¡Œå˜æ¢ï¼Œä»¥åœ¨ä½¿ç”¨ scale æ—¶ transform è€ƒè™‘æ­£ç¡®çš„çŸ¢é‡å˜æ¢ã€‚ï¼ˆEach featureâ€™s normal should be transformed by the top-left 3x3 matrix of the inverse-transpose of transform to account for correct vector transforms when scale is used.ï¼‰ tile.boundingVolumeï¼Œä½† tile.boundingVolume.region ç±»å‹å®šä¹‰é™¤å¤–ï¼Œè¯¥ç±»å‹ä»¥ EPSGï¼š4979 åæ ‡ç³»ä¸ºå‡†ã€‚ tile.boundingVolumeï¼Œä½† tile.boundingVolume.region ç±»å‹å®šä¹‰é™¤å¤–ï¼Œè¯¥ç±»å‹ä»¥ EPSGï¼š4979 åæ ‡ç³»ä¸ºå‡†ã€‚ tile.viewerRequestVolumeï¼Œä½† tile.viewerRequestVolume.region ç±»å‹å®šä¹‰é™¤å¤–ï¼Œè¯¥ç±»å‹ä»¥ EPSGï¼š4979 åæ ‡ç³»ä¸ºå‡†ã€‚ transformå±æ€§ä¸é€‚ç”¨äºgeometricErrorï¼Œä¾‹å¦‚ï¼Œç”±transformå®šä¹‰çš„æ¯”ä¾‹ç¼©æ”¾(scale)ä¸ä¼šç¼©æ”¾å‡ ä½•è¯¯å·®çš„å€¼ï¼Œå‡ ä½•è¯¯å·®å§‹ç»ˆä»¥ç±³ä¸ºå•ä½å®šä¹‰ã€‚ å½“transformæ²¡æœ‰å®šä¹‰ï¼Œåˆ™é»˜è®¤ä¸ºå•ä½çŸ©é˜µï¼š [ 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0 ] ä»æ¯ä¸ªæ•°æ®çš„å±€éƒ¨åæ ‡ç³»åˆ°æ•°æ®é›†å…¨å±€åæ ‡ç³»çš„è½¬æ¢æ˜¯é€šè¿‡å¯¹æ•°æ®é›†è‡ªä¸Šè€Œä¸‹çš„éå†ï¼Œå°†å­transform å’Œçˆ¶transform è¿›è¡Œåä¹˜ï¼ˆpost-multiplyingï¼‰è¿ç®—å¾—åˆ°çš„ï¼ˆä¾‹å¦‚è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„ä¼ ç»Ÿåœºæ™¯å›¾æˆ–èŠ‚ç‚¹å±‚æ¬¡ç»“æ„ï¼‰ã€‚ glTF å˜æ¢ï¼ˆglTF transformsï¼‰æ‰¹å¤„ç† 3D æ¨¡å‹ï¼ˆBatched 3D Modelï¼‰å’Œå®ä¾‹ 3D æ¨¡å‹ï¼ˆInstanced 3D Modelï¼‰ æ•°æ®åµŒå…¥åœ¨ glTF ä¸­ï¼ŒglTF æœ‰å…¶è‡ªå·±çš„èŠ‚ç‚¹å±‚æ¬¡ç»“æ„ï¼Œå¹¶ä½¿ç”¨ y è½´æœä¸Šçš„åæ ‡ç³»ã€‚æ‰€æœ‰æŒ‡å®šäºæ•°æ®ï¼ˆa tile formatï¼‰å’Œtile.transformå±æ€§çš„è½¬æ¢éƒ½ä¼šè¢«åº”ç”¨ã€‚ glTF èŠ‚ç‚¹å±‚æ¬¡ç»“æ„ï¼ˆglTF node hierarchyï¼‰ é¦–å…ˆï¼Œæ ¹æ®glTF è§„èŒƒåº”ç”¨ glTF èŠ‚ç‚¹å±‚æ¬¡ç»“æ„è½¬æ¢ã€‚ y è½´å‘ä¸Šåˆ° z è½´å‘ä¸Š æ¥ä¸‹æ¥ï¼Œä¸ºäº†ä¸ 3D Tiles åæ ‡ç³»çš„ z è½´ä¿æŒä¸€è‡´ï¼Œå¿…é¡»åœ¨è¿è¡Œæ—¶å°† glTF ä» y è½´æœä¸Šè½¬æ¢ä¸º z è½´æœä¸Šã€‚è¿™æ˜¯é€šè¿‡å°†æ¨¡å‹ç»• x è½´æ—‹è½¬ Ï€/ 2 å¼§åº¦æ¥å®Œæˆçš„ã€‚ç­‰æ•ˆåœ°ï¼Œåº”ç”¨ä»¥ä¸‹çŸ©é˜µå˜æ¢ï¼ˆæ­¤å¤„ä¸ºè¡Œä¼˜å…ˆé¡ºåºï¼‰ï¼š [ 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0 ] æ€»çš„æ¥è¯´ï¼Œå˜æ¢çš„é¡ºåºä¸ºï¼š glTF èŠ‚ç‚¹å±‚æ¬¡ç»“æ„ï¼ˆglTF node hierarchyï¼‰ y è½´å‘ä¸Šåˆ° z è½´å‘ä¸Š ä»»ä½•æ•°æ®ç±»å‹ç‰¹å®šçš„å˜æ¢ã€‚ æ‰¹å¤„ç† 3D æ¨¡å‹è¦ç´ è¡¨å¯ä»¥å®šä¹‰RTC_CENTERç”¨äºè½¬æ¢æ¨¡å‹çš„é¡¶ç‚¹ã€‚ å®ä¾‹åŒ– 3D æ¨¡å‹è¦ç´ è¡¨å®šä¹‰äº†æ¯ä¸ªå®ä¾‹çš„ä½ç½®ï¼Œæ³•çº¿å’Œæ¯”ä¾‹ã€‚ç”¨äºåˆ›å»ºæŒ‰å®ä¾‹çš„ 4x4 ä»¿å°„å˜æ¢çŸ©é˜µï¼Œæ¥åº”ç”¨äºæ¯ä¸ªå®ä¾‹ã€‚ ç“¦ç‰‡å˜æ¢ å®ç°è¯´æ˜ï¼šä½¿ç”¨å›ºå®šçš„ z è½´å‘ä¸Šçš„æºæ•°æ®ï¼Œä¾‹å¦‚ WGS 84 åæ ‡æˆ– z è½´å‘ä¸Šè‡ªå®šä¹‰åæ ‡ç³»ä¸­çš„æ•°æ®æºæ—¶ï¼Œå¸¸è§çš„å·¥ä½œæµç¨‹æ˜¯ï¼šåŒ…æ‹¬ä½ç½®å’Œæ³•çº¿çš„è¡¨é¢æ•°æ®ï¼ˆMesh dataï¼‰ä¸åšä¿®æ”¹ï¼Œä»ä¿æŒ z å‘ä¸Šã€‚æ ¹èŠ‚ç‚¹çŸ©é˜µæŒ‡å®šäº†åˆ—ä¼˜å…ˆçš„ä»åˆ° z è½´å‘ä¸Šåˆ° y è½´å‘ä¸Šçš„å˜æ¢ã€‚y è½´å‘ä¸Šçš„ glTF åæ ‡ç³»è¦æ±‚ä½¿ç”¨æ­¤ç±»å˜åŒ–ã€‚åœ¨è¿è¡Œæ—¶ï¼ŒglTF è¢«ä¸Šé¢çš„å˜æ¢è½¬å›ã€‚è½¬æ¢æŠµæ¶ˆäº†ã€‚ï¼ˆAt runtime the glTF is transformed back from y-up to z-up with the matrix above. Effectively the transforms cancel out.ï¼‰glTF æ ¹èŠ‚ç‚¹ç¤ºä¾‹ï¼š \"nodes\": [ { \"matrix\": [1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1], \"mesh\": 0, \"name\": \"rootNode\" } ] å®ä¾‹ä¸ºæ•°æ®é›†è®¡ç®—å˜æ¢çš„ä¾‹å­ï¼š æ¯ä¸ª Tile çš„å˜æ¢ä¸ºï¼š TO: [T0] T1: [T0][T1] T2: [T0][T2] T3: [T0][T1][T3] T4: [T0][T1][T4] åœ¨å˜æ¢ä¹‹å‰ï¼Œ Tile å†…å®¹ä¸­çš„ä½ç½®å’Œæ³•çº¿ä¹Ÿå¯ä»¥æœ‰ Tile æŒ‡å®šçš„è½¬æ¢æ¥åº”ç”¨ï¼Œï¼ˆä¹‹å‰è¡¨ç¤ºåº”ç”¨ä»¿å°„å˜æ¢ä¹‹å‰ï¼‰ã€‚ä¾‹ï¼š b3dmå’Œi3dmåµŒå…¥ glTFï¼ŒglTF å®šä¹‰äº†è‡ªå·±çš„èŠ‚ç‚¹å±‚æ¬¡ç»“æ„å’Œåæ ‡ç³»ã€‚tile.transformåœ¨è¿™äº›å˜æ¢ä¹‹åæ‰§è¡Œã€‚ i3dmçš„è¦ç´ è¡¨å®šä¹‰äº†æ¯ä¸ªå®ä¾‹çš„ä½ç½®ï¼Œæ³•çº¿å’Œæ¯”ä¾‹ã€‚ç”¨äºæ¯ä¸ªå®ä¾‹æŒ‰ç…§ 4x4 ä»¿å°„å˜æ¢çŸ©é˜µåˆ›å»ºï¼Œè¿™äº›å˜æ¢åœ¨tile.transformä¹‹å‰ã€‚ å‹ç¼©çš„å±æ€§ï¼Œå¦‚i3dmå’Œpntsè¦ç´ è¡¨ä¸­çš„POSITION_QUANTIZEDï¼Œpntsä¸­çš„NORMAL_OCT16Pä¼šåœ¨åº”ç”¨ä»»ä½•å…¶ä»–å˜æ¢ä¹‹å‰è¢«è§£å‹ç¼©ã€‚ å› æ­¤ï¼Œä»¥ä¸Šç¤ºä¾‹çš„å®Œæ•´è®¡ç®—è½¬æ¢ä¸ºï¼š TO: [T0] T1: [T0][T1] T2: [T0][T2][pnts-specific transform, including RTC_CENTER (if defined)] T3: [T0][T1][T3][b3dm-specific transform, including RTC_CENTER (if defined), coordinate system transform, and glTF node hierarchy] T4: [T0][T1][T4][i3dm-specific transform, including per-instance transform, coordinate system transform, and glTF node hierarchy] ç“¦ç‰‡ JSONç“¦ç‰‡ JSON å¯¹è±¡ç”±ä»¥ä¸‹å±æ€§ç»„æˆã€‚ ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªéå¶å­ç“¦ç‰‡ã€‚ { \"boundingVolume\": { \"region\": [ -1.2419052957251926, 0.7395016240301894, -1.2415404171917719, 0.7396563300150859, 0, 20.4 ] }, \"geometricError\": 43.88464075650763, \"refine\" : \"ADD\", \"content\": { \"boundingVolume\": { \"region\": [ -1.2418882438584018, 0.7395016240301894, -1.2415422846940714, 0.7396461198389616, 0, 19.4 ] }, \"uri\": \"2/0/0.b3dm\" }, \"children\": [...] } boundingVolumeå®šä¹‰ç“¦ç‰‡çš„å°é—­ä½“ï¼Œå¹¶ä¸”è¢«ç”¨æ¥ç¡®å®šå“ªäº›ç“¦ç‰‡åœ¨è¿è¡Œæ—¶è¿›è¡Œæ¸²æŸ“ã€‚ä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨ä¸€ä¸ªregionè¾¹ç•Œä½“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–è¾¹ç•Œä½“ï¼Œä¾‹å¦‚boxæˆ–sphereã€‚ geometricErrorå±æ€§æ˜¯ä¸€ä¸ªéè´Ÿæ•°ï¼Œç”¨äºå®šä¹‰è¯¯å·®ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ï¼Œç”¨æ¥å†³å®šæ¸²æŸ“æ­¤ç“¦ç‰‡ä½†ä¸æ¸²æŸ“å…¶å­ç“¦ç‰‡ã€‚åœ¨è¿è¡Œæ—¶ï¼Œå‡ ä½•è¯¯å·®ç”¨äºè®¡ç®—å±å¹•ç©ºé—´è¯¯å·®ï¼ˆSSEï¼‰ï¼Œå³ä»¥åƒç´ ä¸ºå•ä½çš„è¯¯å·®ã€‚SSE ç¡®å®šæŸä¸ªç“¦ç‰‡æ˜¯å¦å¯¹äºå½“å‰è§†å›¾è¶³å¤Ÿè¯¦ç»†ï¼Œæˆ–è€…æ˜¯å¦åº”è€ƒè™‘æ¸²æŸ“å…¶å­è§†å›¾ã€‚è¯¦è§å‡ ä½•è¯¯å·®ã€‚ å¯é€‰viewerRequestVolumeå±æ€§ï¼ˆä¸Šé¢æœªæ˜¾ç¤ºï¼‰ä½¿ç”¨ä¸boundingVolumeé…ç½®å‚æ•°ï¼Œåœ¨æ‰§è¡Œç“¦ç‰‡å†…å®¹çš„è¯·æ±‚å‰ï¼Œè§‚å¯Ÿè€…ä½äºviewerRequestVolumeå†…ï¼Œå¹¶ä¸”viewerRequestVolumeä¼˜å…ˆäºgeometricErrorã€‚è¯¦è§è§‚å¯Ÿè¯·æ±‚ç›’/ä½“ã€‚ refine å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨\"REPLACE\"æˆ–\"ADD\"ã€‚æ•°æ®é›†ï¼ˆtilesetï¼‰çš„æ ¹å›¾å—éœ€è¦è®¾ç½®ï¼›å¯¹äºå…¶ä»–ç“¦ç‰‡ï¼Œå®ƒæ˜¯å¯é€‰çš„ã€‚æ•°æ®é›†å¯ä»¥ä½¿ç”¨æ·»åŠ å’Œæ›¿æ¢çš„ä»»æ„ç»„åˆã€‚refine çœç•¥è¯¥å±æ€§æ—¶ï¼Œä»çˆ¶ç“¦ç‰‡ç»§æ‰¿çš„ã€‚è¯¦è§ç»†åŒ–/ä¼˜åŒ–ã€‚ content å±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³ç“¦ç‰‡æ¸²æŸ“å†…å®¹çš„å…ƒæ•°æ®ã€‚ content.uri æ˜¯ä¸€ä¸ª uriï¼ŒæŒ‡å‘ç“¦ç‰‡çš„äºŒè¿›åˆ¶å†…å®¹ï¼ˆè§„èŒƒçš„æ–‡ä»¶ç±»å‹ï¼‰ï¼Œæˆ–å¦ä¸€ä¸ªæ•°æ®é›† JSON ä»¥åˆ›å»ºæ•°æ®é›†(tileset)çš„æ•°æ®é›†(tileset)ï¼ˆå¤–éƒ¨æ•°æ®é›†ï¼‰ã€‚ content.uriä¸­çš„æ–‡ä»¶æ‰©å±•åä¸æ˜¯å¿…é¡»çš„ã€‚ç“¦ç‰‡å†…å®¹æ ¼å¼ç”±æ–‡ä»¶å¤´ä¸­çš„magicå­—æ®µæŒ‡å®šï¼Œæˆ–è€…ä¸º JSONï¼Œå°†å…¶æŒ‡å®šä¸ºå¤–éƒ¨æ•°æ®é›†ã€‚ content.boundingVolumeå±æ€§å®šä¹‰ä¸€ä¸ªå¯é€‰çš„è¾¹ç•Œä½“ï¼Œç±»ä¼¼äºé¡¶çº§çš„boundingVolumeå±æ€§ã€‚ä½†æ˜¯ä¸é¡¶çº§boundingVolumeå±æ€§ä¸åŒï¼Œcontent.boundingVolumeæ˜¯ä¸€ä¸ªåŒ…è£¹ç“¦ç‰‡å†…å®¹çš„ç´§å¯†å°é—­çš„åŒ…å›´ä½“ã€‚boundingVolumeæä¾›ç©ºé—´è¿ç»­æ€§ï¼Œcontent.boundingVolumeå®ç°ä¸¥æ ¼åœ°è§†å›¾è§†é”¥å‰”é™¤ï¼ˆview frustum cullingï¼‰ï¼Œæ’é™¤å¯èƒ½ä¸åœ¨è§†åŸŸèŒƒå›´å†…çš„å†…å®¹ã€‚å¦‚æœæœªå®šä¹‰ï¼Œåˆ™ç“¦ç‰‡çš„è¾¹ç•Œä½“ä»ç”¨äºå‰”é™¤ï¼ˆè¯·å‚è§ç½‘æ ¼ï¼‰ã€‚ ä¸‹é¢çš„æˆªå›¾æ˜¾ç¤ºäº† Canary Wharf çš„æ ¹å›¾å—çš„è¾¹ç•Œä½“ç§¯ã€‚ boundingVolume ä»¥çº¢è‰²æ˜¾ç¤ºï¼Œå°†æ•´ä¸ªåŒºåŸŸçš„æ•°æ®é›†åŒ…å›´èµ·æ¥ï¼›content.boundingVolume ä»¥è“è‰²æ˜¾ç¤ºï¼Œä»…å°†æ ¹å›¾å—ä¸­çš„å››ä¸ªè¦ç´ ï¼ˆæ¨¡å‹ï¼‰å°é—­èµ·æ¥ã€‚ å¯é€‰çš„ transform å±æ€§ï¼ˆä¸Šé¢åˆ—å‡ºï¼‰å®šä¹‰ 4Ã—4 çš„ä»¿å°„å˜æ¢çŸ©é˜µï¼Œè¯¥çŸ©é˜µå˜æ¢ç“¦ç‰‡çš„ contentï¼ŒboundingVolume å’Œ viewerRequestVolumeã€‚ childrenå±æ€§æ˜¯å®šä¹‰ä¸€ç»„å­ç“¦ç‰‡çš„å¯¹è±¡æ•°ç»„ã€‚æ¯ä¸ªå­ç“¦ç‰‡çš„å†…å®¹éƒ½è¢«å…¶çˆ¶ç“¦ç‰‡çš„boundingVolume å®Œå…¨åŒ…å›´ï¼Œé€šå¸¸ geometricError å°äºå…¶çˆ¶çº§çš„ geometricErrorã€‚å¯¹äºå¶ç“¦ç‰‡ï¼Œæ­¤æ•°ç»„çš„é•¿åº¦ä¸ºé›¶ï¼Œchildren å¯ä»¥ä¸å®šä¹‰ã€‚è¯·å‚é˜…ä¸‹é¢çš„Tileset JSONéƒ¨åˆ†ã€‚ å®Œæ•´çš„ json å®šä¹‰ { \"$schema\": \"http://json-schema.org/draft-04/schema\", \"id\": \"tile.schema.json\", \"title\": \"Tile\", \"type\": \"object\", \"description\": \"A tile in a 3D Tiles tileset.\", \"properties\": { \"boundingVolume\": { \"description\": \"The bounding volume that encloses the tile.\", \"$ref\": \"boundingVolume.schema.json\" }, \"viewerRequestVolume\": { \"description\": \"Optional bounding volume that defines the volume the viewer must be inside of before the tile's content will be requested and before the tile will be refined based on geometricError.\", \"$ref\": \"boundingVolume.schema.json\" }, \"geometricError\": { \"type\": \"number\", \"description\": \"The error, in meters, introduced if this tile is rendered and its children are not. At runtime, the geometric error is used to compute screen space error (SSE), i.e., the error measured in pixels.\", \"minimum\": 0 }, \"refine\": { \"type\": \"string\", \"description\": \"Specifies if additive or replacement refinement is used when traversing the tileset for rendering. This property is required for the root tile of a tileset; it is optional for all other tiles. The default is to inherit from the parent tile.\", \"enum\": [\"ADD\", \"REPLACE\"] }, \"transform\": { \"type\": \"array\", \"description\": \"A floating-point 4x4 affine transformation matrix, stored in column-major order, that transforms the tile's content--i.e., its features as well as content.boundingVolume, boundingVolume, and viewerRequestVolume--from the tile's local coordinate system to the parent tile's coordinate system, or, in the case of a root tile, from the tile's local coordinate system to the tileset's coordinate system. transform does not apply to geometricError, nor does it apply any volume property when the volume is a region, defined in EPSG:4979 coordinates.\", \"items\": { \"type\": \"number\" }, \"minItems\": 16, \"maxItems\": 16, \"default\": [ 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0 ] }, \"content\": { \"description\": \"Metadata about the tile's content and a link to the content. When this is omitted the tile is just used for culling. This is required for leaf tiles.\", \"$ref\": \"tile.content.schema.json\" }, \"children\": { \"type\": \"array\", \"description\": \"An array of objects that define child tiles. Each child tile content is fully enclosed by its parent tile's bounding volume and, generally, has a geometricError less than its parent tile's geometricError. For leaf tiles, the length of this array is zero, and children may not be defined.\", \"items\": { \"$ref\": \"tile.schema.json\" }, \"uniqueItems\": true }, \"extensions\": { \"$ref\": \"extension.schema.json\" }, \"extras\": { \"$ref\": \"extras.schema.json\" } }, \"required\": [\"boundingVolume\", \"geometricError\"], \"additionalProperties\": false } Tileset JSON3D Tiles ä½¿ç”¨ä¸€ä¸ªä¸» tileset JSON æ–‡ä»¶ä½œä¸ºå®šä¹‰æ•°æ®é›†ï¼ˆTilesetï¼‰çš„å…¥å£ã€‚å…¥å£å’Œå¤–éƒ¨ tileset JSON æ–‡ä»¶éƒ½ä¸éœ€è¦éµå¾ªä»»ä½•å‘½åè§„åˆ™ã€‚ è¿™æ˜¯ä¸€ä¸ª tileset JSON çš„æ•°æ®é›† { \"asset\" : { \"version\": \"1.0\", \"tilesetVersion\": \"e575c6f1-a45b-420a-b172-6449fa6e0a59\", }, \"properties\": { \"Height\": { \"minimum\": 1, \"maximum\": 241.6 } }, \"geometricError\": 494.50961650991815, \"root\": { \"boundingVolume\": { \"region\": [ -0.0005682966577418737, 0.8987233516605286, 0.00011646582098558159, 0.8990603398325034, 0, 241.6 ] }, \"geometricError\": 268.37878244706053, \"refine\": \"ADD\", \"content\": { \"uri\": \"0/0/0.b3dm\", \"boundingVolume\": { \"region\": [ -0.0004001690908972599, 0.8988700116775743, 0.00010096729722787196, 0.8989625664878067, 0, 241.6 ] } }, \"children\": [..] } } Tilset JSON æœ‰å››ä¸ªé¡¶çº§å±æ€§ï¼šassetï¼Œpropertiesï¼ŒgeometricErrorï¼Œå’Œrootã€‚ asset æ˜¯ä¸€ä¸ªåŒ…å«æœ‰å…³æ•´ä¸ªæ•°æ®é›†çš„å…ƒæ•°æ®å¯¹è±¡ã€‚asset.version å±æ€§æ˜¯ä¸€ä¸ªå®šä¹‰ 3D Tiles ç‰ˆæœ¬çš„å­—ç¬¦ä¸²ï¼ŒæŒ‡å®š tilset çš„ JSON æ¨¡å¼å’ŒåŸºæœ¬çš„ tile æ ¼å¼ã€‚ tilesetVersion å±æ€§æ˜¯ä¸€ä¸ªå¯é€‰å­—ç¬¦ä¸²ï¼Œç”¨äºå®šä¹‰ç‰¹å®šåº”ç”¨ç¨‹åºçš„ tileset ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼Œè¡¨ç¤º tilset æ˜¯å¦è¢«æ›´æ–°ã€‚ properties æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ•°æ®é›†ä¸­æ¯ä¸ªè¦ç´ å±æ€§ã€‚è¿™ä¸ª tileet JSON ä»£ç æ®µé€‚ç”¨äº 3D å»ºç­‘ç‰©ï¼Œå› æ­¤æ¯ä¸ªç“¦ç‰‡å‡å…·æœ‰å»ºç­‘ç‰©æ¨¡å‹ï¼Œå¹¶ä¸”æ¯ä¸ªå»ºç­‘ç‰©æ¨¡å‹å‡å…·æœ‰ Height å±æ€§ï¼ˆè¯¦è§æ‰¹å¤„ç†è¡¨(Batch Table)ï¼‰ã€‚propertiesä¸­çš„åç§°ä¸æ¯ä¸ªè¦ç´ çš„å±æ€§åç§°åŒ¹é…ï¼Œå…¶å®šä¹‰ minimum å’Œ maximum çš„æ•°å­—å€¼ï¼Œè¿™äº›å€¼å¯¹äºåˆ›å»ºæ ·å¼è‰²å¸¦éå¸¸æœ‰ç”¨ã€‚ geometricError æ˜¯ä¸€ä¸ªéè´Ÿæ•°ï¼Œç”¨äºå®šä¹‰è¯¯å·®ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ï¼Œè¯¥å€¼ç¡®å®šæ˜¯å¦æ¸²æŸ“å›¾å—ã€‚åœ¨è¿è¡Œæ—¶ï¼Œå‡ ä½•è¯¯å·®ç”¨äºè®¡ç®—å±å¹•ç©ºé—´è¯¯å·®ï¼ˆSSEï¼‰ï¼Œå³ä»¥åƒç´ ä¸ºå•ä½çš„è¯¯å·®ã€‚å¦‚æœ SSE ä¸è¶…è¿‡æ‰€éœ€çš„æœ€å°å€¼ï¼Œåˆ™ä¸ä¼šæ¸²æŸ“æ•°æ®é›†ï¼Œå¹¶ä¸”ä¸ä¼šå¯¹å…¶ç“¦ç‰‡è¿›è¡Œæ¸²æŸ“ã€‚è¯¦è§å‡ ä½•è¯¯å·®ï¼ˆGeometric errorï¼‰ã€‚ root æ˜¯ä¸€ä¸ªä½¿ç”¨ä¸Šä¸€èŠ‚ä¸­æè¿°çš„ç“¦ç‰‡ JSON å®šä¹‰æ ¹å›¾å—çš„å¯¹è±¡ã€‚root.geometricErrorä¸ tilset é¡¶çº§çš„geometricErrorä¸åŒã€‚geometricErroråœ¨è¿è¡Œæ—¶æ ¹æ® SSE å†³å®šæ ¹ç“¦ç‰‡æ˜¯å¦æ¸²æŸ“;root.geometricErroråœ¨è¿è¡Œæ—¶æ ¹æ® SSE å†³å®šæ ¹ç“¦ç‰‡çš„å­é›†æ˜¯å¦æ¸²æŸ“ã€‚ å¤–éƒ¨æ•°æ®é›†ï¼ˆExternal tilesetsï¼‰åˆ›å»ºæ ‘çš„å­èŠ‚ç‚¹ï¼Œæ•°æ®çš„content.uriå¯ä»¥æŒ‡å‘ä¸€ä¸ªå¤–éƒ¨æ•°æ®é›†ï¼ˆå¦ä¸€ä¸ª æ•°æ®é›† JSON æ–‡ä»¶çš„ uriï¼‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ¯ä¸ªåŸå¸‚å­˜å‚¨åœ¨ä¸€ä¸ªæ•°æ®é›†ä¸­ï¼Œç„¶åç»„æˆä¸€ä¸ªå…¨çƒæ•°æ®é›†ã€‚ å½“ç“¦ç‰‡æŒ‡å‘å¤–éƒ¨æ•°æ®é›†æ—¶ï¼Œç“¦ç‰‡ï¼š ä¸èƒ½æœ‰å­çº§ï¼›tile.children å¿…é¡»ä¸º undefined æˆ–ç©ºæ•°ç»„ã€‚ ä¸èƒ½æœ‰å¾ªç¯ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡æŒ‡å‘åŒ…å«è¯¥å›¾å—çš„åŒä¸€å›¾å—æ–‡ä»¶æˆ–æŒ‡å‘å¦ä¸€ä¸ªå›¾å—é›†æ–‡ä»¶ï¼Œç„¶åå†æŒ‡å‘åŒ…å«è¯¥å›¾å—çš„åˆå§‹æ–‡ä»¶ï¼Œæ¥åˆ›å»ºå¾ªç¯ã€‚ ä¼šåŒæ—¶é€šè¿‡ç“¦ç‰‡çš„ transform å’Œæ ¹ç“¦ç‰‡çš„transformè¿›è¡Œå˜æ¢ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„æ•°æ®é›†å¼•ç”¨å¤–éƒ¨æ•°æ®é›†ï¼ŒT3 è®¡ç®—å˜æ¢ä¸º [T0][T1][T2][T3]ã€‚ è¾¹ç•Œä½“ç©ºé—´è¿ç»­æ€§ï¼ˆBounding volume spatial coherenceï¼‰å¦‚ä¸Šæ‰€è¿°ï¼Œæ ‘å…·æœ‰ç©ºé—´è¿è´¯æ€§ã€‚æ¯ä¸ªç“¦ç‰‡éƒ½æœ‰ä¸€ä¸ªå®Œå…¨åŒ…å›´å…¶å†…å®¹çš„è¾¹ç•Œä½“ï¼Œå­ç“¦ç‰‡çš„å†…å®¹å®Œå…¨ä½äºçˆ¶çº§çš„è¾¹ç•Œä½“ä¹‹å†…ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€å­çº§çš„è¾¹ç•Œä½“å®Œå…¨åœ¨å…¶çˆ¶çº§çš„è¾¹ç•Œä½“ä¹‹å†…ã€‚ä¾‹å¦‚ï¼š ç©ºé—´æ•°æ®ç»“æ„ï¼ˆSpatial data structuresï¼‰3D Tiles ç»“åˆäº†è¯¦ç»†å±‚æ¬¡ç»“æ„ï¼ˆHLODï¼‰çš„æ¦‚å¿µï¼Œä»¥å®ç°ç©ºé—´æ•°æ®çš„æœ€ä½³å‘ˆç°ã€‚æ•°æ®é›†ç”±æ ‘ç»“æ„ç»„æˆï¼Œç”±rootå®šä¹‰ï¼Œå¹¶é€’å½’å…¶childrenç“¦ç‰‡ç»„æˆï¼Œå¹¶å¯ä»¥æŒ‰ä¸åŒç±»å‹çš„ç©ºé—´æ•°æ®ç»“æ„è¿›è¡Œç»„ç»‡ã€‚ è¿è¡Œæ—¶å¼•æ“æ˜¯é€šç”¨çš„ï¼Œå¯ä»¥æ¸²æŸ“ tilset å®šä¹‰çš„ä»»ä½•æ ‘ã€‚ä»»æ„ç»„åˆçš„ç“¦ç‰‡æ ¼å¼å’Œä¼˜åŒ–ï¼ˆrefinementï¼‰æ–¹æ³•ç»„åˆéƒ½å¯ä»¥ä½¿ç”¨ï¼Œä»è€Œå¯ä»¥çµæ´»åœ°æ”¯æŒå¼‚æ„æ•°æ®é›†ã€‚è¯¦è§ç»†åŒ–/ä¼˜åŒ–ï¼ˆRefinementï¼‰ã€‚ æ•°æ®é›†å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºæ …æ ¼å’ŒçŸ¢é‡åˆ‡ç‰‡æ–¹æ¡ˆçš„ 2D ç©ºé—´åˆ‡ç‰‡æ–¹æ¡ˆï¼ˆä¾‹å¦‚ Web åœ°å›¾åˆ‡ç‰‡æœåŠ¡ï¼ˆWMTSï¼‰æˆ– XYZ æ–¹æ¡ˆï¼‰ï¼Œè¯¥äºŒç»´ç©ºé—´åˆ‡ç‰‡æ–¹æ¡ˆä»¥å¤šçº§åˆ«ï¼ˆLODï¼‰ï¼ˆæˆ–ç¼©æ”¾çº§åˆ«ï¼‰æä¾›é¢„å®šä¹‰çš„åˆ‡ç‰‡ã€‚ä½†æ˜¯ï¼Œç”±äºæ•°æ®é›†çš„å†…å®¹é€šå¸¸æ˜¯ä¸ä¸€è‡´çš„ï¼Œæˆ–è€…å¯èƒ½ä¸å®¹æ˜“ä»…åœ¨äºŒç»´ä¸Šç»„ç»‡ï¼Œå› æ­¤å…¶ä»–ç©ºé—´æ•°æ®ç»“æ„å¯èƒ½æ›´ç†æƒ³ã€‚ ä¸‹é¢åŒ…æ‹¬å¯¹ 3D Tiles å¦‚ä½•è¡¨ç¤ºå„ç§ç©ºé—´æ•°æ®ç»“æ„çš„ç®€è¦è¯´æ˜ã€‚ å››å‰æ ‘ï¼ˆQuadtreesï¼‰å½“æ¯ä¸ªç“¦ç‰‡å…·æœ‰å››ä¸ªç»Ÿä¸€ç»†åˆ†çš„å­çº§ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ä¸­å¿ƒçº¬åº¦å’Œç»åº¦ï¼‰æ—¶ï¼Œå°†åˆ›å»ºä¸€ä¸ªå››å‰æ ‘ï¼Œç±»ä¼¼äºå…¸å‹çš„ 2D åœ°ç†ç©ºé—´åˆ‡ç‰‡æ–¹æ¡ˆã€‚ç©ºçš„å­å›¾å—å¯ä»¥çœç•¥ã€‚ 3D Tiles å¯ä»¥ä½¿ç”¨å››å‰æ ‘å˜ä½“ï¼Œä¾‹å¦‚éå‡åŒ€ç»†åˆ†å’Œéç´§å¯†çš„è¾¹ç•Œä½“ï¼ˆä¾‹å¦‚ï¼Œä¸è¾¹ç•Œä¸åŒï¼Œå¯¹ç¨€ç–æ•°æ®é›†æ¥è¯´ï¼Œçˆ¶çº§çš„ 25ï¼…æ˜¯æµªè´¹çš„ï¼‰ã€‚ 3D Tiles è¿˜æ”¯æŒå…¶ä»–å››å‰æ ‘å˜å½¢ï¼Œä¾‹å¦‚æ¾æ•£å››å‰æ ‘ï¼Œå…¶ä¸­å­ç“¦ç‰‡ç›¸äº’é‡å ï¼Œä½†ä»ä¿æŒç©ºé—´è¿è´¯æ€§ï¼Œå³ï¼Œçˆ¶ç“¦ç‰‡å®Œå…¨åŒ…å›´äº†å…¶æ‰€æœ‰å­çº§ã€‚è¿™ç§æ–¹æ³•å¯¹äºé¿å…åœ¨ç“¦ç‰‡ä¹‹é—´åˆ†å‰²è¦ç´ ï¼ˆä¾‹å¦‚ 3D æ¨¡å‹ï¼‰å¾ˆæœ‰ç”¨ã€‚ K-d æ ‘ï¼ˆK-d treesï¼ŒK ç»´æ ‘ï¼‰å½“ç“¦ç‰‡å…·æœ‰ä¸¤ä¸ªç”±å¹³è¡Œäº xï¼Œy æˆ– z è½´ï¼ˆæˆ–çº¬åº¦ï¼Œç»åº¦ï¼Œé«˜åº¦ï¼‰çš„åˆ†å‰²é¢åˆ†éš”çš„å­ä»£æ—¶ï¼Œä¼šåˆ›å»º kd æ ‘ã€‚éšç€æ ‘çº§åˆ«çš„é€’å¢ï¼Œæ‹†åˆ†è½´é€šå¸¸æ˜¯å¾ªç¯æ—‹è½¬çš„ï¼ˆå¯ä»¥å‚è€ƒå¹³è¡¡ K-d æ ‘ç†è§£ï¼‰ï¼Œå¯ä»¥é€‰æ‹©ä¸­ä½æ•°ï¼Œè¡¨é¢ç§¯å¯å‘æ³•ï¼ˆsurface area heuristicsï¼‰æˆ–å…¶ä»–æ–¹æ³•æ¥é€‰æ‹©æ‹†åˆ†å¹³é¢ã€‚ æ³¨æ„ï¼Œk-d æ ‘ä¸åƒå…¸å‹çš„ 2D åœ°ç†ç©ºé—´åˆ‡ç‰‡æ–¹æ¡ˆé‚£æ ·å…·æœ‰ç»Ÿä¸€çš„å‡åŒ€ç»†åˆ†ï¼Œå› æ­¤å¯ä»¥ä¸ºç¨€ç–å’Œéå‡åŒ€åˆ†å¸ƒçš„æ•°æ®é›†åˆ›å»ºæ›´åŠ å¹³è¡¡çš„æ ‘ã€‚ 3D Tiles æ”¯æŒ k-d æ ‘å˜ä½“ï¼Œä¾‹å¦‚å¤šè·¯ kd æ ‘ï¼Œå…¶ä¸­æ ‘çš„æ¯ä¸ªå¶å­ä¸Šæœ‰å¤šä¸ªæ‹†åˆ†è½´ã€‚è¿™æ ·å°±æœ‰nä¸ªå­çº§ï¼Œè€Œä¸æ˜¯æ¯ä¸ªç“¦ç‰‡æœ‰ä¸¤ä¸ªã€‚ å…«å‰æ ‘ï¼ˆOctreesï¼‰å…«å‰æ ‘é€šè¿‡æ‰©å±•å››å‰æ ‘ä½¿ç”¨ä¸‰ä¸ªæ­£äº¤æ‹†åˆ†å¹³é¢å°†å›¾å—ç»†åˆ†ä¸ºå…«ä¸ªå­çº§ã€‚åƒå››å‰æ ‘ä¸€æ ·ï¼Œ3D Tiles å…è®¸å¯¹å…«å‰æ ‘å˜ä½“ï¼Œä¾‹å¦‚ä¸å‡åŒ€çš„ç»†åˆ†ï¼Œéç´§å¯†çš„è¾¹ç•Œä½“å’Œé‡å çš„å­ä»£ã€‚ ç½‘æ ¼ï¼ˆGridsï¼‰3D Tiles é€šè¿‡æ”¯æŒä»»æ„æ•°é‡çš„å­ç“¦ç‰‡æ¥å®ç°å‡åŒ€ï¼Œä¸å‡åŒ€å’Œé‡å çš„ç½‘æ ¼ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯å‰‘æ¡¥çš„ä¸å‡åŒ€é‡å ç½‘æ ¼çš„ä¿¯è§†å›¾ï¼š 3D Tiles åˆ©ç”¨äº†ç©ºç“¦ç‰‡ï¼šé‚£äº›å…·æœ‰è¾¹ç•Œä½“ä½†æ²¡æœ‰å†…å®¹çš„ç“¦ç‰‡ã€‚ç”±äºç“¦ç‰‡çš„contentä¸å¿…é¡»è¦è¢«å®šä¹‰çš„å±æ€§ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç©ºçš„éå¶å­èŠ‚ç‚¹çš„ç“¦ç‰‡æ¥åˆ†å±‚å‰”é™¤ï¼Œä»¥åŠ é€Ÿéå‡åŒ€ç½‘æ ¼ã€‚æœ¬è´¨ä¸Šï¼Œè¿™ä¼šåˆ›å»ºä¸€ä¸ªå››å‰æ ‘æˆ–å…«å‰æ ‘ï¼Œè€Œæ²¡æœ‰å±‚æ¬¡çš„è¯¦ç»†ä¿¡æ¯ï¼ˆHLODï¼‰ã€‚ æ‰©å±•å’Œé™„åŠ åŠŸèƒ½ï¼ˆSpecifying extensions and application specific extrasï¼‰3D Tiles å®šä¹‰äº†æ‰©å±•ï¼Œä»¥å…è®¸æ–°åŠŸèƒ½æ‰©å±•åŸºæœ¬è§„èŒƒï¼ŒåŒ…æ‹¬é™„åŠ åº”ç”¨ç¨‹åºç‰¹å®šå…ƒæ•°æ®ã€‚ æ‰©å±•æ‰©å±•å…è®¸ä½¿ç”¨æ–°åŠŸèƒ½æ‰©å±•åŸºæœ¬è§„èŒƒã€‚å¯ä»¥å°†å¯é€‰çš„ extensions å­—å…¸å±æ€§æ·»åŠ åˆ°ä»»ä½• 3D Tiles JSON å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æ‰©å±•åå’Œæ‰©å±•ç‰¹å®šçš„å¯¹è±¡ã€‚ { \"transform\": [ 4.843178171884396, 1.2424271388626869, 0, 0, -0.7993325488216595, 3.1159251367235608, 3.8278032889280675, 0, 0.9511533376784163, -3.7077466670407433, 3.2168186118075526, 0, 1215001.7612985559, -4736269.697480114, 4081650.708604793, 1 ], \"boundingVolume\": { \"box\": [0, 0, 6.701, 3.738, 0, 0, 0, 3.72, 0, 0, 0, 13.402] }, \"geometricError\": 32, \"content\": { \"uri\": \"building.b3dm\" }, \"extensions\": { \"VENDOR_collision_volume\": { \"box\": [0, 0, 6.8, 3.8, 0, 0, 0, 3.8, 0, 0, 0, 13.5] } } } æ•°æ®é›†æˆ–å­çº§çš„å¤–éƒ¨æ•°æ®é›†ä¸­ä½¿ç”¨çš„æ‰€æœ‰æ‰©å±•ï¼Œéƒ½å¿…é¡»åœ¨å…¥å£ tileset JSON çš„é¡¶çº§extensionsUsedæ•°ç»„å±æ€§ä¸­åˆ—å‡ºï¼Œä¾‹å¦‚ï¼š { \"extensionsUsed\": [\"VENDOR_collision_volume\"] } æ‰€æœ‰æ‰©å±•ä¸­ï¼Œéœ€è¦åŠ è½½å’Œæ¸²æŸ“æ•°æ®é›†æˆ–å­çº§çš„å¤–éƒ¨æ•°æ®é›†æ—¶ï¼Œä¹Ÿå¿…é¡»åœ¨å…¥å£ tileset JSON çš„é¡¶çº§extensionsRequiredæ•°ç»„å±æ€§ä¸­åˆ—å‡ºï¼ŒextensionsRequiredæ•°ç»„æ˜¯extensionsUsedæ•°ç»„çš„å­çº§ã€‚extensionsRequiredä¸­åˆ—å‡ºçš„å€¼åœ¨extensionsUsedä¸­ä¹Ÿå¿…é¡»å­˜åœ¨ã€‚ é™„åŠ åŠŸèƒ½extraså±æ€§å…è®¸å°†ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„å…ƒæ•°æ®æ·»åŠ åˆ°ä»»ä½• 3D Tiles JSON å¯¹è±¡ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªå…·æœ‰é™„åŠ åº”ç”¨ç¨‹åºç‰¹å®šåç§°å±æ€§çš„ tile å¯¹è±¡ã€‚ { \"transform\": [ 4.843178171884396, 1.2424271388626869, 0, 0, -0.7993325488216595, 3.1159251367235608, 3.8278032889280675, 0, 0.9511533376784163, -3.7077466670407433, 3.2168186118075526, 0, 1215001.7612985559, -4736269.697480114, 4081650.708604793, 1 ], \"boundingVolume\": { \"box\": [0, 0, 6.701, 3.738, 0, 0, 0, 3.72, 0, 0, 0, 13.402] }, \"geometricError\": 32, \"content\": { \"uri\": \"building.b3dm\" }, \"extras\": { \"name\": \"Empire State Building\" } } ç“¦ç‰‡æ ¼å¼è§„èŒƒæ¯ä¸ªç“¦ç‰‡çš„content.uriå±æ€§å¯ä»¥æ˜¯ uri äºŒè¿›åˆ¶ blobï¼Œå…¶ä¸­åŒ…å«ç”¨äºæ¸²æŸ“ç“¦ç‰‡çš„ 3D å†…å®¹çš„ä¿¡æ¯ã€‚å†…å®¹æ˜¯ä¸‹è¡¨ä¸­åˆ—å‡ºçš„ä¸€ç§æ ¼å¼çš„å®ä¾‹ã€‚ æ ¼å¼ ç”¨é€” æ‰¹å¤„ç† 3D æ¨¡å‹ (Batched 3D Model (b3dm)) å¼‚æ„ 3D æ¨¡å‹ã€‚ä¾‹å¦‚å¸¦çº¹ç†çš„åœ°å½¢å’Œè¡¨é¢ï¼Œ3D å»ºç­‘å¤–éƒ¨å’Œå†…éƒ¨ï¼Œå¤§å‹æ¨¡å‹ã€‚ å®ä¾‹ 3D æ¨¡å‹ (Instanced 3D Model (i3dm)) 3D æ¨¡å‹å®ä¾‹ã€‚ä¾‹å¦‚æ ‘æœ¨ï¼Œé£è½¦ï¼Œèºæ “ã€‚ ç‚¹äº‘ (Point Cloud (pnts)) å¤§é‡çš„ç‚¹ã€‚ å¤åˆå¯¹è±¡ (Composite (cmpt)) å°†ä¸åŒæ ¼å¼çš„å›¾å—åˆå¹¶ä¸ºä¸€ä¸ªå›¾å—ã€‚ tilset å¯ä»¥åŒ…å« tile æ ¼å¼çš„ä»»æ„ç»„åˆã€‚3D Tiles è¿˜æ”¯æŒä¸åŒæ ¼å¼åœ¨ä¸€ä¸ª Composite ç“¦ç‰‡ä¸­çš„ç»„åˆã€‚ å£°æ˜å¼æ ·å¼è§„èŒƒ3D Tiles åŒ…å«ä½¿ç”¨ JSON å®šä¹‰çš„ç®€æ´å£°æ˜å¼æ ·å¼ä»¥åŠç”¨ä¸€éƒ¨åˆ† JavaScript å¢å¼ºçš„æ ·å¼ç¼–å†™è¡¨è¾¾å¼ã€‚ æ ·å¼å®šä¹‰è¦ç´ å¦‚ä½•æ˜¾ç¤ºï¼Œä¾‹å¦‚ show å’Œ colorï¼ˆRGB å’Œé€æ˜åº¦ï¼‰ï¼Œåœ¨è¦ç´ å±æ€§ä¸Šä½¿ç”¨è¡¨è¾¾å¼ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å°†é«˜åº¦è¶…è¿‡ 90 çš„è¦ç´ æ¶‚ä¸ºçº¢è‰²ï¼Œå°†å…¶ä»–æ¶‚ä¸ºç™½è‰²ã€‚ { \"color\": \"(${Height} > 90) ? color('red') : color('white')\" } æ›´å¤šå†…å®¹ï¼Œè¯¦è§3D Tiles æ ·å¼è§„èŒƒã€‚ å±æ€§å‚è€ƒ Tileset Asset Bounding Volume Extension Extras Properties Tile Content Tilesetä¸€ä¸ª 3D Tiles æ•°æ®é›†ã€‚ å±æ€§ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» asset object æ•´ä¸ªæ•°æ®é›†çš„å…ƒæ•°æ® tileset. âœ… Yes properties any åŠŸèƒ½å±æ€§çš„å…ƒæ•°æ®å­—å…¸å¯¹è±¡ No geometricError number å†³å®šæ˜¯å¦æ¸²æŸ“æ­¤ç“¦ç‰‡çš„è¯¯å·®å€¼ï¼Œä»¥ç±³ä¸ºå•ä½ã€‚åœ¨è¿è¡Œæ—¶ï¼Œç”¨äºè®¡ç®—å±å¹•ç©ºé—´è¯¯å·®ï¼ˆSSEï¼‰ï¼Œä»¥åƒç´ ä¸ºå•ä½ âœ… Yes root object 3D Tiles æ•°æ®é›†ä¸­çš„ä¸€ä¸ªç“¦ç‰‡ âœ… Yes extensionsUsed string [1-*] åœ¨æ­¤æ•°æ®é›†ä¸­æŸå¤„ä½¿ç”¨çš„ 3D Tiles æ‰©å±•å No extensionsRequired string [1-*] éœ€è¦åŠ è½½çš„æ•°æ®é›†çš„ 3D Tiles æ‰©å±•å No extensions object å…·æœ‰æ‰©å±•åçš„ç‰¹å®šå¯¹è±¡çš„å­—å…¸å¯¹è±¡ No extras any é™„åŠ äºåº”ç”¨ç¨‹åºçš„æ•°æ® No ä¸å…è®¸ä½¿ç”¨å…¶ä»–å±æ€§ã€‚ Assetæ•´ä¸ªæ•°æ®é›†çš„å…ƒæ•°æ® å±æ€§ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» version string 3D Tiles ç‰ˆæœ¬ã€‚è¯¥ç‰ˆæœ¬å®šä¹‰äº†æ•°æ®é›† JSON çš„ JSON æ¨¡å¼å’Œç“¦ç‰‡æ ¼å¼çš„åŸºæœ¬é›†åˆ âœ… Yes tilesetVersion string æ­¤ç“¦ç‰‡çš„ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼Œç”¨äºæ›´æ–°ç°æœ‰ç“¦ç‰‡çš„æ ‡è¯† No extensions object å…·æœ‰æ‰©å±•çš„ç‰¹å®šå¯¹è±¡çš„å­—å…¸å¯¹è±¡ No extras any åº”ç”¨ç¨‹åºçš„é™„åŠ æ•°æ® No ä¸å…è®¸ä½¿ç”¨å…¶ä»–å±æ€§ã€‚ Bounding VolumeåŒ…å›´ç“¦ç‰‡æˆ–å…¶å†…å®¹çš„åŒ…å›´ç›’ã€‚æœ‰ä¸”éœ€è¦ä¸€ä¸ªboxï¼Œregionæˆ–sphereå±æ€§ã€‚ å±æ€§ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» box number [12] ç”± 12 ä¸ªæ•°å­—ç»„æˆçš„æ•°ç»„ï¼Œåœ¨å³æ‰‹ 3 è½´ï¼ˆxï¼Œyï¼Œzï¼‰ç¬›å¡å°”åæ ‡ç³»ä¸­å®šä¹‰çš„ä¸€ä¸ªæœ‰å‘åŒ…å›´ç›’ï¼Œå…¶ä¸­ z è½´æ˜¯ã€‚å‰ä¸‰ä¸ªå…ƒç´ å®šä¹‰æ¡†ä¸­å¿ƒçš„ xï¼Œy å’Œ z å€¼ã€‚æ¥ä¸‹æ¥çš„ä¸‰ä¸ªå…ƒç´ ï¼ˆç´¢å¼•ä¸º 3ã€4 å’Œ 5ï¼‰å®šä¹‰äº† x è½´æ–¹å‘å’Œä¸€åŠé•¿åº¦ï¼ˆhalf-lengthï¼‰ã€‚æ¥ä¸‹æ¥çš„ä¸‰ä¸ªå…ƒç´ ï¼ˆç´¢å¼• 6ã€7 å’Œ 8ï¼‰å®šä¹‰ y è½´æ–¹å‘å’Œä¸€åŠé•¿åº¦ï¼ˆhalf-lengthï¼‰ã€‚æœ€åä¸‰ä¸ªå…ƒç´ ï¼ˆç´¢å¼• 9ã€10 å’Œ 11ï¼‰å®šä¹‰ z è½´æ–¹å‘å’Œä¸€åŠé•¿åº¦ï¼ˆhalf-lengthï¼‰ No region number [6] ç”± 6 ä¸ªæ•°å­—ç»„æˆçš„æ•°ç»„ï¼Œå®šä¹‰äº†ç”±çº¬åº¦ï¼Œç»åº¦å’Œé«˜åº¦åæ ‡çš„åœ°ç†è¾¹ç•ŒåŒºï¼Œä½¿ç”¨[west, south, east, north, minimum height, maximum height]çš„é¡ºåºã€‚çº¬åº¦å’Œç»åº¦æ˜¯åœ¨ EPSG 4979 ä¸­å®šä¹‰çš„ WGS 84 åŸºå‡†ï¼Œä»¥å¼§åº¦è¡¨ç¤ºã€‚é«˜åº¦åœ¨ WGS 84 æ¤­çƒä¸Šæ–¹ï¼ˆæˆ–ä¸‹æ–¹ï¼‰ä»¥ç±³ä¸ºå•ä½ No sphere number [4] ç”± 4 ä¸ªæ•°å­—ç»„æˆçš„æ•°ç»„å®šä¹‰çš„è¾¹ç•Œçƒã€‚å‰ä¸‰ä¸ªå…ƒç´ åœ¨å³æ‰‹ 3 è½´ï¼ˆxï¼Œyï¼Œzï¼‰ç¬›å¡å°”åæ ‡ç³»ä¸­å®šä¹‰çƒä½“ä¸­å¿ƒçš„ xï¼Œy å’Œ z å€¼ï¼Œå…¶ä¸­ z è½´æœä¸Šã€‚æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆç´¢å¼•ä¸º 3ï¼‰ä»¥ç±³ä¸ºå•ä½å®šä¹‰åŠå¾„ No extensions object å…·æœ‰æ‰©å±•çš„ç‰¹å®šå¯¹è±¡çš„å­—å…¸å¯¹è±¡ No extras any åº”ç”¨ç¨‹åºçš„é™„åŠ æ•°æ® No ä¸å…è®¸ä½¿ç”¨å…¶ä»–å±æ€§ã€‚ Extensionå…·æœ‰æ‰©å±•çš„ç‰¹å®šå¯¹è±¡çš„å­—å…¸å¯¹è±¡ã€‚ å…è®¸å…¶ä»–å±æ€§ã€‚ å±æ€§ç±»å‹ï¼šobject Extrasåº”ç”¨ç¨‹åºçš„é™„åŠ æ•°æ®ã€‚ JSON æ ·å¼ï¼š { \"$schema\": \"http://json-schema.org/draft-04/schema\", \"title\": \"Extras\", \"description\": \"Application-specific data.\" } PropertiesåŠŸèƒ½å±æ€§çš„å…ƒæ•°æ®å­—å…¸å¯¹è±¡ã€‚ å±æ€§ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» maximum number æ•°æ®é›†ä¸­æ‰€æœ‰è¦ç´ æ­¤å±æ€§çš„æœ€å¤§å€¼ âœ… Yes minimum number æ•°æ®é›†ä¸­æ‰€æœ‰è¦ç´ æ­¤å±æ€§çš„æœ€å°å€¼ âœ… Yes extensions object å…·æœ‰æ‰©å±•çš„ç‰¹å®šå¯¹è±¡çš„å­—å…¸å¯¹è±¡ No extras any åº”ç”¨ç¨‹åºçš„é™„åŠ æ•°æ® No ä¸å…è®¸ä½¿ç”¨å…¶ä»–å±æ€§ã€‚ Tile3D Tiles æ•°æ®é›†ä¸­çš„ä¸€ä¸ªç“¦ç‰‡ã€‚ å±æ€§ï¼ˆä¸Šé¢æœ‰ä¸€ç« ä¸“é—¨è®²è¿™äº›å±æ€§ï¼Œå°±ä¸ç¿»è¯‘äº†ï¼‰ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» boundingVolume object A bounding volume that encloses a tile or its content. Exactly one box, region, or sphere property is required. âœ… Yes viewerRequestVolume object A bounding volume that encloses a tile or its content. Exactly one box, region, or sphere property is required. No geometricError number The error, in meters, introduced if this tile is rendered and its children are not. At runtime, the geometric error is used to compute screen space error (SSE), i.e., the error measured in pixels. âœ… Yes refine string Specifies if additive or replacement refinement is used when traversing the tileset for rendering. This property is required for the root tile of a tileset; it is optional for all other tiles. The default is to inherit from the parent tile. No transform number [16] A floating-point 4x4 affine transformation matrix, stored in column-major order, that transforms the tileâ€™s contentâ€“i.e., its features as well as content.boundingVolume, boundingVolume, and viewerRequestVolumeâ€“from the tileâ€™s local coordinate system to the parent tileâ€™s coordinate system, or, in the case of a root tile, from the tileâ€™s local coordinate system to the tilesetâ€™s coordinate system. transform does not apply to geometricError, nor does it apply any volume property when the volume is a region, defined in EPSG:4979 coordinates. No, default: [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1] content object Metadata about the tileâ€™s content and a link to the content. No children array[] An array of objects that define child tiles. Each child tile content is fully enclosed by its parent tileâ€™s bounding volume and, generally, has a geometricError less than its parent tileâ€™s geometricError. For leaf tiles, the length of this array is zero, and children may not be defined. No extensions object Dictionary object with extension-specific objects. No extras any Application-specific data. No Tile Contentæœ‰å…³ç“¦ç‰‡å†…å®¹å’Œè¯¥å†…å®¹é“¾æ¥çš„å…ƒæ•°æ®ã€‚ å±æ€§ ç±»å‹ æè¿° æ˜¯å¦å¿…é¡» boundingVolume object åŒ…å›´ç“¦ç‰‡æˆ–å…¶å†…å®¹çš„åŒ…å›´ç›’ã€‚æœ‰ä¸”éœ€è¦ä¸€ä¸ªboxï¼Œregionæˆ–sphereå±æ€§ No uri string æŒ‡å‘å›¾å—å†…å®¹çš„ uriã€‚å¦‚æœ uri æ˜¯ç›¸å¯¹çš„ï¼Œåˆ™å®ƒæ˜¯ç›¸å¯¹äºå¼•ç”¨çš„ tilset JSON æ–‡ä»¶ âœ… Yes extensions object å…·æœ‰æ‰©å±•çš„ç‰¹å®šå¯¹è±¡çš„å­—å…¸å¯¹è±¡ No extras any åº”ç”¨ç¨‹åºçš„é™„åŠ æ•°æ® No ä¸å…è®¸ä½¿ç”¨å…¶ä»–å±æ€§ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"Cesium+VueåŠ è½½å¤§å‹åœºæ™¯å’Œå¤§é‡3DTileæ•°æ®ç¤ºä¾‹","slug":"cesium-vue-big-model-example","date":"2021-02-03T08:05:29.000Z","updated":"2021-05-06T07:11:15.021Z","comments":true,"path":"2021/02/03/cesium-vue-big-model-example/","link":"","permalink":"https://tanghaojie.github.io/2021/02/03/cesium-vue-big-model-example/","excerpt":"","text":"ç‚¹å‡»è·³è½¬ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"vue","slug":"vue","permalink":"https://tanghaojie.github.io/categories/vue/"},{"name":"cesium","slug":"vue/cesium","permalink":"https://tanghaojie.github.io/categories/vue/cesium/"},{"name":"3D Tiles","slug":"vue/cesium/3D-Tiles","permalink":"https://tanghaojie.github.io/categories/vue/cesium/3D-Tiles/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://tanghaojie.github.io/tags/vue/"},{"name":"cesium","slug":"cesium","permalink":"https://tanghaojie.github.io/tags/cesium/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"}],"author":null},{"title":"ç½‘é¡µå¼€å¯è®¾è®¡æ¨¡å¼ &#91 é€Ÿè®° &#93","slug":"web-design-mode","date":"2021-01-07T04:13:50.000Z","updated":"2021-05-06T07:10:21.139Z","comments":true,"path":"2021/01/07/web-design-mode/","link":"","permalink":"https://tanghaojie.github.io/2021/01/07/web-design-mode/","excerpt":"","text":"document.designMode = 'off' ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"shorthand","slug":"shorthand","permalink":"https://tanghaojie.github.io/categories/shorthand/"}],"tags":[{"name":"shorthand","slug":"shorthand","permalink":"https://tanghaojie.github.io/tags/shorthand/"}],"author":null},{"title":"ç§‘æ™®-æµ·å¹³é¢é«˜ã€GPSé«˜ã€åŸºå‡†é¢é«˜çš„åŒºåˆ«å’Œå®šä¹‰","slug":"Mean-SeaLevel-GPS-TheGeoid","date":"2020-11-25T14:35:49.000Z","updated":"2021-05-06T07:09:18.222Z","comments":true,"path":"2020/11/25/Mean-SeaLevel-GPS-TheGeoid/","link":"","permalink":"https://tanghaojie.github.io/2020/11/25/Mean-SeaLevel-GPS-TheGeoid/","excerpt":"","text":"ä»ä¸šè¿™ä¹ˆä¹…äº†ï¼Œå¾ˆå¤šå¾ˆå¤šï¼ˆåŒ…æ‹¬è¡Œä¸šå†…ï¼‰äººï¼Œæ ¹æœ¬æä¸æ¸…æ¥šæµ·å¹³é¢é«˜ã€GPS é«˜ã€åŸºå‡†é¢é«˜çš„åŒºåˆ«ï¼Œè¿™é‡Œç¿»è¯‘å’Œè¡¥å……è¯´æ˜ä¸€ä¸‹ã€‚ å£°æ˜åŸæ–‡å‡ºè‡ªhttps://www.esri.com/news/arcuser/0703/geoid1of3.htmlï¼Œæˆ‘åªæ˜¯è¿›è¡Œäº†ç¿»è¯‘å’Œé’ˆå¯¹å›½å†…æƒ…å†µçš„è¡¥å……ã€‚åŸæ–‡ä½œè€…ï¼šWitold Fraczek, Esri Applications Prototype Labã€‚ä»¥ä¸‹æ­£æ–‡ï¼š é€šå¸¸ï¼Œç ”ç©¶å’ŒæŠ€æœ¯çš„åŠªåŠ›ä¼šå¸¦æ¥æ„å¤–çš„ç§¯ææˆæœã€‚å½“æ¬§æ´²æ¢é™©å®¶å¼€å§‹å¯»æ‰¾é€šå‘å°åº¦çš„æ·å¾„æ—¶ï¼Œä»–ä»¬å‘ç°äº†æ–°ä¸–ç•Œã€‚å½“è‘¡è„çƒèŒç»†èŒåŸ¹å…»ç‰©è¢«æ™®é€šéœ‰èŒé”™è¯¯åœ°æ±¡æŸ“æ—¶ï¼Œéœ‰èŒå’Œç»†èŒèŒè½ä¹‹é—´çš„ç©ºç™½åŒºåŸŸä¼šå¾—å‡ºç»“è®ºï¼Œå³éœ‰èŒé’éœ‰ç´ ä¼šäº§ç”ŸæŠ‘åˆ¶ç»†èŒç”Ÿé•¿çš„åŒ–åˆç‰©ã€‚è¿™ä¸€å¶ç„¶å‘ç°ä¿ƒè¿›äº†é’éœ‰ç´ çš„å‘å±•ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ°çƒä¸Šæ²¡æœ‰å®Œç¾çš„å‡ ä½•å½¢çŠ¶ï¼Œå¤§åœ°æ°´å‡†é¢ç”¨æ¥æè¿°åœ°çƒç‹¬ç‰¹ä¸”ä¸è§„åˆ™çš„å½¢çŠ¶ã€‚ä½†æ˜¯ï¼Œç›´åˆ°æœ€è¿‘ï¼ˆåŸæ–‡å‘è¡¨æ—¶é—´ï¼š2003 å¹´ 7 æœˆï¼‰æ‰è§‚å¯Ÿåˆ°ç”±å…¨çƒå¹³å‡æµ·å¹³é¢ï¼ˆMSLï¼šthe global mean sea levelï¼‰é€ æˆçš„æµ·é¢æœ‰æ›´æ˜æ˜¾çš„ä¸è§„åˆ™æ€§ã€‚è¿™äº›ä¸è§„åˆ™æ€§æ¯”ä¸“å®¶çš„é¢„æµ‹é«˜å‡ºä¸€ä¸ªæ•°é‡çº§ã€‚å—åœ°çƒå¼•åŠ›çš„æ§åˆ¶ï¼Œè¿™äº›ä¸è§„åˆ™ç°è±¡å½¢æˆäº†éå¸¸å¹³ç¼“ä½†åˆåºå¤§çš„â€œä¸˜é™µâ€å’Œâ€œå±±è°·â€ã€‚è¿™ä¸€æƒŠäººå‘ç°æ˜¯é€šè¿‡ä½¿ç”¨ GPS æ¥å®ç°çš„ï¼ŒGPS æ˜¯ç¾å›½å›½é˜²éƒ¨è®¾è®¡çš„ä¸€é¡¹æŠ€æœ¯ï¼Œæ—¨åœ¨å½»åº•æ”¹å˜ç¾å›½æµ·å†›å’Œç©ºå†›çš„å¯¼èˆªæŠ€æœ¯ã€‚GPS å·²ç»åšåˆ°äº†ï¼Œè€Œä¸”è¿˜èƒ½åšåˆ°æ›´å¤šã€‚ ä»€ä¹ˆæ˜¯å¹³å‡æµ·å¹³é¢ï¼Ÿå‡ ä»£äººä»¥æ¥ï¼Œè¡¨è¾¾åœ°å½¢æˆ–æµ‹æ·±æ ‡é«˜çš„å”¯ä¸€æ–¹æ³•æ˜¯å°†å…¶ä¸æµ·å¹³é¢ç›¸å…³è”ã€‚å¤§åœ°æµ‹é‡å­¦å®¶æ›¾ç»è®¤ä¸ºï¼Œæµ·æ´‹ä¸åœ°çƒçš„é‡åŠ›å¹³è¡¡ï¼Œå¹¶å½¢æˆäº†å®Œç¾çš„è§„åˆ™å›¾å½¢ã€‚MSL é€šå¸¸è¢«æè¿°ä¸ºæ½®æ±æ•°æ®ï¼Œå®ƒæ˜¯åœ¨ç‰¹å®šçš„ 19 å¹´å‘¨æœŸå†…è§‚å¯Ÿåˆ°çš„æ¯å°æ—¶æ°´ä½å‡é«˜çš„ç®—æœ¯å¹³å‡å€¼ã€‚è¯¥å®šä¹‰å°†æœˆçƒå’Œå¤ªé˜³å¼•åŠ›å˜åŒ–å½±å“å¼•èµ·çš„æ½®æ±é«˜æ½®å’Œä½æ½®è¿›è¡Œå¹³å‡ã€‚ MSL å®šä¹‰ä¸ºå±€éƒ¨åŒºåŸŸçš„é›¶æµ·æ‹”ã€‚é«˜ç¨‹å¼•ç”¨çš„é›¶è¡¨é¢ç§°ä¸ºå‚ç›´åŸºå‡†ã€‚å¯¹äºåœ°å›¾åˆ¶ä½œè€…æ¥è¯´ä¸å¹¸çš„æ˜¯ï¼Œæµ·å¹³é¢å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„è¡¨é¢ã€‚ç”±äºæµ·é¢ç¬¦åˆåœ°çƒçš„é‡åŠ›åœºï¼Œå› æ­¤ MSL çš„ä¸˜é™µå’Œå±±è°·ä¸é™†åœ°è¡¨é¢ç›¸ä¼¼ï¼Œä½†æ›´å¹³æ»‘ã€‚ä½†æ˜¯ï¼Œè¥¿ç­ç‰™å®šä¹‰çš„é›¶æµ·æ‹”ä¸åŠ æ‹¿å¤§å®šä¹‰çš„é›¶æµ·æ‹”ä¸åŒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ¬åœ°å®šä¹‰çš„å‚ç›´åŸºå‡†å½¼æ­¤ä¸åŒçš„åŸå› ã€‚ MSL è¡¨é¢å¤„äºé‡åŠ›å¹³è¡¡çŠ¶æ€ã€‚å®ƒå¯ä»¥çœ‹ä½œæ˜¯åœ¨å„å¤§æ´²ä¸‹å»¶ä¼¸ï¼Œæ˜¯å¤§åœ°æ°´å‡†é¢çš„è¿‘ä¼¼å€¼ã€‚æ ¹æ®å®šä¹‰ï¼Œå¤§åœ°æ°´å‡†é¢æè¿°äº†åœ°çƒçš„ä¸è§„åˆ™å½¢çŠ¶ï¼Œå¹¶ä¸”æ˜¯ç”¨äºæµ‹é‡é«˜ç¨‹çš„çœŸæ­£é›¶è¡¨é¢ã€‚ç”±äºæ— æ³•ç›´æ¥è§‚å¯Ÿåˆ°å¤§åœ°æ°´å‡†é¢ï¼Œå› æ­¤æ— æ³•ç›´æ¥æµ‹é‡å¤§åœ°æ°´å‡†é¢ä¸Šæ–¹æˆ–ä¸‹æ–¹çš„é«˜åº¦ï¼Œå¹¶ä¸”æ— æ³•é€šè¿‡è¿›è¡Œé‡åŠ›æµ‹é‡å’Œå¯¹è¡¨é¢è¿›è¡Œæ•°å­¦å»ºæ¨¡æ¥æ¨æ–­ã€‚ä»¥å‰ï¼Œæ— æ³•ç²¾ç¡®æµ‹é‡å¤§åœ°æ°´å‡†é¢ï¼Œå› æ­¤ MSL å¯ä»¥ç²—ç•¥åœ°ä¼°ç®—å®ƒã€‚å°½ç®¡å‡ºäºå®é™…ç›®çš„ï¼Œå‡å®šåœ¨æµ·å²¸çº¿å¤„çš„å¤§åœ°æ°´å‡†é¢å’Œ MSL è¡¨é¢åŸºæœ¬ç›¸åŒï¼Œä½†åœ¨æŸäº›åœ°ç‚¹ï¼Œå¤§åœ°æ°´å‡†é¢å®é™…ä¸Šå¯èƒ½ä¸ MSL ç›¸å·®å‡ ç±³ã€‚ ä¸åŒçš„æµ‹é‡å€¼GPS æ”¹å˜äº†ä»»ä½•åœ°ç‚¹çš„é«˜åº¦æµ‹é‡æ–¹å¼ã€‚GPS åœ¨å…¶æ°´å¹³å’Œå‚ç›´åŸºå‡†é¢ä¸Šå‡ä½¿ç”¨æ¤­çƒåæ ‡ç³»ï¼Œæ¤­çƒä½“æˆ–æ‰å¹³çš„çƒä½“ç”¨äºè¡¨ç¤ºåœ°çƒçš„å‡ ä½•æ¨¡å‹ã€‚ ä»æ¦‚å¿µä¸Šè®²ï¼Œè¿™ç§ç²¾ç¡®è®¡ç®—çš„æ¤­çƒä½“ï¼ˆç§°ä¸ºæ‰åœ†æ¤­çƒä½“ï¼‰æ—¨åœ¨å¤åˆ¶ MSL ä½œä¸ºä¸»è¦çš„å¤§åœ°æµ‹é‡å‚è€ƒæˆ–å‚ç›´åŸºå‡†ã€‚å¦‚æœä½¿ç”¨æ­¤æ¤­çƒå‚ç›´åŸºå‡†ï¼Œåˆ™æ¤­çƒä¸Šæ–¹çš„é«˜åº¦å°†ä¸ MSL ä¸åŒï¼Œå¹¶ä¸”å¤§å¤šæ•°ä½ç½®çš„ç›´æ¥é«˜ç¨‹è¯»æ•°éƒ½å°†å¾ˆå°´å°¬ã€‚é€ æˆè¿™ç§æƒ…å†µçš„éƒ¨åˆ†åŸå› æ˜¯ï¼ŒGPS çš„æµ·æ‹”é«˜åº¦å®šä¹‰ä¸æ¶‰åŠ MSLï¼Œè€Œæ˜¯æ¶‰åŠç§°ä¸ºå‚è€ƒæ¤­çƒçš„é‡åŠ›è¡¨é¢ã€‚ç”±äºå‚è€ƒæ¤­çƒæ—¨åœ¨ç´§å¯†æ¥è¿‘ MSLï¼Œå› æ­¤å½“ä¸¤ä¸ªæ•°å­—ç›¸å·®å¾ˆå¤§æ—¶ï¼Œä»¤äººæƒŠè®¶ã€‚ TOPEX / POSEIDON å«æ˜Ÿäº 1992 å¹´å‘å°„ï¼Œä¸“é—¨è®¾è®¡ç”¨äºæ‰§è¡Œéå¸¸ç²¾ç¡®çš„é«˜ç©ºè§‚æµ‹ã€‚è¿™äº›æµ‹é‡ç»“æœè¡¨æ˜ï¼Œäººä¸ºè¯¯å·®å’Œ GPS é”™è¯¯éƒ½ä¸æ˜¯é€ æˆæ¤­çƒå’Œ MSL æµ‹é‡å€¼ä¹‹é—´æœ‰æ—¶å­˜åœ¨é‡å¤§å·®å¼‚çš„åŸå› ã€‚å®é™…ä¸Šï¼Œç”±åœ°çƒæµ·å¹³é¢äº§ç”Ÿçš„ä¸‰ç»´è¡¨é¢åœ¨å‡ ä½•ä¸Šæ˜¯ä¸æ­£ç¡®çš„ï¼Œå¹¶ä¸”æ— æ³•é€šè¿‡æ•°å­¦æ–¹æ³•è®¡ç®—å‡ºå…¶æ˜æ˜¾çš„ä¸è§„åˆ™æ€§ã€‚è¿™è§£é‡Šäº†åŸºäºæ¤­çƒçš„ GPS é«˜ç¨‹è¯»æ•°ä¸ç²¾ç¡®åœ°å½¢å›¾ä¸Šæ˜¾ç¤ºçš„é«˜ç¨‹ä¹‹é—´çš„åŒºåˆ«ã€‚ å¯¹åŠ åˆ©ç¦å°¼äºšå·é›·å¾·å…°å…¹å¸‚ Esri æ€»éƒ¨çš„æµ·æ‹”è¯»æ•°è¿›è¡Œäº†ç®€çŸ­æ£€æŸ¥ï¼Œå°±è¯æ˜äº†è¿™äº›å·®å¼‚ã€‚åæ™®æ–¯é«˜ç¨‹æ˜¾ç¤ºåœ¨åœ°å½¢å››è¾¹å½¢åœ°å›¾å’Œé«˜åˆ†è¾¨ç‡æ•°å­—é«˜ç¨‹æ¨¡å‹ï¼ˆDEMï¼‰ä¸Šï¼Œè¯¥åŒºåŸŸä½äº MSL ä¸Šæ–¹çº¦ 400 ç±³å¤„ã€‚ä½†æ˜¯ï¼Œå¯¹äºç›¸åŒä½ç½®çš„ç²¾ç¡®æµ‹é‡åï¼Œæœªç»è°ƒæ•´çš„ GPS è¯»æ•°é€šå¸¸æ˜¾ç¤ºæµ·æ‹”ä¸º 368 ç±³ã€‚ ä¸ºä»€ä¹ˆç›¸è· 32 ç±³ï¼ŸGPS æ¥æ”¶å™¨ä½¿ç”¨ç”±ä¸–ç•Œå¤§åœ°æµ‹é‡ç³»ç»Ÿï¼ˆWGS84ï¼‰æ¤­çƒä¼°è®¡çš„ç†è®ºæµ·å¹³é¢ï¼Œå®ƒå¹¶ä¸å®Œå…¨éµå¾ªç†è®º MSLã€‚ç”¨æ¤­åœ†å½¢è¿‘ä¼¼çš„ MSL ä¸é‡åŠ›æˆ–åœ°çƒçš„è´¨å¿ƒæœ‰å…³ã€‚WGS84 æ¤­çƒå’Œå¤§åœ°æ°´å‡†é¢ä¹‹é—´çš„å·®å¼‚éšä½ç½®è€Œå¼‚ã€‚ç»§ç»­æ­¤ç¤ºä¾‹ï¼Œå°¤å¡å¸•ï¼ˆYucaipaï¼‰ï¼ˆä½äºé›·å¾·å…°å…¹ä»¥ä¸œä¸åˆ° 10 è‹±é‡Œçš„åŸå¸‚ï¼‰çš„æµ·æ‹”è¯»æ•°ç›¸å·® 31.5 ç±³ã€‚ ï¼ˆè¡¥å……ï¼‰ä¸­å›½å›½å†…æ ¹æ®ç›®å‰çš„ç»éªŒå€¼æ¥çœ‹ï¼Œè¿™ä¸ªå·®å¼‚ä¹Ÿåœ¨ 30 ç±³å·¦å³ã€‚ å¤§åœ°æ°´å‡†é¢å’Œæ¤­çƒä½“éšç€å¤§åœ°æ°´å‡†é¢çš„æ³¢åŠ¨èµ·ä¼ç›¸äº¤ã€‚æ³¢åŠ¨èµ·ä¼æ˜¯ç”±å‡ ç§ç°è±¡å¼•èµ·çš„ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯åœ°çƒéå‡è´¨æ€§å¼•èµ·çš„é‡åŠ›å¼‚å¸¸çš„å­˜åœ¨ã€‚åœ°å£³ä¸­çš„å²©æµ†å¯†åº¦åˆ†å¸ƒä¸ â€‹â€‹ å‡åŒ€ã€‚åœ¨å¯†åº¦è¾ƒå¤§çš„åŒºåŸŸï¼Œå®ƒå¯èƒ½ä¼šæ›´é«˜ï¼Œå› æ­¤ä¼šå˜å‡‰ã€‚å¯†åº¦è¾ƒå°çš„åŒºåŸŸç›¸åº”åœ°è¾ƒä½ä¸”è¾ƒçƒ­ã€‚ç¨ å¯†çš„å²©æµ†æ–½åŠ æ›´å¼ºçš„æ‹‰åŠ›ï¼Œå¯¼è‡´æ°´å›¢çš„å †ç§¯ã€‚å¯¹äºè¿™äº›å·æ˜¯å¦ç§»åŠ¨æˆ–ç§»åŠ¨é€Ÿåº¦çŸ¥ä¹‹ç”šå°‘ã€‚å¦‚æœè¿™äº›ä½ç½®ç¡®å®ç§»åŠ¨ï¼Œå®ƒä»¬çš„ç§»åŠ¨å°†ä¸å…¶ä»–åœ°è´¨äº‹ä»¶çš„ç§»åŠ¨é€Ÿåº¦ç›¸åŒï¼ˆå³éå¸¸ç¼“æ…¢ï¼‰ã€‚ ä»å¤ªç©ºè·å¾—çš„ç²¾ç¡®æµ‹é‡å€¼å°†åº”ç”¨äº GPS è¯»æ•°ã€‚è¿™äº›æµ‹é‡åŸºäºæ¤­çƒè¡¨é¢ï¼Œè¯¥æ¤­çƒè¡¨é¢æ˜¯ä»ä¸‰ç»´ç¬›å¡å°”åæ ‡ç³»è·å¾—çš„æ•°å­¦ä¸Šç”Ÿæˆçš„åœ°çƒæ¨¡å‹ã€‚GPS æ¥æ”¶å™¨åªèƒ½æä¾›æ¤­åœ†ï¼ˆå‡ ä½•ï¼‰é«˜åº¦ã€‚ ä½†æ˜¯ï¼Œå¤§å¤šæ•°ç”¨æˆ·æœŸæœ›ä¸ MSL ç›¸å…³çš„å‡†ç¡®çš„æµ·æ‹”è¯»æ•°ã€‚å› æ­¤ï¼Œè¾ƒæ–°çš„ GPS è®¾å¤‡åŸºäºä½¿ç”¨åœ°ç†åæ ‡ä½œä¸ºè¾“å…¥çš„å…¬å¼ï¼Œè¡¨æ ¼å’ŒçŸ©é˜µçš„ç»„åˆï¼Œå°†â€œæ­£äº¤â€ï¼ˆåœ°ç†ï¼‰é«˜åº¦æµ‹é‡ç»“æœè¾“å‡ºä¸ºâ€œå¹•åâ€è®¡ç®—ç»“æœã€‚æä¾›äº†ä»ç²—ç³™æˆ–ç²¾ç»† DEM çŸ©é˜µä¸­è·å–çš„åœ°ç†ä½ç½®çš„é€‚å½“é«˜åº¦ï¼Œè€Œä¸æ˜¯ z å€¼ï¼ˆæˆ–é«˜åº¦ï¼‰çš„å®é™…æµ‹é‡å€¼ã€‚ä¸€äº›æ¥æ”¶å™¨ä½¿ç”¨å¤§åœ°æ°´å‡†é¢é«˜åº¦çš„è¿‘ä¼¼å€¼ï¼Œä»¥æ ¹æ®æ¤­çƒé«˜åº¦ä¼°ç®—æ­£é«˜ã€‚è¿˜æœ‰ä¸€äº›å•ä½ï¼Œä½¿ç”¨è¾ƒæ—§çš„æŠ€æœ¯ä½œä¸šï¼Œæä¾›åŸºäºæ¤­çƒä½“çš„ z å€¼æ”¹æ­£è¯»æ•°ã€‚ å…¨çƒå¤§åœ°æ°´å‡†é¢å®šä¹‰-Geoid99GPS éœ€è¦ä¸€ä¸ªå…¨çƒå®šä¹‰çš„å¤§åœ°æ°´å‡†é¢ï¼Œä»¥ä¾¿ GPS æ¥æ”¶å™¨å¯ä»¥è®¡ç®—æ‰€éœ€çš„æ­£ç¡® z å€¼ä½œä¸ºå…¨å±€å‚ç›´åŸºå‡†çš„å‚è€ƒé¢ã€‚ï¼ˆç¾å›½ï¼‰å›½å®¶å¤§åœ°æµ‹é‡å±€ï¼ˆNational Geodetic Surveyï¼‰å¼€å‘äº† Geoid99ï¼Œè¿™æ˜¯ä¸€ç§å…·æœ‰äºšç±³çº§ç²¾åº¦çš„æ¨¡å‹ã€‚å®ƒè¢«ç”¨ä½œé›¶è¡¨é¢ä»¥åœ¨å…¨çƒèŒƒå›´å†…å»ºç«‹ä¸€è‡´ä¸”å‡†ç¡®çš„é«˜ç¨‹ã€‚ä½†æ˜¯ï¼Œå°½ç®¡è¾¾åˆ°äº†ä»¤äººå°è±¡æ·±åˆ»çš„å‡†ç¡®æ€§æ°´å¹³ï¼Œä½†ç”±äºé‡åŠ›æ•ˆåº”ï¼ŒGeoid99 çš„æŸäº›éƒ¨åˆ†ä»åç¦»äº† MSLã€‚ ç”±ç¾å›½å›½å®¶èˆªç©ºèˆªå¤©å±€æˆˆè¾¾å¾·å¤ªç©ºé£è¡Œä¸­å¿ƒï¼Œç¾å›½å›½å®¶å½±åƒå’Œåˆ¶å›¾å±€ï¼ˆNIMAï¼‰å’Œä¿„äº¥ä¿„å·ç«‹å¤§å­¦åˆä½œå¼€å‘çš„åœ°çƒå¤§åœ°æµ‹é‡æ¨¡å‹ï¼ˆEGM96ï¼‰å·²ç”¨äºè®¡ç®—ç²¾ç¡®åº¦ä¼˜äºä¸€ç±³çš„å¤§åœ°æ°´å‡†é¢æ³¢åŠ¨ï¼ˆé™¤ç¼ºä¹å‡†ç¡®çš„è¡¨é¢é‡åŠ›æ•°æ®çš„åŒºåŸŸï¼‰ã€‚è¯¥è¡¨é¢çš„å€¼æ˜¾ç¤ºæ¯ä¸ªä½ç½®çš„ MSL ä¸ç”¨ä½œ GPS é«˜ç¨‹è¯»æ•°å‚è€ƒçš„æ¤­åœ†å½¢ä¹‹é—´çš„å·®å€¼ã€‚æ¢å¥è¯è¯´ï¼ŒEGM96 æ˜¾ç¤ºå‡ºæµ·æ´‹è¡¨é¢çš„å¼•åŠ›ç¡®å®æ˜¯å¤šä¹ˆä¸å‡åŒ€ã€‚å¤§åœ°æ°´å‡†é¢ç›¸å¯¹äº WGS84 æ¤­çƒçš„æœ€å¤§èµ·ä¼èŒƒå›´ä¸º 192 ç±³ã€‚æœ€å¤§çš„å¼‚å¸¸ç°è±¡æ˜¯åœ¨å°åº¦ä¸œå—éƒ¨å‘ç°çš„ï¼Œè¯¥å¤§åœ°æ°´å‡†é¢ä½äºæ¤­çƒä»¥ä¸‹ 105 ç±³ï¼Œå¹¶ä¸”åœ¨å°åº¦å°¼è¥¿äºšä¸œéƒ¨å‘ç°äº†æœ€å¤§çš„è†¨èƒ€ã€‚ â€œå¦‚ä½•â€æ¨¡æ‹Ÿå¦‚æœæ²¡æœ‰é‡åŠ›å¼‚å¸¸ï¼Œå¤§é™†æµ·å²¸çº¿å°†å¦‚ä½•å˜åŒ–ï¼Ÿç®€çŸ­çš„ç­”æ¡ˆæ˜¯ï¼Œå®ƒä»¬çœ‹èµ·æ¥å°±åƒåœ°çƒæ˜¯æ¤­çƒä¸€æ ·ã€‚æœ€å¤§çš„èµ·ä¼é›†ä¸­åœ¨å°åº¦æ´‹åŒ—éƒ¨å’Œå°åº¦å°¼è¥¿äºšç¾¤å²›å†…ã€‚å› æ­¤ï¼Œå°†å‡ºç°ç›®å‰åœ¨æ¾³å¤§åˆ©äºšåŒ—éƒ¨çš„é˜¿æ‹‰æ³•æ‹‰æµ·å’Œå¡å½­ç‰¹é‡Œäºšæ¹¾æ‰€è¦†ç›–çš„åœ°åŒºã€‚ç›¸åï¼Œå…¶ä»–åœ°åŒºï¼Œå¦‚æ’æ²³å’Œé›…é²è—å¸ƒæ±Ÿç­‰å—äºšä¸»è¦æ²³æµä¸‰è§’æ´²å½¢æˆçš„ä½åœ°ï¼Œä»¥åŠå°åº¦æ²³ï¼Œä¼Šæ´›ç“¦åº•æ±Ÿå’Œæ¹„å…¬æ²³çš„ä¸‰è§’æ´²ï¼Œä¹Ÿå°†ä¸‹æ²‰ã€‚ ä½œä¸ºä¸€é¡¹æ™ºåŠ›ç»ƒä¹ ï¼Œè¯·æƒ³è±¡ä¸€ä¸‹åœ°çƒæ˜¯ä¸€ä¸ªæ¤­çƒä½“å’Œä¸€ä¸ªæ¤­çƒä½“çš„å‡ ä½•å®Œç¾å½¢çŠ¶ã€‚ä¸ºäº†å¯è§†åŒ–è¿™äº›â€œå‡è®¾â€åœºæ™¯ï¼Œä½¿ç”¨è¡¨ç¤ºè·åœ°çƒä¸­å¿ƒçš„è·ç¦»çš„æ …æ ¼ç”Ÿæˆäº†è®¡ç®—æœºæ¨¡æ‹Ÿï¼Œå¹¶ä½¿ç”¨ ArcGIS Spatial Analyst æ‰©å±•ç¨‹åºä¸­çš„æ …æ ¼è®¡ç®—å™¨ç”Ÿæˆäº†è¯¥æ¨¡æ‹Ÿã€‚é€šè¿‡åˆ é™¤ EGM96 è¯†åˆ«å‡ºçš„é‡åŠ›å¼‚å¸¸æ¥ä¿®æ”¹åœ°çƒä»ªçš„æ ‡å‡†æ•°å­—é«˜ç¨‹æ¨¡å‹ã€‚æ¤­çƒå’Œæ¤­çƒçš„è¿™äº›å‡ ä½•ä¸Šæ­£ç¡®çš„è¡¨ç¤ºè¢«ç”¨äºç”Ÿæˆç§°ä¸º SPHEROID DEM å’Œ ELLIPSOID DEM çš„ GIS æ¨¡æ‹Ÿã€‚éšé™„çš„æ’å›¾æ˜¾ç¤ºäº†è¿™äº›å½¢çŠ¶ä»¥åŠå…¶ä»–åœºæ™¯å¯¹é™†åœ°å’Œæµ·æ´‹åˆ†å¸ƒçš„å½±å“ã€‚ SPHEROID DEMï¼ˆçƒå½¢ DEMï¼‰SPHEROID DEM æ˜¯åŸºäºä»¥ä¸‹å‡è®¾åˆ›å»ºçš„ï¼šåœ°çƒçš„å½¢çŠ¶ï¼Œæˆ–æ›´å‡†ç¡®åœ°è¯´ï¼Œä»¥ MSL è¡¨ç¤ºçš„åœ°çƒè¡¨é¢çš„å½¢çŠ¶æ˜¯çƒå½¢ã€‚æ¢å¥è¯è¯´ï¼Œè¿æ¥è´¨å¿ƒå’Œå‡è®¾çš„ç­‰åŠ¿å¼•åŠ›è¡¨é¢çš„åœ°çƒåŠå¾„åœ¨åœ°çƒä¸Šå„å¤„éƒ½ç›¸åŒã€‚åŠå¾„è®¾ç½®ä¸º 6,367,473 ç±³ï¼Œè¿™æ˜¯ä»çº¬åº¦ä¸º 45 åº¦çš„æ¤­åœ†å‚è€ƒé¢åˆ°åœ°çƒä¸­å¿ƒçš„è·ç¦»ã€‚ è¿™ç§å‡ ä½•å½¢çŠ¶æ”¹å˜ä¸ºé‡åŠ›æ”¹å˜åçš„æ¤­çƒå½¢ä¼šå¯¼è‡´å…¨çƒæµ·æ´‹å‘ç”Ÿå˜åŒ–ã€‚æåœ°å¸¦è·ç¦»åœ°çƒä¸­å¿ƒç›¸å¯¹è¾ƒè¿œï¼Œè€Œè¿™äº›æ–°çš„æ›´é«˜çš„æµ·æ‹”é«˜åº¦å°†è¿«ä½¿æµ·æ°´æµå‘èµ¤é“ã€‚åŒæ ·ï¼Œèµ¤é“åŒºåŸŸå°†ç›¸å¯¹æ›´é è¿‘åœ°çƒä¸­å¿ƒï¼Œå¹¶ä¸”ä¼šå—åˆ°é‡åŠ›çš„å¼ºçƒˆå½±å“ã€‚èµ¤é“å¸¦é‡åŠ›çš„å¢åŠ ä¼šæŠŠæµ·æ°´æ‹‰å‘èµ¤é“ï¼Œå½¢æˆä¸€ä¸ªå…¨çƒæ€§çš„èµ¤é“æµ·æ´‹ã€‚ ELLIPSOID DEMï¼ˆæ¤­çƒ DEMï¼‰ELLIPSOID DEM å°†åœ°çƒæè¿°ä¸ºæ¤­çƒã€‚å°½ç®¡æ²¿ç€æ¯ä¸ªçº¬åº¦ä»æ¤­çƒè¡¨é¢åˆ°åœ°çƒä¸­å¿ƒçš„è·ç¦»éƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯æ¯ä¸ªçº¬åº¦éƒ½æœ‰å…¶è‡ªå·±çš„å”¯ä¸€å€¼ï¼Œå³ä»æ¯ä¸ªæç‚¹åˆ°èµ¤é“é€æ¸å¢åŠ ã€‚ä¸ºäº†ä»å¦ä¸€ä¸ªè§’åº¦çœ‹å¾…è¿™ä¸ªæ¤­åœ†å½¢çš„åœ°çƒï¼ˆå…¶ç‰©ç†å½¢çŠ¶ä»¥è¡¨é¢ä¸Šä»»ä½•ç‚¹åˆ°åœ°çƒè´¨é‡ä¸­å¿ƒçš„è·ç¦»ä¸ºç‰¹å¾ï¼‰ï¼Œä½¿ç”¨ WGS84 åŸºå‡†å®šä¹‰ç”Ÿæˆäº†ä¸€ä¸ªç½‘æ ¼ã€‚æ¯ä¸ªç½‘æ ¼å•å…ƒå€¼ä»£è¡¨ä»è¡¨é¢åˆ°åœ°çƒè´¨å¿ƒçš„è·ç¦»ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰ã€‚åº”ç”¨äº†ä¸‰è§’å‡½æ•°çš„å¤æ‚ç»„åˆæ¥åˆ›å»ºæ¤­çƒçš„è¡¨ç¤ºå½¢å¼ã€‚ç„¶åå°†ä»£è¡¨åœ°çƒå½“å‰æµ®é›•çš„ DEM æ·»åŠ åˆ°æ¤­åœ†å½¢æ …æ ¼ä¸­ã€‚ WGS84 æ¤­çƒçš„é•¿è½´å’ŒçŸ­è½´ä¹‹é—´çš„å·®ä¸º 42,770 ç±³ã€‚èµ¤é“åŠå¾„ä¸ä¸¤æä¹‹ä¸€çš„åŠå¾„é•¿åº¦ä¹‹å·®ä¸º 21,385 ç±³-ä»…å åŠå¾„çš„ 0.33ï¼…ã€‚ä»å‡ ä½•å­¦ä¸Šè®²ï¼Œåœ°çƒçš„â€œæ‰å¹³åŒ–â€ç›¸å¯¹æ¥è¯´å¾®ä¸è¶³é“ï¼Œä½†æ˜¯å°±åœ°ç†è€Œè¨€ï¼Œå®ƒå…·æœ‰å·¨å¤§çš„å½±å“ã€‚ å¦‚æœåœ°çƒé™æ­¢ä¸åŠ¨å¦‚æœåœ°çƒåœæ­¢è‡ªè½¬å¹¶ä¸”ç¦»å¿ƒä½œç”¨ä¸å†è¿«ä½¿æµ·æ´‹åœ¨èµ¤é“å‘¨å›´ç§¯èšï¼Œå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿçœ‹æ¥ä¸–ç•Œæµ·æ´‹å°†åˆ†è£‚ä¸ºä¸¤ä¸ªæåœ°æµ·æ´‹ï¼Œè€Œèµ¤é“åŒºåŸŸå°†å®Œå…¨å¹²ç‡¥ã€‚ä¸ºäº†å¯¹æ­¤å‡è®¾å»ºæ¨¡ï¼ŒæŒ‡å®šäº† 6,371,146 ç±³çš„å€¼ï¼ˆè·åœ°çƒä¸­å¿ƒçš„è·ç¦»è¡¨ç¤ºå‚è€ƒæ¤­çƒä¸Šçš„æµ·å¹³é¢çš„è¿‘ä¼¼é«˜åº¦ï¼‰ï¼Œä»¥å°†æ°´ä¸åœŸåœ°åˆ†å¼€ã€‚å¯¹äºæ­¤â€œå‡è®¾å‡è®¾â€æ¨¡æ‹Ÿï¼Œæµ·å¹³é¢çš„å‡é«˜æ˜¯åŸºäºè¿™æ ·çš„å‡è®¾ï¼Œå³æµ·æ°´é‡å°†ä¸ä»Šå¤©çš„æ°´å¹³å¤§è‡´ç›¸åŒã€‚ å†°å·èåŒ–å›åˆ°åœ°çƒçš„å¤§åœ°æ°´å‡†é¢è¡¨ç¤ºæ³•ï¼Œå†è¿›è¡Œä¸€æ¬¡æ¨¡æ‹Ÿï¼Œæ¨¡æ‹Ÿæ‰€æœ‰å†°å·èåŒ–çš„åœ°çƒã€‚å¦‚æœå…¨çƒå˜æš–å¯¼è‡´å—æå’Œæ ¼é™µå…°çš„å¤§å‹å†°å·ï¼ˆç›®å‰è¦†ç›–æ‰€æœ‰åœŸåœ°çš„å¤§çº¦ 10ï¼…ï¼‰èåŒ–ï¼Œé‚£ä¹ˆè¯¥æ¨¡æ‹Ÿå¯èƒ½ä¼šé¢„æµ‹æœªæ¥åªæœ‰å‡ ç™¾å¹´çš„è·ç¦»ã€‚å¦‚æœè¿™äº›å†°å·ä¸­çš„æ°´å…¨éƒ¨é‡Šæ”¾ï¼ŒMSL å°†æ¯”å½“å‰æ°´ä½ä¸Šå‡çº¦ 80 ç±³ã€‚ ç»“è®ºGIS ä½¿æ¢ç´¢åœ°çƒå½¢çŠ¶çš„ä¸åŒæ¦‚å¿µåŒ–çš„å½±å“ä»¥åŠå¯¹å„ç§å…¨çƒæ¡ä»¶è¿›è¡Œå»ºæ¨¡æˆä¸ºå¯èƒ½ã€‚ ç†è®ºç»“è®ºGPS é«˜=æ¤­çƒé«˜=å¤§åœ°é«˜ï¼šç‚¹åˆ°æ¤­çƒé¢çš„è·ç¦»ã€‚å¤§åœ°æ°´å‡†é¢é«˜=æ­£é«˜ï¼šç‚¹åˆ°å¤§åœ°æ°´å‡†é¢çš„è·ç¦»ï¼Œå¤§åœ°æ°´å‡†é¢=é‡åŠ›ç­‰ä½é¢ï¼Œæ— æ³•å…¨éƒ¨æµ‹é‡ã€‚ä¼¼å¤§åœ°æ°´å‡†é¢é«˜=æ­£å¸¸é«˜ï¼šç‚¹åˆ°ä¼¼å¤§åœ°æ°´å‡†é¢çš„è·ç¦»ï¼Œç”±äºå¤§åœ°æ°´å‡†é¢æ— æ³•æµ‹é‡ï¼Œåªèƒ½å°½å¯èƒ½å¤šçš„é€‰ç‚¹è¿›è¡Œæµ‹é‡ï¼Œç”Ÿæˆä¼¼å¤§åœ°æ°´å‡†é¢ã€‚åœ¨æµ·é¢ä¸Šå¯ä»¥è®¤ä¸ºä¼¼å¤§åœ°æ°´å‡†é¢å’Œå¤§åœ°æ°´å‡†é¢é‡åˆï¼Œè€Œè¶Šæ˜¯èµ·ä¼å¤§çš„åœ°åŒºï¼Œåœ°çƒè´¨é‡è¶Šä¸å‡åŒ€ï¼Œå·®å¼‚å°±è¶Šå¤§ï¼Œéœ€è¦æ›´å¤šçš„æ§åˆ¶ç‚¹æ ¡æ­£ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/categories/GIS/"}],"tags":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/tags/GIS/"}],"author":null},{"title":"DJIç…§ç‰‡å…ƒæ•°æ®ä¸»è¦ä¿¡æ¯åˆ—è¡¨","slug":"DJI-XMP-Meta-Data-Info-Explain","date":"2020-11-25T12:34:21.000Z","updated":"2021-05-06T07:09:06.019Z","comments":true,"path":"2020/11/25/DJI-XMP-Meta-Data-Info-Explain/","link":"","permalink":"https://tanghaojie.github.io/2020/11/25/DJI-XMP-Meta-Data-Info-Explain/","excerpt":"","text":"å­—æ®µ è¯´æ˜ ModifyDate=â€2018-08-09â€ ç…§ç‰‡ä¿®æ”¹æ—¥æœŸ CreateDate=â€2018-08-09â€ ç…§ç‰‡åˆ›å»ºæ—¥æœŸ Make=â€DJIâ€ åˆ¶é€ å•† Model=â€FC6310Râ€ ç›¸æœºå‹å· format=â€image/jpgâ€ ç…§ç‰‡æ ¼å¼ AbsoluteAltitude=â€+150.09â€ ç›¸æœºçš„ç»å¯¹é«˜åº¦ï¼ŒåŸºäºä½¿ç”¨çš„æ¤­çƒæ¨¡å‹ï¼ˆé€šå¸¸ä¸º WGS84 æˆ– CGCS2000ï¼‰ã€‚ RelativeAltitude=â€+109.86â€ åŸºäºåŸç‚¹ï¼ˆèµ·é£ç‚¹ï¼‰çš„æ‘„åƒæœºçš„ç›¸å¯¹é«˜åº¦ã€‚ GpsLatitude=â€22.63093244â€ ç›¸æœºä½ç½®çš„çº¬åº¦ï¼Œåœ¨åŒ—æ­£å—è´Ÿï¼Œå•ä½ï¼šåº¦ã€‚ GpsLongtitude=â€113.93793694â€ ç›¸æœºä½ç½®çš„ç»åº¦ï¼Œå•ä½ï¼šåº¦ã€‚ GimbalRollDegree=â€+0.00â€ äº‘å°ä¾§å€¾è§’ï¼ˆåœ¨ä¸œåŒ—åœ°é¢æ¡†æ¶ä¸­ï¼ŒåŒ—ä¸ºçœŸåŒ—ï¼‰ GimbalYawDegree=â€-38.00â€ äº‘å°åèˆªè§’ï¼ˆåœ¨ä¸œåŒ—åœ°é¢æ¡†æ¶ä¸­ï¼ŒåŒ—ä¸ºçœŸåŒ—ï¼‰ GimbalPitchDegree=â€-89.90â€ äº‘å°ä¿¯ä»°è§’ï¼ˆåœ¨ä¸œåŒ—åœ°é¢æ¡†æ¶ä¸­ï¼ŒåŒ—ä¸ºçœŸåŒ—ï¼‰ FlightRollDegree=â€+4.70â€ æ— äººæœºä¾§å€¾è§’ï¼ˆåœ¨ä¸œåŒ—åœ°é¢æ¡†æ¶ä¸­ï¼ŒåŒ—ä¸ºçœŸåŒ— FlightYawDegree=â€-36.10â€ æ— äººæœºåèˆªè§’ï¼ˆåœ¨ä¸œåŒ—åœ°é¢æ¡†æ¶ä¸­ï¼ŒåŒ—ä¸ºçœŸåŒ—ï¼‰ FlightPitchDegree=â€+0.80â€ æ— äººæœºäº‘å°ä¿¯ä»°è§’ï¼ˆåœ¨ä¸œåŒ—åœ°é¢æ¡†æ¶ä¸­ï¼ŒåŒ—ä¸ºçœŸåŒ—ï¼‰ FlightXSpeed=â€+6.60â€ åŒ—æ–¹åœ°é¢é€Ÿåº¦ï¼ˆm / sï¼‰ FlightYSpeed=â€-5.20â€ ä¸œæ–¹åœ°é¢é€Ÿåº¦ï¼ˆm / sï¼‰ FlightZSpeed=â€+0.00â€ å‚ç›´åœ°é¢é€Ÿåº¦ï¼ˆm / sï¼‰ CalibratedFocalLength=â€3666.666504â€ é•œå¤´çš„è®¾è®¡ç„¦è·ï¼Œå•ä½ï¼šåƒç´ ã€‚ CalibratedOpticalCenterX=â€2736.000000â€ å…‰å­¦è®¾è®¡ä½ç½®çš„ X è½´åæ ‡ä¸­å¿ƒï¼Œå•ä½ï¼šåƒç´ ã€‚ CalibratedOpticalCenterY=â€1824.000000â€ å…‰å­¦è®¾è®¡ä½ç½®çš„ Y è½´åæ ‡ä¸­å¿ƒï¼Œå•ä½ï¼šåƒç´ ã€‚ RtkFlag=â€50â€ RTK çŠ¶æ€ã€‚ï¼ˆå‰é¢æ–‡ç« æœ‰è¯´æ˜ï¼‰å¤§ç–†/åƒå¯»å«æ˜Ÿåå¤„ç†è§£ç®—ä¿¡æ¯è¯´æ˜ RtkStdLon=â€0.01160â€ ç…§ç‰‡è®°å½•çš„æ ‡å‡†åå·®ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰åœ¨ç»åº¦æ–¹å‘ä¸Šçš„ä½ç½®ã€‚å½“æ ‡å‡†å›¾åƒçš„åå·®å¤§äº 0.1ï¼Œä¸ºå»ºè®®ä¸è¦ä½¿ç”¨æ­¤ç…§ç‰‡ã€‚ RtkStdLat=â€0.01095â€ ç…§ç‰‡è®°å½•çš„æ ‡å‡†åå·®ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰åœ¨çº¬åº¦æ–¹å‘ä¸Šçš„ä½ç½®ã€‚å½“æ ‡å‡†å›¾åƒçš„åå·®å¤§äº 0.1ï¼Œä¸ºå»ºè®®ä¸è¦ä½¿ç”¨æ­¤ç…§ç‰‡ã€‚ RtkStdHgt=â€0.02918â€ ç…§ç‰‡è®°å½•çš„æ ‡å‡†åå·®ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰åœ¨é«˜åº¦æ–¹å‘ä¸Šçš„ä½ç½®ã€‚å½“æ ‡å‡†å›¾åƒçš„åå·®å¤§äº 0.1ï¼Œä¸ºå»ºè®®ä¸è¦ä½¿ç”¨æ­¤ç…§ç‰‡ã€‚ DewarpData= â€œâ€¦ â€¦â€ ç•¸å˜çº æ­£å‚æ•°ã€‚ï¼ˆå‰é¢æ–‡ç« æœ‰è¯´æ˜ï¼‰ç›¸æœºå†…å‚å’Œç•¸å˜æ ¡æ­£å‚æ•°è¯´æ˜ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/categories/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"}],"author":null},{"title":"metashape-cluster","slug":"metashape-cluster","date":"2020-11-10T13:23:19.000Z","updated":"2021-05-06T07:08:28.957Z","comments":true,"path":"2020/11/10/metashape-cluster/","link":"","permalink":"https://tanghaojie.github.io/2020/11/10/metashape-cluster/","excerpt":"","text":"1.æ‰€æœ‰ç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘ï¼Œè®¾ç½®å›ºå®š IP åœ°å€ï¼Œä½¿ç”¨åƒå…†äº¤æ¢æœºï¼ˆå¦‚æœåªæœ‰ä¸¤å°è®¾å¤‡ï¼Œå¯ä»¥é‡‡ç”¨ç½‘çº¿ç›´è¿ï¼‰ã€‚ 2.å…±äº«ç½‘ç»œæ–‡ä»¶å¤¹ï¼Œå³é”®éœ€å…±äº«çš„å·¥ç¨‹ç›®å½•æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©å±æ€§-å…±äº«ï¼Œé€‰æ‹© everyoneï¼Œç‚¹å‡»å…±äº«ã€‚é€‰æ‹©é«˜çº§å…±äº«ï¼Œæ‰“å‹¾å…±äº«æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»æƒé™ï¼Œé€‰æ‹© everyoneï¼Œæƒé™é€‰æ‹©å®Œå…¨æ§åˆ¶ã€‚ 3.æ‰“å¼€è½¯ä»¶ï¼Œèœå•æ å·¥å…·â€”â€”åå¥½è®¾ç½®â€”â€”ç½‘ç»œï¼Œå‹¾é€‰ networkï¼Œå¡«å…¥æœåŠ¡ç«¯ IP åœ°å€ï¼ˆä¸èƒ½ä½¿ç”¨ 127.0.0.1ï¼‰å’Œé¡¹ç›®æ‰€åœ¨ç›®å½•ï¼ˆå°±æ˜¯ä¸Šé¢å…±äº«çš„ç›®å½•ï¼‰ã€‚ 4.ä½œä¸ºæœåŠ¡ç«¯çš„ç”µè„‘ï¼Œæ‰“å¼€ cmdï¼Œè¾“å…¥ï¼ˆä¸èƒ½å‡ºç°ä¸­æ–‡å­—ç¬¦ï¼‰ï¼šâ€œC\\Program Files\\Agisoft\\Metashape Pro\\Metashape.exeâ€ --server --control 192.168.0.1:5840 --dispatch 192.168.0.1:5841ã€‚ä¹Ÿå¯ä»¥æŠŠè¿™æ®µè¯ä¿å­˜æˆï¼šserver.bat æ–‡ä»¶ï¼Œæ‰“å¼€å°±è‡ªåŠ¨æ‰§è¡Œäº†ã€‚ 5.ä½œä¸ºèŠ‚ç‚¹çš„ç”µè„‘ï¼Œæ‰“å¼€ cmdï¼Œè¾“å…¥ï¼ˆä¸èƒ½å‡ºç°ä¸­æ–‡å­—ç¬¦ï¼‰ï¼š\"C:\\Program Files\\Agisoft\\Metashape Pro\\Metashape.exe\" --node --dispatch 192.168.0.1:5841 --root \\\\DESKTOP-PC\\Clusterï¼Œâ€“dispatch å‚æ•°è¦ä¸€æ ·ï¼Œâ€“root å°±æ˜¯ä¿å­˜é¡¹ç›®æ‰€æœ‰æ–‡ä»¶çš„å…±äº«æ–‡ä»¶å¤¹ï¼Œå…±äº«ç›®å½•åç”¨è®¡ç®—æœºåçš„å½¢å¼ï¼Œåˆ«ç”¨ ip å½¢å¼ã€‚åŒæ ·ä¹Ÿå¯ä»¥ä¿å­˜æˆï¼šnode.batï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚ 6.æ‰“å¼€ Agisoft Network Monitorï¼Œè¾“å…¥ä¸»æœºçš„ ip å’Œç«¯å£ï¼Œç‚¹å‡» connectï¼Œå°±å¯ä»¥æŸ¥çœ‹è¿æ¥çš„ç”µè„‘äº†ã€‚ 7.æ‰“å¼€è½¯ä»¶ï¼ŒæŒ‰ç…§æ­£å¸¸æµç¨‹åˆ›å»ºå·¥ç¨‹åä¿å­˜ï¼Œä¸€å®šè¦ä¿å­˜åˆ°å…±äº«ç›®å½•ä¸‹é¢ã€‚ä¹‹åè¿›è¡Œè¿ç®—çš„æ—¶å€™è½¯ä»¶ä¼šè¯¢é—®æ˜¯å¦é€šè¿‡é›†ç¾¤è¿›è¡Œè®¡ç®—ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[],"tags":[],"author":null},{"title":"Agisoft photoscan/metashape ä½¿ç”¨æ•™ç¨‹","slug":"metashape-workflow","date":"2020-11-10T11:51:49.000Z","updated":"2021-05-06T07:08:47.053Z","comments":true,"path":"2020/11/10/metashape-workflow/","link":"","permalink":"https://tanghaojie.github.io/2020/11/10/metashape-workflow/","excerpt":"","text":"Photoscanï¼Œæ–°ç‰ˆæœ¬æ”¹åå« Metashape äº†ï¼Œç›¸è¾ƒäº context captureï¼ˆsmart3dï¼‰è¿›è¡Œç©ºä¸‰è®¡ç®—æ•ˆæœæ›´å¥½ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œé…ç½®æ›´çµæ´»ï¼Œç©ºä¸‰ç»“æœå¯ä»¥å¯¼å…¥ context capture è¿›è¡Œä¸‰ç»´é‡å»ºã€‚å› æ­¤ï¼Œæˆ‘ç»å¸¸ä½¿ç”¨ Metashape è¿›è¡Œç©ºä¸‰å¤„ç†å’Œ DOM ç”Ÿæˆï¼Œç„¶åå†ç”¨ cc è¿›è¡Œä¸‰ç»´é‡å»ºï¼Œå¯ä»¥æ˜¾è‘—æé«˜å¤„ç†é€Ÿåº¦ã€‚è€Œä¸”ä¸¤ä¸ªè½¯ä»¶éƒ½æ”¯æŒé›†ç¾¤å¤„ç†ï¼Œæ‰€éœ€ç¯å¢ƒä¿æŒä¸€è‡´ä¹Ÿä¸ä¼šå†²çªã€‚ä¸‹é¢å¼€å§‹ä½œä¸šæµç¨‹ã€‚ å¯¼å…¥ç…§ç‰‡ï¼ŒPOSï¼Œå‡†ç¡®æ€§è°ƒæ•´1.å¦‚æœæ‚¨åœ¨ EXIF æ ‡ç­¾ä¸­å­˜å‚¨äº†ä½ç½®ç²¾åº¦ï¼šè½¬åˆ°â€œå·¥å…·â€èœå•-&gt;â€œé¦–é€‰é¡¹â€¦â€-&gt;â€œé«˜çº§â€é€‰é¡¹å¡ï¼Œç„¶åé€‰ä¸­â€œä» XMP å…ƒæ•°æ®åŠ è½½ç›¸æœºä½ç½®ç²¾åº¦â€ã€‚ 2.åœ¨ Metashape ä¸­æ·»åŠ ç…§ç‰‡ï¼šâ€œå·¥ä½œæµç¨‹â€-&gt;â€œæ·»åŠ ç…§ç‰‡â€¦â€ã€‚ 3.å¦‚æœæ˜¯æ²¡æœ‰ POS çš„ç…§ç‰‡ï¼šå¯¼å…¥ç›¸æœºä½ç½®ã€‚é€šè¿‡å•å‡»â€œå‚è€ƒâ€çª—å£ä¸­çš„â€œå¯¼å…¥â€æŒ‰é’®å¯¼å…¥ POSã€‚ç¡®ä¿ä¸ºæ–‡ä»¶é€‰æ‹©æ­£ç¡®çš„åˆ—ã€‚å¦‚æœæ–‡ä»¶åŒ…å«è§’åº¦æ•°æ®ï¼Œè¯·é€‰ä¸­â€œåŠ è½½è§’åº¦â€å¤é€‰æ¡†ï¼Œç„¶åé€‰æ‹©å³åˆ—ã€‚é€‰æ‹©å­˜å‚¨ç›¸æœºä½ç½®çš„åæ ‡ç³»ã€‚å¦‚æœæ‚¨æœ‰ç²¾åº¦ä¼°ç®—ï¼Œä¹Ÿå¯ä»¥åŠ è½½å®ƒä»¬ã€‚ 4.å¦‚æœæ‚¨çš„ç›¸æœºç›¸å¯¹æ— äººæœºæœºå¤´å­˜åœ¨æ—‹è½¬ï¼Œåˆ™éœ€è¦åœ¨â€œå·¥å…·â€-&gt;â€œç›¸æœºæ ¡å‡†â€¦â€ä¸‹æŒ‡å®šã€‚åœ¨â€œGPS/INS åç§»â€æ ‡ç­¾ä¸‹ï¼Œå°†â€œåè½¬ï¼ˆåº¦ï¼‰â€â€‹â€‹ æŒ‡å®šä¸º 90 æˆ–æ‚¨æ—‹è½¬çš„è§’åº¦ã€‚ 5.æ£€æŸ¥è®¾ç½®ã€‚å•å‡»â€œå‚è€ƒâ€çª—å£ä¸­çš„â€œè®¾ç½®â€æŒ‰é’®ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æ–¹å‘æ•°æ®ï¼Œä½†å°šæœªå¯¼å…¥æ–¹å‘ç²¾åº¦ï¼Œåˆ™å»ºè®®æ‚¨åœ¨ä¸ç¡®å®šæ˜¯å¦å…·æœ‰æ¯”å…¶æ›´å¥½çš„ç²¾åº¦çš„æƒ…å†µä¸‹ï¼Œå°†ç²¾åº¦æé«˜åˆ° 10-20 åº¦ã€‚ ç…§ç‰‡è´¨é‡1.Metashape å¯ä»¥è‡ªåŠ¨ä¼°è®¡ç…§ç‰‡è´¨é‡ã€‚å»ºè®®ç¦ç”¨è´¨é‡å€¼å°äº 0.5 ä¸ªå•ä½çš„å›¾åƒï¼Œå¹¶å°†å…¶æ’é™¤åœ¨æ‘„å½±æµ‹é‡å¤„ç†ä¹‹å¤–ã€‚ 2.é€šè¿‡åœ¨å‚è€ƒçª—å£ä¸­å³é”®å•å‡»ç…§ç‰‡ï¼Œé€‰æ‹©â€œä¼°è®¡å›¾åƒè´¨é‡â€¦â€ï¼Œç„¶åé€‰æ‹©â€œæ‰€æœ‰ç›¸æœºâ€ï¼Œå¯ä»¥ä¼°è®¡å›¾åƒè´¨é‡ã€‚ 3.è¦æ˜¾ç¤ºç…§ç‰‡çš„ä¼°è®¡å›¾åƒè´¨é‡ï¼Œè¯·åœ¨â€œç…§ç‰‡â€çª—æ ¼ä¸­å°†æŸ¥çœ‹æ¨¡å¼æ›´æ”¹ä¸ºâ€œè¯¦ç»†ä¿¡æ¯â€ã€‚ 4.æ‚¨ç°åœ¨å¯ä»¥æŒ‰â€œè´¨é‡â€åˆ—è¿›è¡Œæ’åºã€‚é€‰æ‹©è´¨é‡ä½äº 0.5 çš„ç…§ç‰‡å¹¶å°†å…¶ç¦ç”¨ã€‚ å¯¹é½ç…§ç‰‡1.å¯¹é½æ‚¨çš„ç…§ç‰‡ï¼šâ€œå·¥ä½œæµç¨‹â€-&gt;â€œå¯¹é½ç…§ç‰‡â€¦â€ã€‚å°†â€œç²¾åº¦â€è®¾ç½®ä¸ºâ€œé«˜â€ï¼ˆåªéœ€è¦ DOMã€DSMã€DEMï¼Œä¸éœ€è¦é«˜ç²¾åº¦æ¨¡å‹çš„æ—¶å€™ï¼Œç”¨â€œä½â€å°±å®Œå…¨å¤Ÿäº†ï¼‰ï¼Œå°†â€œæˆå¯¹é¢„é€‰â€è®¾ç½®ä¸ºâ€œå‚è€ƒâ€ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨â€œæœ€é«˜â€ï¼Œä½†æ˜¯ä¼šèŠ±è´¹æ›´é•¿çš„æ—¶é—´ã€‚é˜…è¯»æ‰‹å†Œä¸­çš„å‡†ç¡®åº¦ç­‰çº§æ˜¯ä»€ä¹ˆæ„æ€ã€‚å¯èƒ½æœ‰å¿…è¦è°ƒæ•´â€œå…³é”®ç‚¹â€å’Œâ€œè”ç³»ç‚¹â€é™åˆ¶ï¼Œä»¥åŠ å¿«å¤„ç†é€Ÿåº¦ã€‚â€œè‡ªé€‚åº”ç›¸æœºæ¨¡å‹æ‹Ÿåˆâ€å°†ä½¿ Metashape æ ¹æ®å…¶å¯é æ€§ä¼°ç®—å€¼æ¥é€‰æ‹©åº”åŒ…å«åœ¨è°ƒæ•´ä¸­çš„ç›¸æœºå‚æ•°ã€‚ 2.å¯¹é½å®Œæˆåï¼Œæµè§ˆç…§ç‰‡ï¼Œç„¶åä¾æ¬¡å–æ¶ˆé€‰ä¸­å’Œç¦ç”¨ç…§ç‰‡å—ã€‚å®Œæˆæ­¤æ“ä½œåï¼Œè¿è¡Œâ€œä¼˜åŒ–æ‘„åƒæœºâ€¦â€ã€‚å‹¾é€‰ï¼šfï¼Œcxï¼Œcyï¼Œk1ï¼Œk2ï¼Œk3ï¼Œp1ï¼Œp2ã€‚ 3.åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·å¤åˆ¶æ‚¨çš„å—ã€‚å¦‚æœåœ¨ä»¥ä¸‹æ­¥éª¤ä¸­å‡ºç°é—®é¢˜ï¼Œåˆ™å¯ä»¥è¿”å›åˆ°å‰¯æœ¬ã€‚ 4.ä½¿ç”¨æ‰‹åŠ¨é€‰æ‹©å·¥å…·åˆ é™¤ç¨€ç–ç‚¹äº‘ä¸­æ˜æ˜¾çš„ç¦»ç¾¤ç‚¹ã€‚ç„¶åè¿è¡Œâ€œä¼˜åŒ–ç›¸æœºâ€¦â€ï¼ˆå‹¾é€‰ï¼šfï¼Œcxï¼Œcyï¼Œk1ï¼Œk2ï¼Œk3ï¼Œp1ï¼Œp2ï¼‰ã€‚ 5.ä½¿ç”¨â€œæ¨¡å‹â€èœå•ä¸‹çš„â€œé€æ­¥é€‰æ‹©â€¦â€ã€‚å‘è¿‡æ»¤å™¨æ¨èä¸€å®šçš„å€¼æ˜¯å¾ˆå›°éš¾çš„ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯éå†è¿™äº›è¿‡æ»¤å™¨ä»¥å®ç°è¯¯å·®å¾ˆå°çš„ç‚¹äº‘ã€‚æŒ‡å®šçš„å€¼åº”è§†ä¸ºå»ºè®®å€¼ï¼Œå¹¶ä¸”å–å†³äºæ•°æ®çš„è´¨é‡ã€‚ä½¿ç”¨ä»¥ä¸‹è¿‡æ»¤å™¨ï¼š å›¾åƒè®¡æ•°ã€‚å¦‚æœæ‚¨çš„æ•°æ®åº”è¯¥è¦†ç›–ä¸¤å¼ ä»¥ä¸Šçš„ç…§ç‰‡ï¼ˆä¾‹å¦‚ï¼Œæ‰“å¼€çš„åŒºåŸŸå’Œæ¸…æ™°çš„åŒºåŸŸï¼‰ï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å›¾åƒè®¡æ•°=2ï¼Œå¯¹äºåœ°é¢æ¤è¢«æ¯”è¾ƒå¤šçš„æ•°æ®ï¼Œè¯·è·³è¿‡è¿™ä¸€æ­¥ã€‚ä½¿ç”¨ä¸ä»¥å‰ç›¸åŒçš„å‚æ•°è¿è¡Œâ€œä¼˜åŒ–æ‘„åƒæœºâ€¦â€ã€‚ é‡å»ºä¸ç¡®å®šæ€§ï¼ˆå‡ ä½•å½¢çŠ¶ï¼‰ã€‚ä½¿ç”¨æ»‘å—è°ƒæ•´åˆé€‚çš„å€¼ä»¥é€‰æ‹©ä¸ç¡®å®šæ€§é«˜çš„ç‚¹ã€‚æ¨èå€¼ï¼š50 åˆ° 25ã€‚æŒ‰ OKï¼Œç„¶åæŒ‰é”®ç›˜ä¸Šçš„ Delete åˆ é™¤ç‚¹ã€‚ä½¿ç”¨ä¸ä»¥å‰ç›¸åŒçš„å‚æ•°è¿è¡Œâ€œä¼˜åŒ–æ‘„åƒæœºâ€¦â€ã€‚é‡å¤è‡³å°‘ 2 æ¬¡ã€‚ æŠ•å½±ç²¾åº¦ï¼ˆåƒç´ åŒ¹é…è¯¯å·®ï¼‰ã€‚ä½¿ç”¨æ»‘å—è°ƒæ•´åˆé€‚çš„å€¼ä»¥é€‰æ‹©ä¸ç¡®å®šæ€§é«˜çš„ç‚¹ã€‚æ¨èå€¼ï¼š10 åˆ° 8ã€‚æŒ‰ OKï¼Œç„¶åæŒ‰é”®ç›˜ä¸Šçš„ Delete åˆ é™¤ç‚¹ã€‚ä½¿ç”¨ä¸ä»¥å‰ç›¸åŒçš„å‚æ•°è¿è¡Œâ€œä¼˜åŒ–æ‘„åƒæœºâ€¦â€ã€‚é‡å¤æ­¤è¿‡æ»¤å™¨å’Œä¼˜åŒ–è¿‡ç¨‹è‡³å°‘ 2 æ¬¡ã€‚ é€‰ä¸­æ‰€æœ‰å‚æ•°åï¼Œâ€œä¼˜åŒ–ç›¸æœºâ€¦â€ã€‚ å¦‚æœæ‚¨æœ‰åœ°é¢æ§åˆ¶ç‚¹ï¼ˆGCPï¼‰ï¼Œè¯·å…ˆå°†å…¶å¯¼å…¥ï¼Œç„¶åå†ç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥ï¼ˆé‡æ–°æŠ•å½±é”™è¯¯ï¼‰ã€‚è¯·å‚é˜…ä¸‹æ–‡ï¼Œäº†è§£å¦‚ä½•å¯¼å…¥ GCPã€‚ é‡æŠ•å½±è¯¯å·®ï¼ˆåƒç´ æ®‹ç•™è¯¯å·®ï¼‰ã€‚ä½¿ç”¨æ»‘å—è°ƒæ•´åˆé€‚çš„å€¼ä»¥é€‰æ‹©ä¸ç¡®å®šæ€§é«˜çš„ç‚¹ã€‚æ¨èå€¼ï¼š1 åˆ° 0.5ã€‚æŒ‰ OKï¼Œç„¶åé€šè¿‡æŒ‰é”®ç›˜ä¸Šçš„ Delete åˆ é™¤ç‚¹ã€‚é€‰ä¸­æ‰€æœ‰å‚æ•°ï¼Œè¿è¡Œâ€œä¼˜åŒ–æ‘„åƒæœºâ€¦â€ã€‚é‡å¤è‡³å°‘ 2 æ¬¡ã€‚ åœ°é¢æ§åˆ¶ç‚¹ï¼ˆGCPï¼‰ä»…å½“æ‚¨å·²é‡‡é›†åœ°é¢æ§åˆ¶ç‚¹æ—¶æ‰æ‰§è¡Œæ­¤æ­¥éª¤ã€‚ 1.å¦‚æœåœ°é¢æ§åˆ¶ç‚¹ï¼ˆGCPï¼‰ä¸å›¾åƒä½äºä¸åŒçš„åæ ‡ç³»ä¸­ï¼Œåˆ™ç°åœ¨éœ€è¦åœ¨å¯¼å…¥ä¹‹å‰å°†é¡¹ç›®è½¬æ¢ä¸ºä¸ GCP ç›¸åŒçš„åæ ‡ç³»ã€‚å•å‡»â€œå‚è€ƒâ€çª—å£ä¸­çš„â€œè½¬æ¢â€æŒ‰é’®å³å¯å®Œæˆæ­¤æ“ä½œã€‚ï¼ˆæ–°ç‰ˆæœ¬å·²ç»æ”¯æŒç…§ç‰‡ã€åœ°é¢æ§åˆ¶ç‚¹é‡‡ç”¨å„è‡ªç‹¬ç«‹çš„åæ ‡ç³»ï¼‰ 2.é€šè¿‡å•å‡»â€œå‚è€ƒâ€çª—å£ä¸­çš„â€œå¯¼å…¥â€æŒ‰é’®å¯¼å…¥ GCPã€‚ 3.æ¯ä¸ª GCPï¼ˆç”šè‡³ç…§ç‰‡ï¼‰çš„ç²¾åº¦å¯ä»¥é€šè¿‡ä¸‰ç§ä¸åŒçš„æ–¹å¼è®¾ç½®ï¼šxï¼Œy å’Œ z çš„ç²¾åº¦ä¸º 0.1mï¼š0.1ã€‚x å’Œ y çš„ç²¾åº¦ä¸º 0.1mï¼Œz ç²¾åº¦ä¸º 0.5mï¼š0.1/0.5ã€‚x çš„ç²¾åº¦ä¸º 0.1mï¼Œy çš„ç²¾åº¦ä¸º 0.2mï¼Œz çš„ç²¾åº¦ä¸º 0.5mï¼š0.1/0.2/0.5ã€‚ 4.åˆºç‚¹ã€‚æ‚¨å¯ä»¥å³é”®å•å‡» GCPï¼Œç„¶åé€‰æ‹©â€œæŒ‰é€‰æ‹©è¿‡æ»¤ç…§ç‰‡â€¦â€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨â€œå‘ä¸Šç¿»é¡µâ€å’Œâ€œå‘ä¸‹ç¿»é¡µâ€é”®åœ¨ç…§ç‰‡ä¹‹é—´åˆ‡æ¢ã€‚å°†æ¯ä¸ªæ ‡è®°è‡³å°‘æ”¾ç½®åœ¨ä¸¤å¼ ç…§ç‰‡ä¸­ã€‚æ—¶å¸¸è¿è¡Œâ€œä¼˜åŒ–ç›¸æœºâ€¦â€ä»¥æ”¹å–„æœªæ”¾ç½®æ ‡è®°çš„ä½ç½®ã€‚5.â€œä¼˜åŒ–ç›¸æœºâ€¦â€ã€‚å¦‚æœæ‚¨çš„ GCP ç²¾åº¦å¾ˆé«˜ï¼Œåˆ™åº”å…ˆå–æ¶ˆé€‰ä¸­æ‰€æœ‰ç…§ç‰‡ï¼Œç„¶åå†å•å‡»â€œä¼˜åŒ–ç›¸æœºâ€¦â€ã€‚ç¡®ä¿å·²æ£€æŸ¥æ‰€æœ‰è¦ä½¿ç”¨çš„ GCPï¼Œå¹¶ä¸”å®ƒä»¬å…·æœ‰æ­£ç¡®çš„ç²¾åº¦è®¾ç½®ã€‚å¯¹äºä½¿ç”¨ DJI æ— äººé©¾é©¶é£æœºæ‹æ‘„çš„ç…§ç‰‡ï¼Œå…¶æµ·æ‹”è´¨é‡ä¸ä½³ï¼Œå› æ­¤ï¼Œåœ¨è¿è¡Œâ€œä¼˜åŒ–ç›¸æœºâ€¦â€å¹¶è¿›è¡Œå¤„ç†ä¹‹å‰ï¼Œåº”å§‹ç»ˆå–æ¶ˆé€‰ä¸­ç…§ç‰‡ï¼ˆè‡³å°‘é€‚ç”¨äº 2018 å¹´ä¹‹å‰çš„ DJI æ— äººæœºï¼‰ã€‚ 6.å®Œæˆä¸Šè¿°æ­¥éª¤åï¼ŒGCP ä¸­çš„è¯¯å·®åº”è¯¥å¾ˆå°ï¼ˆå¦‚æœä½¿ç”¨ RTK GNSS æ¥æ”¶å™¨ï¼Œåˆ™è¯¯å·®çº¦ä¸º 5-20 å˜ç±³ï¼‰ã€‚ å¯†é›†ç‚¹äº‘å’Œæ­£å°„ç…§ç‰‡1.ç°åœ¨ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ‰§è¡Œæ‰¹å¤„ç†è„šæœ¬ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¿è¡Œå®ƒä»¬ã€‚ 2.å»ºç«‹å¯†é›†çš„äº‘ï¼ˆå¦‚æœä¸è¿›è¡Œæ¨¡å‹é‡å»ºå¯ä»¥ä¸è¿›è¡Œè¿™ä¸€æ­¥ï¼‰ã€‚ä½¿ç”¨â€œé«˜â€è´¨é‡ï¼ˆå¾ˆå°‘ä½¿ç”¨â€œè¶…é«˜â€ï¼Œå› ä¸ºå®ƒéœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå¹¶ä¸”é€šå¸¸ç…§ç‰‡çš„è´¨é‡ä¸é«˜ã€‚è¯·é˜…è¯»æ‰‹å†Œä¸­çš„æ›´å¤šå†…å®¹ï¼‰ã€‚å°†æ·±åº¦è¿‡æ»¤è®¾ç½®ä¸ºâ€œè½»å¾®â€ã€‚ 3.æ„å»ºç½‘æ ¼ï¼ˆé€šå¸¸ä»ç¨€ç–äº‘ä¸­ç”Ÿæˆï¼‰ã€‚ 4.å¹³æ»‘ç½‘æ ¼ï¼ˆå·¥å…·-&gt;ç½‘æ ¼-&gt;å¹³æ»‘ç½‘æ ¼ï¼‰ã€‚ 5.ä½¿ç”¨ç¨€ç–äº‘ä¸­çš„ç½‘æ ¼åˆ›å»ºæ­£å°„ç…§ç‰‡ã€‚ 6.ä¾‹å¦‚ï¼Œå°†æ­£ç…§ç‰‡å¯¼å‡ºä¸º tifã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[],"tags":[],"author":null},{"title":"å¤§ç–†/åƒå¯»å«æ˜Ÿåå¤„ç†è§£ç®—ä¿¡æ¯è¯´æ˜","slug":"DJI-PPK-Format-Meaning","date":"2020-11-05T13:01:37.000Z","updated":"2021-05-06T07:08:11.222Z","comments":true,"path":"2020/11/05/DJI-PPK-Format-Meaning/","link":"","permalink":"https://tanghaojie.github.io/2020/11/05/DJI-PPK-Format-Meaning/","excerpt":"","text":"å¤§ç–† PPK æ–‡ä»¶ä¹Ÿæ˜¯ç”¨çš„åƒå¯»è§£ç®—ï¼Œæ ¼å¼ä¸€æ ·ã€‚ åˆ—å­—æ®µ å•ä½ è¯´æ˜ Station - è½¨è¿¹ç‚¹åºåˆ— Timestamp(ms) æ¯«ç§’ UTC æ—¶é—´æˆ³ GPSWeek - GPS å‘¨ TOW(s) ç§’ å‘¨å†…ç§’ Latitude(deg) åº¦ çº¬åº¦ Longitude(deg) åº¦ ç»åº¦ H-Ell(m) ç±³ æ¤­çƒé«˜ç¨‹ X(m) ç±³ é«˜æ–¯å¹³é¢åæ ‡ç³» Xï¼ˆå¦‚æœæŒ‡å®šã€ä¸­å¤®å­åˆçº¿ã€åˆ™æœ‰æ­¤è¾“å‡ºå­—æ®µï¼‰ Y(m) ç±³ é«˜æ–¯å¹³é¢åæ ‡ç³» Yï¼ˆå¦‚æœæŒ‡å®šã€ä¸­å¤®å­åˆçº¿ã€åˆ™æœ‰æ­¤è¾“å‡ºå­—æ®µï¼‰ SDNorth(m) ç±³ åŒ—æ–¹å‘æ ‡å‡†å·® SDEast(m) ç±³ ä¸œæ–¹å‘æ ‡å‡†å·® SDHeight(m) ç±³ é«˜ç¨‹æ ‡å‡†å·® Q - è§£ç®—è´¨é‡æ ‡å¿—ä½ï¼š1ï¼šå›ºå®šè§£(å¤§ç–†ï¼š50)ï¼›2ï¼šæµ®ç‚¹è§£(å¤§ç–†ï¼š34)ï¼›3ï¼šå•ç‚¹è§£(å¤§ç–†ï¼š16)ï¼›4ï¼šæœªè§£å‡º(å¤§ç–†ï¼š0)ï¼› ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/categories/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"}],"author":null},{"title":"ç›¸æœºå†…å‚å’Œç•¸å˜æ ¡æ­£å‚æ•°è¯´æ˜","slug":"camera-calibrate","date":"2020-09-29T10:31:25.000Z","updated":"2021-05-06T07:08:02.134Z","comments":true,"path":"2020/09/29/camera-calibrate/","link":"","permalink":"https://tanghaojie.github.io/2020/09/29/camera-calibrate/","excerpt":"","text":"ä»¥å¤§ç–† Phantom4RTK ä¸ºä¾‹ï¼Œä»¥è®°äº‹æœ¬æ–¹å¼æ‰“å¼€ä»»æ„ä¸€å¼ ç…§ç‰‡ï¼Œæœç´¢DewarpDataï¼Œå¯ä»¥çœ‹åˆ°æ ¡æ­£å‚æ•°ï¼šdrone-dji:DewarpData=\" 2020-05-13;3714.070000000000,3707.070000000000,-8.280000000000,-17.520000000000,-0.279234000000,0.125598000000,0.001187790000,-0.000255019000,-0.041078200000\" å€¼é¡ºåºä¸ºï¼šcalibrate_date;fx,fy,cx,cy,k1,k2,p1,p2,k3 åˆ†åˆ«çš„æ„æ€ï¼š å­—æ®µ è¯´æ˜ calibrate_date æ ¡æ­£æ—¶é—´ fx ä»¥åƒç´ ä¸ºå•ä½æ ‡å®šå‡ºçš„ç„¦è· x åæ ‡ ç›¸æœºåƒç´ ç„¦è·åˆ™ä¸ºï¼š (fx + fy) / 2 åƒç´  fy ä»¥åƒç´ ä¸ºå•ä½æ ‡å®šå‡ºçš„ç„¦è· y åæ ‡ ç›¸æœºæ¯«ç±³ç„¦è·åˆ™ä¸ºï¼šï¼ˆPhantom4rtk ä¸€åƒå…ƒå°ºå¯¸ 2.4 å¾®ç±³ï¼‰(fx + fy) / 2 _ (2.4 _ 0.001) æ¯«ç±³ cx ä»¥åƒç´ ä¸ºå•ä½æ ‡å®šå‡ºçš„åƒä¸»ç‚¹ï¼ˆåŸç‚¹ä¸ºå½±åƒä¸­å¿ƒï¼‰x åæ ‡ å»ºå›¾è½¯ä»¶ï¼ˆPix4Dã€Context Capture ç­‰ï¼‰é»˜è®¤åŸç‚¹ä¸ºå½±åƒå·¦ä¸Šè§’ï¼Œæ‰€ä»¥è¦æ¢ç®—åˆ°å½±åƒä¸­å¿ƒã€‚ä»¥ Phantom4rtk ä¸ºä¾‹ï¼Œè‹¥ç…§ç‰‡æ¯”ä¾‹ä¸º 3:2ï¼Œåˆ™åƒç´ ä¸º 5472 _ 3648ã€‚ï¼ˆ4:3 åŒç†ï¼Œåƒç´ ä¸º 4864 _ 3648ï¼‰ cy ä»¥åƒç´ ä¸ºå•ä½æ ‡å®šå‡ºçš„åƒä¸»ç‚¹ï¼ˆåŸç‚¹ä¸ºå½±åƒä¸­å¿ƒï¼‰y åæ ‡ åƒä¸»ç‚¹ x = 5472 / 2 + cxï¼›åƒä¸»ç‚¹ y = 3648 / 2 + cyã€‚ k1 å¾„å‘ç•¸å˜æ ¡æ­£å‚æ•° k1 k2 å¾„å‘ç•¸å˜æ ¡æ­£å‚æ•° k2 k3 å¾„å‘ç•¸å˜æ ¡æ­£å‚æ•° k3 p1 åˆ‡å‘ç•¸å˜æ ¡æ­£å‚æ•° p1 p2 åˆ‡å‘ç•¸å˜æ ¡æ­£å‚æ•° p2 åœ¨çº¿ç•¸å˜å‚æ•°è®¡ç®—å™¨ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"tools","slug":"tools","permalink":"https://tanghaojie.github.io/categories/tools/"}],"tags":[{"name":"tools","slug":"tools","permalink":"https://tanghaojie.github.io/tags/tools/"}],"author":null},{"title":"DJIå¤§ç–†PPKåå·®åˆ†å¤„ç†æ–‡ä»¶å¯¼å…¥åƒæ§é¢„å¤„ç†","slug":"dji-ppk-file-process","date":"2020-09-22T11:08:38.000Z","updated":"2021-05-06T07:06:40.136Z","comments":true,"path":"2020/09/22/dji-ppk-file-process/","link":"","permalink":"https://tanghaojie.github.io/2020/09/22/dji-ppk-file-process/","excerpt":"","text":"å½±åƒæ–‡ä»¶åå‰ç¼€ é€‰æ‹©å¤§ç–†PPKåŸå§‹æ–‡ä»¶[result.csv] function handleUpload(e) { var file = e.target.files[0] fileReader.readAsText(file) } function handleCsv(csv) { let lines = csv.split(/[\\n]/) let count = lines.length let output = [] let prefix = document.querySelector('#prefix').value for (let i = 1; i < count; i++) { let line = lines[i] if (line === '' || line === null || line === undefined) { break } let datas = line.split(',') let id = datas[0] let latitude = datas[3] let longitude = datas[4] let height = datas[5] let Q = datas[9] if (Q !== '50') { alert('Some data not fixed!') } output.push(id) output.push(',') output.push(latitude) output.push(',') output.push(longitude) output.push(',') output.push(height) output.push(',') output.push(prefix) output.push(id.padStart(4, '0')) output.push('.JPG') output.push('\\r\\n') } return output.join('') } function saveFile(data, filename) { var file = new Blob([data]) console.log(file) if (window.navigator.msSaveOrOpenBlob) { // IE10+ window.navigator.msSaveOrOpenBlob(file, filename) } else { // Others var a = document.createElement('a'), url = URL.createObjectURL(file) a.href = url a.download = filename document.body.appendChild(a) a.click() setTimeout(function () { document.body.removeChild(a) window.URL.revokeObjectURL(url) }, 0) } } let fileReader = new FileReader() fileReader.onload = function () { let result = this.result let newCsv = handleCsv(result) let nowDate = new Date() let year = nowDate.getFullYear() let month = (nowDate.getMonth() + 1).toString().padStart(2, '0') let day = nowDate.getDate().toString().padStart(2, '0') let dateStr = year + '-' + month + '-' + day saveFile(newCsv, 'result_JTEdited' + dateStr + '.csv') } let contained = document.querySelector('#contained') contained.addEventListener('change', handleUpload) æ˜¾ç¤ºæ•ˆæœä¸å¥½ï¼Œç‚¹å‡»ä¸‹é¢æ‰“å¼€å•ç‹¬çš„ç½‘é¡µ ç‹¬ç«‹ç½‘é¡µçš„ç‰ˆæœ¬ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"tools","slug":"tools","permalink":"https://tanghaojie.github.io/categories/tools/"}],"tags":[{"name":"tools","slug":"tools","permalink":"https://tanghaojie.github.io/tags/tools/"}],"author":null},{"title":"QGISå°†æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰Esri Shapeè½¬æ¢ä¸ºKMLæ–‡ä»¶çš„pythonå¤„ç†ä»£ç ","slug":"qgis-shp2kml-py","date":"2020-09-22T11:07:42.000Z","updated":"2021-05-06T07:07:51.078Z","comments":true,"path":"2020/09/22/qgis-shp2kml-py/","link":"","permalink":"https://tanghaojie.github.io/2020/09/22/qgis-shp2kml-py/","excerpt":"","text":"import os dir = r'C:\\Users\\YourFolderPathContainShapefile' toDir = r'C:\\Users\\YourFolderPathKMLWillOutput' crs = QgsCoordinateReferenceSystem(4326) list = os.listdir(dir) for l in list: if not l.endswith('.shp'): continue inPath = os.path.join(dir, l) vl = QgsVectorLayer(inPath, l, 'ogr') valid = vl.isValid() if not vl.isValid(): print(inPath) print('invalid') continue toFile = os.path.join(toDir, l.replace('.shp', '.kml')) QgsVectorFileWriter.writeAsVectorFormat(vl, toFile, 'utf-8', crs, 'kml') ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/categories/QGIS/"},{"name":"python","slug":"QGIS/python","permalink":"https://tanghaojie.github.io/categories/QGIS/python/"}],"tags":[{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/tags/QGIS/"},{"name":"python","slug":"python","permalink":"https://tanghaojie.github.io/tags/python/"}],"author":null},{"title":"QGISæ·»åŠ å„å¤§åœ°å›¾æœåŠ¡çš„æ’ä»¶","slug":"qgis-add-map-services","date":"2020-09-22T10:43:43.000Z","updated":"2021-05-06T07:06:53.557Z","comments":true,"path":"2020/09/22/qgis-add-map-services/","link":"","permalink":"https://tanghaojie.github.io/2020/09/22/qgis-add-map-services/","excerpt":"","text":"åœ¨æ’ä»¶ä¸­æœç´¢å¹¶å®‰è£…QuickMapServicesæ’ä»¶ï¼Œç„¶åæ‰“å¼€æ’ä»¶çš„Settings -&gt; More Servicesï¼Œç‚¹å‡»Get contributed packè·å¾—æ‰€æœ‰æœåŠ¡ï¼Œå°±å¯ä»¥ç”¨æ·»åŠ æ·»åŠ å„ç§åœ°å›¾æœåŠ¡äº†ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/categories/QGIS/"}],"tags":[{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/tags/QGIS/"}],"author":null},{"title":"åæµ‹ã€ä¸­æµ·è¾¾ç­‰ç”¨RTKè¿›è¡ŒPPKåå·®åˆ†è§£ç®—æµ‹é‡","slug":"rtk-ppk","date":"2020-09-04T13:27:39.000Z","updated":"2021-05-06T07:06:23.614Z","comments":true,"path":"2020/09/04/rtk-ppk/","link":"","permalink":"https://tanghaojie.github.io/2020/09/04/rtk-ppk/","excerpt":"","text":"åæµ‹ã€ä¸­æµ·è¾¾ç­‰è¿™äº›å‚å•†éƒ½å¼€å§‹æä¾› PPK åå·®åˆ†è§£ç®—è½¯ä»¶äº†ã€‚ä½¿ç”¨å¾ˆç®€å•ï¼Œå…ˆå¾—åˆ° 1 ä¸ªï¼ˆ3 ä¸ªæœ€å¥½ï¼‰çš„å·²çŸ¥ç‚¹ï¼Œç„¶å RTK è®¾ç½®ä¸ºé™æ€æ¨¡å¼æ¶è®¾ä¸åŠ¨ã€‚æ— äººæœºæˆ–è€…å…¶ä»–è®¾å¤‡ç”¨ PPK æ¨¡å‹è¿›è¡Œæµ‹ç»˜ï¼Œä¹‹åå°±å¯ä»¥ç”¨è½¯ä»¶è§£ç®—äº†ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[],"tags":[],"author":null},{"title":"å¤§ç–†ç²¾çµPhantom4RTK PPKæ–‡ä»¶è¯´æ˜","slug":"phantom4RTK-ppk-file-formate","date":"2020-09-04T12:48:40.000Z","updated":"2021-05-06T07:06:09.879Z","comments":true,"path":"2020/09/04/phantom4RTK-ppk-file-formate/","link":"","permalink":"https://tanghaojie.github.io/2020/09/04/phantom4RTK-ppk-file-formate/","excerpt":"","text":"EVENTLOG.bin äºŒè¿›åˆ¶æ ¼å¼çš„æ›å…‰æ—¶é—´æˆ³è®°å½•æ–‡ä»¶ PPKRAW.bin RTCM3.2MSM5 æ ¼å¼çš„ç§»åŠ¨ç«¯å«æ˜Ÿè§‚æµ‹å€¼æ•°æ®åŠæ˜Ÿå†æ•°æ® PPKRAW.sig å®˜æ–¹æ²¡è§£é‡Šï¼ŒçŒœæµ‹æ˜¯ signatureã€‚èº«ä»½æ ¡éªŒæ–‡ä»¶ï¼Œç”¨äºæ ¡éªŒæ˜¯å¦ä¸ºè¯¥é£è¡Œå™¨ç”Ÿæˆçš„æ•°æ®ï¼Œå¦‚ä¸ºéè¯¥é£è¡Œå™¨ç”Ÿæˆçš„æ•°æ®å°†æ— æ³•åŠ è½½ã€‚ Rinex.obs å®æ–½è½¬ç å‡ºçš„ Rinex è§‚æµ‹å€¼æ–‡ä»¶ Timestamps.MRK ASCII æ ¼å¼çš„æ˜ç æ›å…‰æ—¶é—´æˆ³ï¼Œæ¯å¼ ç…§ç‰‡æ‹ç…§æ—¶åˆ»å®šä½ç»“æœï¼Œæ‹ç…§æ—¶åˆ»å®šä½çŠ¶æ€ï¼Œå®šä½æ ‡å‡†å·®ï¼Œæ‹ç…§æ—¶åˆ»ç­‰è®°å½•æ–‡ä»¶ã€‚æ ¼å¼è¯´æ˜ï¼šç¬¬ä¸€åˆ—ç…§ç‰‡çš„ç¼–å·ç¬¬äºŒåˆ—æ¯å¼ ç…§ç‰‡æ›å…‰æ—¶åˆ»çš„ UTC æ—¶é—´ï¼Œä»¥ GPS æ—¶é—´æ ¼å¼è¡¨ç¤ºæ—¶çš„å‘¨å†…ç§’éƒ¨åˆ†ã€‚ç¬¬ä¸‰åˆ—æ¯å¼ ç…§ç‰‡æ›å…‰æ—¶åˆ»çš„ UTC æ—¶é—´ï¼Œä»¥ GPS æ—¶é—´æ ¼å¼è¡¨ç¤ºæ—¶çš„ GPS å‘¨éƒ¨åˆ†ã€‚ç¬¬å››åˆ—æ¯å¼ ç…§ç‰‡æ›å…‰æ—¶åˆ»ç¬é—´å¤©çº¿ç›¸ä½ä¸­å¿ƒåˆ°ç›¸æœº CMOS ä¼ æ„Ÿå™¨ä¸­å¿ƒçš„åœ¨åŒ—æ–¹å‘ï¼ˆNï¼‰çš„åå·®ï¼Œå•ä½ä¸ºæ¯«ç±³ï¼ŒCMOS ä¸­å¿ƒåœ¨å¤©çº¿ç›¸ä½ä¸­å¿ƒååŒ—æ–¹å‘ä¸ºæ­£ï¼Œåå—æ–¹å‘ä¸ºè´Ÿã€‚ç¬¬äº”åˆ—æ¯å¼ ç…§ç‰‡æ›å…‰æ—¶åˆ»ç¬é—´å¤©çº¿ç›¸ä½ä¸­å¿ƒåˆ°ç›¸æœº CMOS ä¼ æ„Ÿå™¨ä¸­å¿ƒçš„åœ¨ä¸œæ–¹å‘ï¼ˆEï¼‰çš„åå·®ï¼Œå•ä½ä¸ºæ¯«ç±³ï¼ŒCMOS ä¸­å¿ƒåœ¨å¤©çº¿ç›¸ä½ä¸­å¿ƒåä¸œæ–¹å‘ä¸ºæ­£ï¼Œåè¥¿æ–¹å‘ä¸ºè´Ÿã€‚ç¬¬å…­åˆ—æ¯å¼ ç…§ç‰‡æ›å…‰æ—¶åˆ»ç¬é—´å¤©çº¿ç›¸ä½ä¸­å¿ƒåˆ°ç›¸æœº CMOS ä¼ æ„Ÿå™¨ä¸­å¿ƒçš„åœ¨å‚ç›´æ–¹å‘ï¼ˆVï¼‰çš„åå·®ï¼Œå•ä½ä¸ºæ¯«ç±³ï¼ŒCMOS ä¸­å¿ƒåœ¨å¤©çº¿ç›¸ä½ä¸­å¿ƒåä¸‹ä¸ºæ­£ï¼Œåä¸Šä¸ºè´Ÿã€‚ç¬¬ä¸ƒåˆ—æ›å…‰æ—¶åˆ»è·å–çš„ CMOS ä¸­å¿ƒçš„å®æ—¶ä½ç½®çº¬åº¦ï¼ˆLatï¼‰ï¼Œå•ä½ä¸ºåº¦ã€‚å½“é£æœºå®šä½å¤„äº RTK æ¨¡å¼ä¸‹æ—¶ï¼Œæ­¤æ—¶çš„ä½ç½®ä¸º RTK ä½ç½®åŠ ä¸Šæ›å…‰æ—¶åˆ»å¤©çº¿ç›¸ä½ä¸­å¿ƒåˆ° CMOS ä¸­å¿ƒçš„ä½ç½®ï¼Œç²¾åº¦ä¸º RTK ç²¾åº¦ï¼ˆå˜ç±³çº§ï¼‰ï¼›å½“é£æœºå®šä½å¤„äº GPS æ¨¡å¼ä¸‹æ—¶ï¼Œæ­¤æ—¶çš„ä½ç½®ä¸º GPS å•ç‚¹å®šä½ä½ç½®åŠ ä¸Šæ›å…‰æ—¶åˆ»å¤©çº¿ç›¸ä½ä¸­å¿ƒåˆ° CMOS ä¸­å¿ƒçš„ä½ç½®ï¼Œç²¾åº¦ä¸º GPS å•ç‚¹å®šä½çš„ç²¾åº¦ï¼ˆç±³çº§ï¼‰ç¬¬å…«åˆ—æ›å…‰æ—¶åˆ»è·å–çš„ CMOS ä¸­å¿ƒçš„å®æ—¶ä½ç½®ç»åº¦ï¼ˆLonï¼‰ï¼Œå•ä½ä¸ºåº¦ã€‚ç¬¬ä¹åˆ—æ›å…‰æ—¶åˆ»è·å–çš„ CMOS ä¸­å¿ƒçš„å®æ—¶é«˜åº¦ï¼Œå•ä½ä¸ºç±³ã€‚è¯¥é«˜åº¦ä¸ºå¤§åœ°é«˜ï¼ˆä¿—ç§°æ¤­çƒé«˜ï¼‰ï¼Œï¼ˆç”¨æˆ·è‡ªè¡Œå®šä¹‰å…¶æ¤­çƒæ¨¡å‹ï¼Œé»˜è®¤ä¸º WGS84ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ¥å…¥ä¸åŒçš„ CORS ç«™ç³»ç»Ÿ/åŸºå‡†ï¼Œè®¾å®šå…¶ä¸ºå…¶ä»–æ¤­çƒï¼Œå¦‚ CGCS2000ï¼‰è¡¨é¢çš„é«˜åº¦ã€‚æ³¨æ„ï¼Œæ­¤é«˜åº¦å¹¶éåŸºäºå›½å®¶ 85 é«˜ç¨‹åŸºå‡†æˆ– 56 é«˜ç¨‹åŸºå‡†ï¼ˆæ­£å¸¸é«˜ï¼‰ï¼Œä¹Ÿå¹¶éåŸºäºå…¨çƒèŒƒå›´å†…æ¯”è¾ƒé€šç”¨çš„ EGM96/2008 é«˜ç¨‹åŸºå‡†ï¼ˆæ­£é«˜ï¼‰ã€‚ç¬¬åè‡³åäºŒåˆ—åŒ—ã€ä¸œã€å¤©ä¸‰ä¸ªæ–¹å‘å®šä½ç»“æœçš„æ ‡å‡†å·®ï¼Œè¡¨å¾åœ¨ä¸‰ä¸ªæ–¹å‘ä¸Šå®šä½çš„ç›¸å¯¹ç²¾åº¦ã€‚å•ä½ä¸ºç±³ç¬¬åä¸‰åˆ—ï¼ˆå¾ˆå¸¸ç”¨ï¼‰RTK çŠ¶æ€ä½ï¼š 0-æ— å®šä½ 16-å•ç‚¹å®šä½æ¨¡å¼ 34-RTK æµ®ç‚¹è§£ 50-RTK å›ºå®šè§£å½“æŸå¼ ç…§ç‰‡æ ‡å¿—ä½ä¸ä¸º 50 çš„æ—¶å€™ï¼Œä¸æ¨èä½¿ç”¨æ­¤ç…§ç‰‡ç›´æ¥è¿›è¡Œå»ºå›¾ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/categories/specification/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"}],"author":null},{"title":"æ— äººæœºå¤šå±‚èˆªçº¿å»ºæ¨¡å¤±è´¥è§£å†³æ–¹æ¡ˆ","slug":"uav-multi-height-route","date":"2020-09-04T12:27:05.000Z","updated":"2021-05-06T07:06:28.534Z","comments":true,"path":"2020/09/04/uav-multi-height-route/","link":"","permalink":"https://tanghaojie.github.io/2020/09/04/uav-multi-height-route/","excerpt":"","text":"æ— äººæœºèˆªæµ‹çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°ç©ºä¸­ç¯å¢ƒå¤ªæ¶åŠ£ï¼Œæ— æ³•æ­£å¸¸é£è¡Œçš„æƒ…å†µã€‚ä¸€èˆ¬çš„åšæ³•éƒ½æ˜¯å…ˆåšä¸€ä¸ªè¶…é«˜ç©ºé£è¡Œï¼Œä¿è¯è¦†ç›–èŒƒå›´å’Œæ•´ä½“çº¦æŸï¼Œç„¶åå¯¹ç‰¹å¾åœ°ç‰©ã€å±…æ°‘åœ°ã€å»ºç­‘ç‰©ç­‰ï¼Œè¿›è¡Œè¶…ä½ç©ºé£è¡Œä½œä¸ºè¡¥å……ï¼Œè¿™æ ·å°±é¿å¼€äº†ç©ºä¸­æ··ä¹±çš„ä½ç½®ã€‚ä½†é—®é¢˜æ˜¯è¶…é«˜ç©ºå’Œè¶…ä½ç©ºä¹‹é—´é‡å ç‡å¾ˆéš¾ä¿è¯ï¼Œå¯¼è‡´å»ºæ¨¡çš„æ—¶å€™ç»å¸¸é‡åˆ°é—®é¢˜ã€‚æœ€å¸¸è§çš„å°±æ˜¯åªä½¿ç”¨é«˜ç©ºç…§ç‰‡åšç‰¹å¾ç‚¹åŒ¹é…ï¼Œä½ç©ºçš„é«˜æ¸…æ™°åº¦ç…§ç‰‡è¢«æŠ›å¼ƒï¼›æˆ–è€…é«˜ä½ç©ºç…§ç‰‡æ··ç”¨ï¼Œä¸€å—æ¨¡ç³Šä¸€å—æ¸…æ™°ï¼Œæˆåƒä¸ç»Ÿä¸€ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œä¸€èˆ¬æœ‰å‡ ç§è§£å†³æ–¹æ¡ˆï¼š 1.å»ºæ¨¡æ—¶ä»é«˜ç©ºç…§ç‰‡ä¸­å‰”é™¤ä½ç©ºè¦†ç›–çš„éƒ¨åˆ†ã€‚ï¼ˆè¾¹ç¼˜è¿˜æ˜¯è¦ç•™ä¸‹ï¼Œä¿è¯æœ‰é‡å ç‡æ¥è¯†åˆ«ï¼‰ 2.æ¡ä»¶å…è®¸æ—¶æ‰©å¤§ä½ç©ºèˆªçº¿èŒƒå›´ï¼Œæé«˜ä½ç©ºé‡å ç‡ã€‚ 3.é«˜ä½ç©ºç…§ç‰‡åˆ†åˆ«å»ºæ¨¡ï¼Œå»ºæ¨¡å®Œæˆä»¥åå†åˆæ¨¡ã€‚ 4.å¦‚æœç”¨ context capture å»ºæ¨¡ï¼Œæ‰‹åŠ¨æ·»åŠ è¿æ¥ç‚¹å¼ºåˆ¶åŒ¹é…ã€‚ 5.å¦‚æœç”¨ context capture å»ºæ¨¡ï¼Œå»ºæ¨¡å‚æ•°è®¾ç½®ä¸ºé«˜ç‰¹å¾ç‚¹åŒ¹é…ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[],"tags":[],"author":null},{"title":"åœ°é¢é‡‡æ ·è·ç¦»(GSD)è®¡ç®—å™¨","slug":"gsd-calculator","date":"2020-08-14T07:39:31.000Z","updated":"2021-05-06T07:05:03.375Z","comments":true,"path":"2020/08/14/gsd-calculator/","link":"","permalink":"https://tanghaojie.github.io/2020/08/14/gsd-calculator/","excerpt":"","text":"ç‹¬ç«‹ç½‘é¡µçš„ç‰ˆæœ¬ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"tools","slug":"tools","permalink":"https://tanghaojie.github.io/categories/tools/"}],"tags":[{"name":"tools","slug":"tools","permalink":"https://tanghaojie.github.io/tags/tools/"}],"author":null},{"title":"qgisé€Ÿè®°","slug":"post","date":"2020-08-12T14:15:05.000Z","updated":"2021-05-06T07:04:38.644Z","comments":true,"path":"2020/08/12/post/","link":"","permalink":"https://tanghaojie.github.io/2020/08/12/post/","excerpt":"","text":"æŒ‰ç…§å‡ ä½•ä½ç½®æ’åºï¼Œå…¶ä¸­ 45 ä»£è¡¨ä¸œåŒ—æ–¹å‘ï¼Œå…¶ä»–æ–¹å‘æ’åºå¯ä»¥è‡ªå·±æŒ‡å®šï¼Œy æ­£è½´ï¼ˆåŒ—ï¼‰æ–¹å‘ä¸º 0 åº¦ï¼Œé¡ºæ—¶é’ˆæ—‹è½¬ sin(45) * x(centroid($geometry)) + cos(45) * y(centroid($geometry)) å­—æ®µé•¿åº¦ä¸è¶³è¡¥ 0ï¼Œ3 æ˜¯é•¿åº¦ï¼Œ0 æ˜¯ä¸è¶³çš„å·¦ä¾§è¡¥ 0 lpad(\"ä½ çš„å­—æ®µå\", 3, '0') ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/categories/QGIS/"}],"tags":[{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/tags/QGIS/"}],"author":null},{"title":"jenkinsä»githubæ‹‰å–nuxté¡¹ç›®éƒ¨ç½²åˆ°docker, windowså¹³å°","slug":"nuxt-docker","date":"2020-06-10T14:15:05.000Z","updated":"2021-05-06T07:03:40.342Z","comments":true,"path":"2020/06/10/nuxt-docker/","link":"","permalink":"https://tanghaojie.github.io/2020/06/10/nuxt-docker/","excerpt":"","text":"å‡†å¤‡ç¯å¢ƒ å¼€å‘ç¯å¢ƒï¼šwin10 æœåŠ¡å™¨ docker å®¿ä¸»ç¯å¢ƒï¼šwin10 docker ç¯å¢ƒï¼šlinux jenkins éƒ¨ç½²ç¯å¢ƒï¼šdocker é…ç½® jenkins æ’ä»¶ï¼šgithubã€gitã€publish over sshã€‚æå‰è¦åœ¨å…¨å±€å·¥å…·é…ç½®é‡Œé¢é…ç½® gitï¼Œç³»ç»Ÿé…ç½®é‡Œé¢é…ç½® github serverã€publish over SSHã€‚è¿™å¸¸ç”¨å·¥å…·ç½‘ä¸Šéƒ½æœ‰æ•™ç¨‹ï¼Œä¸å•ç‹¬è¯´äº†ã€‚æœ‰ä¸€ä¸ªå‘æ˜¯ï¼Œpublish over SSH è¿æ¥ OpenSSH for windowsï¼Œæˆ‘ç”¨ key å§‹ç»ˆä¸è¡Œï¼Œ ç‚¹ä¸‹é¢é«˜çº§ï¼Œç”¨æˆ·åå¯†ç æ¨¡å¼æå®šçš„ã€‚ æœåŠ¡å™¨ win10ï¼šOpenSSH for windowsè¿™ä¸ªéœ€è¦åœ¨ä½ çš„ win10 æœåŠ¡å™¨ä¸Šé…ç½®ï¼Œç½‘ä¸Šå¾ˆå¤šï¼Œæˆ‘ä¹Ÿæ˜¯ç…§ç€ç½‘ä¸Šåšçš„ã€‚ dockerï¼šnode é•œåƒæˆ‘ç”¨çš„ node å®˜æ–¹é•œåƒç”Ÿäº§çš„è‡ªå·±çš„é•œåƒï¼Œä½ å¯ä»¥ç”¨è‡ªå·±ä¹ æƒ¯çš„ã€‚æŠŠ node å®¹å™¨è¿è¡Œèµ·æ¥ï¼Œdocker exec -it YourName /bin/bashè¿›å…¥å®¹å™¨ï¼Œæ‰§è¡Œnpm install -g cnpm --registry=https://registry.npm.taobao.orgé…ç½®æ·˜å®æºï¼Œæ–°å»º /appæ–‡ä»¶å¤¹ï¼Œä¹‹åä»£ç æ„å»ºå’Œå‘å¸ƒå°±éƒ½æ”¾è¿™é‡Œäº†ã€‚ç„¶åæŠŠè¿™ä¸ªå®¹å™¨æ‰“åŒ…æˆé•œåƒï¼Œåå­—éšä¾¿ï¼Œå°±å«mynode:latestï¼ˆä»“åº“ï¼šç‰ˆæœ¬ï¼‰ã€‚ å¼€å§‹ jenkinsï¼š1.æ–°å»ºä»»åŠ¡ã€‚2.å‹¾é€‰ github é¡¹ç›®ï¼šå¡«å†™åœ°å€ï¼šgit@github.com:YourName/YourProject.gitã€‚3.æºç ç®¡ç†ï¼šé€‰æ‹© gitï¼Œurl å’Œä¸Šé¢ä¸€æ ·ï¼Œè®¾ç½® Credentialsï¼Œå¦‚æœæ˜¯ public é¡¹ç›®å°±ä¸ç”¨è®¾ç½®ã€‚4.è½®è¯¢ SCM æˆ–è€… GitHub hook è‡ªå·±çœ‹ç€åŠã€‚5.æ„å»ºï¼šé€‰æ‹©æ‰§è¡Œ shellï¼Œå‘½ä»¤å†™ï¼štar -zcvf frontend.tar.gz *ï¼Œæ„æ€æ˜¯æŠŠæ‰€æœ‰ä»£ç æ‰“åŒ…åˆ°frontend.tar.gzã€‚6.æ„å»ºï¼šé€‰æ‹© Send files or execute commands over SSHã€‚6.1 SSH Server é€‰æ‹©ä¹‹å‰é…ç½®å¥½çš„ã€‚6.2 Source filesï¼šfrontend.tar.gzã€‚6.3 Remote directoryï¼š/ï¼ˆæ³¨æ„è¿™ä¸ªæ ¹ç›®å½•æ˜¯ä½ ä¹‹å‰é…ç½®å¥½çš„ SSH Server è¿æ¥åˆ°çš„ç›®å½•ï¼Œæ¯”å¦‚ä½ ä¹‹å‰é…ç½®çš„/d:/docker/ï¼Œé‚£ä¹ˆè¿™é‡Œå°±ä¼šæŠŠ frontend.tar.gz ä¸Šä¼ åˆ° d:/docker/frontend.tar.gzã€‚windows SSH è¿æ¥ D ç›˜å°±æ˜¯è¿™ä¹ˆå†™çš„/D:/å‰é¢æœ‰ä¸ª/ï¼‰6.4 Exec commandï¼šfrontend.batã€‚æ„æ€å°±æ˜¯æ‰§è¡Œè¿œç«¯ windows æœåŠ¡å™¨ä¸Šçš„frontend.batæ–‡ä»¶ï¼Œæ‰€ä»¥å»è¿œç«¯æœåŠ¡å™¨çš„C:\\Users\\Administratorä¸‹æ–°å»ºè¿™ä¸ªfrontend.batæ–‡ä»¶ï¼ŒAdministrator æ˜¯ä½ ç™»å½•çš„ç”¨æˆ·åã€‚è¿æ¥é»˜è®¤å°±å›ºå®šè¿™ä¸ªç›®å½•ï¼Œæˆ‘å°è¯•äº†å‡ ä¸ªåŠæ³•æƒ³æŠŠæ–‡ä»¶æ”¾ D ç›˜æ‰§è¡Œçš„ï¼Œä½†ä¸€ç›´ä¸è¡Œï¼Œæ”¾å¼ƒäº†ï¼Œfrontend.baté‡Œé¢å†™ä»€ä¹ˆä¸‹é¢è¯´ã€‚7.ä¿å­˜ã€‚ nuxt é¡¹ç›®ï¼š1.ä¸Šä¼ ä»£ç çš„æ—¶å€™å¿½ç•¥.nuxt node_modules ç­‰ç­‰è¿™äº›æ–‡ä»¶ï¼Œæ²¡å•¥å¥½è¯´çš„ã€‚2.æ ¹ç›®å½•æ·»åŠ Dockerfileã€‚å†™å…¥ï¼š FROM mynode:latest WORKDIR /app COPY . /app RUN cnpm install \\ &amp;&amp; npm run build EXPOSE 3000 CMD [\"npm\", \"run\", \"start\"] ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œç”¨ mynode ï¼ˆä¸Šé¢å‡†å¤‡å·¥ä½œå¼„å¥½äº†çš„ï¼‰æ„å»ºæ–°é•œåƒï¼Œè®¾ç½®å·¥ä½œç›®å½•/appï¼ŒæŠŠå½“å‰æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°/appï¼Œï¼ˆåœ¨å·¥ä½œç›®å½•ï¼‰æ‰§è¡Œcnpm install å’Œ npm run buildï¼Œ å¯¹å¤–è®¿é—®ç«¯å£ 3000ï¼Œå®¹å™¨å¼€å§‹è¿è¡Œåï¼ˆåœ¨å·¥ä½œç›®å½•ï¼‰æ‰§è¡Œnpm run startã€‚è¿™é‡Œæ„å»ºå‘å¸ƒå®¹å™¨ï¼Œè®¾ç½®ä¾èµ–ï¼Œè¿è¡Œå°±å¼„å¥½äº†ã€‚ä¹‹åå°±æ˜¯å» windows æœåŠ¡å™¨ä¸Šæ‰§è¡Œè„šæœ¬ï¼Œæ¯æ¬¡æ„å»ºä¹‹å‰åˆ é™¤æ—§çš„ï¼Œè¿è¡Œæ–°çš„ã€‚ æœåŠ¡å™¨è„šæœ¬ï¼ˆfrontend.batï¼‰ï¼šç›´æ¥ä¸Šå†…å®¹ï¼š d: # åˆ‡æ¢åˆ°dç›˜ cd docker # åˆ°d:/dockerè¿™ä¸ªæ–‡ä»¶å¤¹ rd /S /Q frontend # åˆ é™¤d:/dockerä¸‹ï¼Œfrontendè¿™ä¸ªæ–‡ä»¶å¤¹ mkdir frontend # æ–°å»º frontend æ–‡ä»¶å¤¹ tar -xvf frontend.tar.gz -C ./frontend # è§£å‹jenkinsæ‰“åŒ…ä¸Šä¼ è¿‡æ¥çš„æ–‡ä»¶åˆ°frontendæ–‡ä»¶å¤¹ cd frontend # åˆ°d:/docker/frontendè¿™ä¸ªæ–‡ä»¶å¤¹ docker stop frontend # åœæ­¢å·²è¿è¡Œå®¹å™¨ docker rm -v frontend # åˆ é™¤å·²å­˜åœ¨å®¹å™¨ docker image rm frontend # åˆ é™¤é•œåƒ docker build -t frontend:latest . # è¿è¡ŒDockerfileæ‰“åŒ…ç”Ÿæˆæ–°é•œåƒï¼šfrontend:latestï¼Œæ³¨æ„æœ€åæœ‰ä¸€ä¸ªç‚¹ï¼Œè¡¨ç¤ºç”¨å½“å‰ç›®å½•ä¸‹çš„Dockerfileæ¥æ‰§è¡Œçš„ docker run -itd --restart=always --name frontend -p 3000:3000 frontend:latest # è¿è¡Œå®¹å™¨ åˆ°è¿™é‡Œå°±å…¨éƒ¨å®Œæˆäº†ã€‚å» jenkins ç«‹å³æ„å»ºå°± ok äº†ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"}],"author":null},{"title":"git commitè§„èŒƒåŒ–ï¼Œè®¾ç½®Commitizenï¼Œç¬¦åˆAngularçš„è§„èŒƒ","slug":"git-commitizen","date":"2020-05-15T12:24:09.000Z","updated":"2021-05-06T07:04:25.213Z","comments":true,"path":"2020/05/15/git-commitizen/","link":"","permalink":"https://tanghaojie.github.io/2020/05/15/git-commitizen/","excerpt":"","text":"å®‰è£…é…ç½®commitizen åœ°å€cz-conventional-changelo åœ°å€ï¼šè§„èŒƒè¦æ±‚ï¼Œä¸åŒçš„é€‚é…å™¨è¦æ±‚ä¸åŒconventional-changelog åœ°å€ï¼šç”Ÿæˆ changelog.md npm install -g commitizen npm install -g cz-conventional-changelog npm install -g conventional-changelog-cli commitizen init cz-conventional-changelog --save-dev --save-exact å¦‚æœå·²ç»æœ‰å…¶ä»–é€‚é…å™¨äº†ï¼Œä¼šæŠ¥é”™ï¼Œç”¨ --force æ›¿æ¢æ‰ï¼Œå³ï¼š commitizen init cz-conventional-changelog --save-dev --save-exact --force ä½¿ç”¨ä»¥åæäº¤ä»£ç å°±ç”¨git cz -mæ›¿ä»£git commit -må°±å¥½äº†ï¼Œæˆ–è€…ä¸è¾“å…¥ message è·Ÿç€æç¤ºèµ°å°±æ²¡é—®é¢˜ã€‚type å€¼ï¼š å€¼ æè¿° feat æ–°å¢ä¸€ä¸ªåŠŸèƒ½ fix ä¿®å¤ä¸€ä¸ª Bug docs æ–‡æ¡£å˜æ›´ style ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ†å·ç­‰æ ¼å¼ä¿®æ­£ï¼‰ refactor ä»£ç é‡æ„ perf æ”¹å–„æ€§èƒ½ test æµ‹è¯• build å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–ï¼ˆä¾‹å¦‚ scopes: webpackã€gulpã€npm ç­‰ï¼‰ ci æ›´æ”¹æŒç»­é›†æˆè½¯ä»¶çš„é…ç½®æ–‡ä»¶å’Œ package ä¸­çš„ scripts å‘½ä»¤ï¼Œä¾‹å¦‚ scopes: Travis, Circle ç­‰ chore å˜æ›´æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…· revert ä»£ç å›é€€ ç”Ÿæˆ changelogï¼šconventional-changelog -p angular -i CHANGELOG.md -s ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"git","slug":"git","permalink":"https://tanghaojie.github.io/categories/git/"},{"name":"other","slug":"git/other","permalink":"https://tanghaojie.github.io/categories/git/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"},{"name":"git","slug":"git","permalink":"https://tanghaojie.github.io/tags/git/"}],"author":null},{"title":"dockeré€ŸæŸ¥è¡¨","slug":"docker-cheat-sheet","date":"2020-05-14T16:50:41.000Z","updated":"2021-05-06T07:04:15.758Z","comments":true,"path":"2020/05/15/docker-cheat-sheet/","link":"","permalink":"https://tanghaojie.github.io/2020/05/15/docker-cheat-sheet/","excerpt":"","text":"å®¹å™¨ï¼ˆContainerï¼‰ç”Ÿå‘½å‘¨æœŸ docker create åˆ›å»ºå®¹å™¨ä½†ä¸å¯åŠ¨å®ƒã€‚ docker rename ç”¨äºé‡å‘½åå®¹å™¨ã€‚ docker run ä¸€é”®åˆ›å»ºå¹¶åŒæ—¶å¯åŠ¨è¯¥å®¹å™¨ã€‚ docker rm åˆ é™¤å®¹å™¨ã€‚ docker update è°ƒæ•´å®¹å™¨çš„èµ„æºé™åˆ¶ã€‚ å¸¸ç”¨å‚æ•°docker run --rm ä¸´æ—¶å®¹å™¨ï¼Œå®¹å™¨åœæ­¢ä¹‹ååˆ é™¤å®ƒã€‚docker run -d container_idï¼Œ-d è¡¨ç¤ºè‡ªåŠ¨å°†å®¹å™¨ä¸ç»ˆç«¯åˆ†ç¦»ï¼ˆä¹Ÿå°±æ˜¯è¯´åœ¨åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¾“å‡ºå®¹å™¨ IDï¼‰docker run -p container_idï¼Œ-p è¡¨ç¤ºæŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ï¼šä¸»æœºï¼ˆå®¿ä¸»ï¼‰ç«¯å£:å®¹å™¨ç«¯å£ å¯åŠ¨å’Œåœæ­¢ docker start å¯åŠ¨å·²å­˜åœ¨çš„å®¹å™¨ã€‚ docker stop åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨ã€‚ docker restart é‡å¯å®¹å™¨ã€‚ docker pause æš‚åœè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå°†å…¶ã€Œå†»ç»“ã€åœ¨å½“å‰çŠ¶æ€ã€‚ docker unpause ç»“æŸå®¹å™¨æš‚åœçŠ¶æ€ã€‚ docker wait é˜»å¡åœ°ç­‰å¾…æŸä¸ªè¿è¡Œä¸­çš„å®¹å™¨ç›´åˆ°åœæ­¢ã€‚ docker kill å‘è¿è¡Œä¸­çš„å®¹å™¨å‘é€ SIGKILL æŒ‡ä»¤ã€‚ docker attach è¿æ¥åˆ°è¿è¡Œä¸­çš„å®¹å™¨ã€‚ ä¿¡æ¯ docker ps æŸ¥çœ‹è¿è¡Œä¸­çš„æ‰€æœ‰å®¹å™¨ã€‚ docker logs ä»å®¹å™¨ä¸­è¯»å–æ—¥å¿—ã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—é©±åŠ¨ï¼Œä¸è¿‡åœ¨ 1.10 ä¸­ï¼Œå®ƒåªæ”¯æŒ json-file å’Œ journaldï¼‰ã€‚ docker inspect æŸ¥çœ‹æŸä¸ªå®¹å™¨çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆåŒ…æ‹¬ IP åœ°å€ï¼‰ã€‚ docker events ä»å®¹å™¨ä¸­è·å–äº‹ä»¶ (events)ã€‚ docker port æŸ¥çœ‹å®¹å™¨çš„å…¬å¼€ç«¯å£ã€‚ docker top æŸ¥çœ‹å®¹å™¨ä¸­æ´»åŠ¨è¿›ç¨‹ã€‚ docker stats æŸ¥çœ‹å®¹å™¨çš„èµ„æºä½¿ç”¨é‡ç»Ÿè®¡ä¿¡æ¯ã€‚ docker diff æŸ¥çœ‹å®¹å™¨æ–‡ä»¶ç³»ç»Ÿä¸­å­˜åœ¨æ”¹åŠ¨çš„æ–‡ä»¶ã€‚ å¸¸ç”¨å‚æ•°docker ps -a æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬è¿è¡Œä¸­å’Œå·²åœæ­¢çš„ã€‚docker stats --all åŒæ ·å°†æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼Œé»˜è®¤ä»…æ˜¾ç¤ºè¿è¡Œä¸­çš„å®¹å™¨ã€‚ å¯¼å…¥ / å¯¼å‡º docker cp åœ¨å®¹å™¨å’Œæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¹‹é—´å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ã€‚ docker export å°†å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ‰“åŒ…ä¸ºå½’æ¡£æ–‡ä»¶æµ (tarball archive stream) å¹¶è¾“å‡ºè‡³æ ‡å‡†è¾“å‡º (STDOUT)ã€‚ æ‰§è¡Œå‘½ä»¤ docker exec åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¿›å…¥æ­£åœ¨è¿è¡Œçš„ foo å®¹å™¨ï¼Œå¹¶è¿æ¥ (attach) åˆ°ä¸€ä¸ªæ–°çš„ Shell è¿›ç¨‹ï¼šdocker exec -it foo /bin/bashã€‚ é•œåƒ(Images)ç”Ÿå‘½å‘¨æœŸ docker images æŸ¥çœ‹æ‰€æœ‰é•œåƒã€‚ docker import ä»å½’æ¡£æ–‡ä»¶åˆ›å»ºé•œåƒã€‚ docker build ä» Dockerfile åˆ›å»ºé•œåƒã€‚ docker commit ä¸ºå®¹å™¨åˆ›å»ºé•œåƒï¼Œå¦‚æœå®¹å™¨æ­£åœ¨è¿è¡Œåˆ™ä¼šä¸´æ—¶æš‚åœã€‚ docker rmi åˆ é™¤é•œåƒã€‚ docker load ä»æ ‡å‡†è¾“å…¥ (STDIN) åŠ è½½å½’æ¡£åŒ… (tar archive) ä½œä¸ºé•œåƒï¼ŒåŒ…æ‹¬é•œåƒæœ¬èº«å’Œæ ‡ç­¾ (tags, 0.7 èµ·)ã€‚ docker save å°†é•œåƒæ‰“åŒ…ä¸ºå½’æ¡£åŒ…ï¼Œå¹¶è¾“å‡ºè‡³æ ‡å‡†è¾“å‡º (STDOUT)ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„çˆ¶å±‚ã€æ ‡ç­¾å’Œç‰ˆæœ¬ (parent layers, tags, versions, 0.7 èµ·)ã€‚ å…¶å®ƒä¿¡æ¯ docker history æŸ¥çœ‹é•œåƒçš„å†å²è®°å½•ã€‚ docker tag ç»™é•œåƒæ‰“æ ‡ç­¾å‘½åï¼ˆæœ¬åœ°æˆ–è€…ä»“åº“å‡å¯ï¼‰ã€‚ ç½‘ç»œ(Networks)ç”Ÿå‘½å‘¨æœŸ docker network create docker network rm å…¶å®ƒä¿¡æ¯ docker network ls docker network inspect å»ºç«‹è¿æ¥ docker network connect docker network disconnect ä»“åº“(Repository) docker login ç™»å…¥ä»“ç®¡ä¸­å¿ƒã€‚ docker logout ç™»å‡ºä»“ç®¡ä¸­å¿ƒã€‚ docker search ä»ä»“ç®¡ä¸­å¿ƒæ£€ç´¢é•œåƒã€‚ docker pull ä»ä»“ç®¡ä¸­å¿ƒæ‹‰å–é•œåƒåˆ°æœ¬åœ°ã€‚ docker push ä»æœ¬åœ°æ¨é€é•œåƒåˆ°ä»“ç®¡ä¸­å¿ƒã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"docker","slug":"docker","permalink":"https://tanghaojie.github.io/categories/docker/"},{"name":"cheat sheet","slug":"docker/cheat-sheet","permalink":"https://tanghaojie.github.io/categories/docker/cheat-sheet/"}],"tags":[{"name":"cheat sheet","slug":"cheat-sheet","permalink":"https://tanghaojie.github.io/tags/cheat-sheet/"},{"name":"docker","slug":"docker","permalink":"https://tanghaojie.github.io/tags/docker/"}],"author":null},{"title":"gité€ŸæŸ¥è¡¨","slug":"git-cheat-sheet","date":"2020-05-14T08:20:07.000Z","updated":"2021-05-06T07:04:02.894Z","comments":true,"path":"2020/05/14/git-cheat-sheet/","link":"","permalink":"https://tanghaojie.github.io/2020/05/14/git-cheat-sheet/","excerpt":"","text":"git ä»è¿œç¨‹æ‹‰å–ä»£ç ã€æ¨ä»£ç çš„æ­¥éª¤ å¦‚æœæ˜¯å‡ ä¸ªäººå…±åŒç®¡ç†é¡¹ç›®ï¼Œå¹¶ä¸”ä½ çš„é˜Ÿå‹åœ¨ä½ ä¹‹å‰æ¨è¿‡ä»£ç ï¼Œé‚£ä½ å°±éœ€è¦ git pull ä¸€ä¸‹ï¼ŒæŠŠä»£ç æ‹‰åˆ°æœ¬åœ°ï¼Œè§£å†³ä¸€ä¸‹å†²çªï¼Œå†æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼Œå°†æœ¬åœ°ä»£ç æ¨åˆ°è¿œç¨‹ä»“åº“ã€‚ git status #git ä»“åº“çŠ¶æ€ git add * #æ›´æ–°çš„ä»£ç æ·»åŠ åˆ°æš‚å­˜åŒº git commit -m â€œmsgâ€ #å°†æš‚å­˜åŒºçš„æ›´æ–°æäº¤åˆ°ä»“åº“åŒº git pull #å…ˆ git pull,æ‹‰å–è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯æ›´æ–°å¹¶åˆå¹¶åˆ°æœ¬åœ° git push origin master #å°†æœ¬åœ°åˆ†æ”¯çš„æ›´æ–°å…¨éƒ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“ git reset â€“mixed [å“ˆå¸Œç ] #å›æ»šåˆ°è¿™ä¸ªå“ˆå¸Œç ï¼Œå°†æœ¬åœ°å½’æ¡£åŒºå’Œç¼“å†²åŒºä¹Ÿè¿›è¡Œå›æ»š git reset â€“hard [å“ˆå¸Œç ] #ä½¿ç”¨å¼ºåˆ¶è¿˜åŸè¿™ä¸ªå“ˆå¸Œç  git reset â€“soft [å“ˆå¸Œç ] #å›æ»šåˆ°è¿™ä¸ªå“ˆå¸Œç ï¼Œåªå°†æœ¬åœ°å½’æ¡£åŒºå›æ»š git revert [å“ˆå¸Œç ] #åªæ˜¯é’ˆå¯¹è¿™ä¸ªå“ˆå¸Œç ç‰ˆæœ¬è¿›è¡Œåˆ é™¤å›æ»šæ“ä½œ git log #æŸ¥çœ‹æ—¥å¿— git reflog #æŸ¥çœ‹æ“ä½œè®°å½•ï¼Œèƒ½æ‰¾åˆ°ä¹‹å‰çš„æ“ä½œè®°å½•å’Œå“ˆå¸Œç  å¤šåˆ†æ”¯å¼€å‘ git branch -v #æŸ¥çœ‹æˆ‘ä»¬å½“å‰æœ‰å“ªäº›åˆ†æ”¯ï¼Ÿ git branch [name] #åˆ›å»º name åˆ†æ”¯ git checkout [name] #åˆ‡æ¢åˆ° name åˆ†æ”¯ git checkout -b [name] #åˆ›å»ºå¹¶åˆ‡æ¢åˆ° name åˆ†æ”¯ git merge [name] å°† name åˆ†æ”¯åˆå¹¶åˆ° master åˆ†æ”¯ æŸ¥çœ‹è¿œç«¯ git remove -v æ·»åŠ å¤šä¸ªè¿œç«¯ git remote set-url â€“add origin http://xxxxx/xxx/adsdsdsdcelery-demo.git ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"git","slug":"git","permalink":"https://tanghaojie.github.io/categories/git/"},{"name":"cheat sheet","slug":"git/cheat-sheet","permalink":"https://tanghaojie.github.io/categories/git/cheat-sheet/"}],"tags":[{"name":"git","slug":"git","permalink":"https://tanghaojie.github.io/tags/git/"},{"name":"cheat sheet","slug":"cheat-sheet","permalink":"https://tanghaojie.github.io/tags/cheat-sheet/"}],"author":null},{"title":"å‡ ä½•ç®—æ³•å»¶ä¼¸","slug":"spatial-calculate-extend","date":"2020-05-10T07:10:26.000Z","updated":"2021-05-06T07:51:44.487Z","comments":true,"path":"2020/05/10/spatial-calculate-extend/","link":"","permalink":"https://tanghaojie.github.io/2020/05/10/spatial-calculate-extend/","excerpt":"","text":"çº¿å¹³è¡Œ$$A_xB_y = A_yB_x$$ $$\\frac{A_x}{A_y} = \\frac{B_x}{B_y}$$ $$\\frac{A_x}{A_y} = \\frac{B_x}{B_y} = \\frac{B_z}{B_z}$$ çº¿å‚ç›´$$A_xB_x + A_yB_y = 0$$ $$A_xB_x + A_yB_y + A_zB_z = 0$$ å‘é‡ $\\vec A$ $\\vec B$ å¤¹è§’æ–¹å‘ï¼ˆå‰ä¹˜ï¼‰$\\vec A$ $\\times$ $\\vec B$ &gt; 0 , $\\vec A$åœ¨$\\vec B$çš„é¡ºæ—¶é’ˆæ–¹å‘ã€‚$\\vec A$ $\\times$ $\\vec B$ &lt; 0 , $\\vec A$åœ¨$\\vec B$çš„é€†æ—¶é’ˆæ–¹å‘ã€‚$\\vec A$ $\\times$ $\\vec B$ = 0 , $\\vec A$ $\\vec B$å…±çº¿ã€‚ åˆ¤æ–­å‡¸å¤šè¾¹å½¢æ ¹æ®ä¸Šé¢æ–¹å‘çš„æ€§è´¨ï¼Œå¯ä»¥æ¨è®ºå‡ºæ¥ã€‚ä»¥å¤šè¾¹å½¢ç›¸é‚»ä¸¤æ¡è¾¹ä¸ºå‘é‡è¿›è¡Œå‰ç§¯å’Œï¼Œå¦‚æœå…¨éƒ¨å¤§äºé›¶åˆ™æ˜¯å‡¸å¤šè¾¹å½¢ï¼Œå¦‚æœå…¨éƒ¨ä¸ºé›¶åˆ™å…±çº¿ï¼Œå¦åˆ™å°±æ˜¯å‡¹å¤šè¾¹å½¢ã€‚ è®¡ç®—ä»»æ„å¤šè¾¹å½¢é¢ç§¯è®¡ç®—ä¸‰è§’å½¢é¢ç§¯æ ¹æ®ä¸Šä¸€ç¯‡å‡ ä½•åŸºç¡€ï¼Œå‘é‡å‰ä¹˜ç»“æœä¸ºå¸¦ç¬¦å·çš„å¹³è¡Œå››è¾¹å½¢é¢ç§¯ï¼Œé‚£ä¹ˆä¸‰è§’å½¢çš„é¢ç§¯ä¸ºï¼š$$Area = \\frac{\\vec {AB} \\times \\vec {AC}}{2}$$é¢ç§¯ç»“æœä¸ºå¸¦ç¬¦å·çš„å€¼ï¼Œæ­£é¢ç§¯åˆ™ABCæˆå·¦æ‰‹ç³»ï¼Œè´Ÿé¢ç§¯åˆ™ABCæˆå³æ‰‹ç³»ã€‚ è®¡ç®—ä»»æ„å‡¹å‡¸å¤šè¾¹å½¢é¢ç§¯è®¡ç®—å¤šè¾¹å½¢é¢ç§¯å°±æ˜¯æŠŠå¤šè¾¹å½¢åˆ‡åˆ†ä¸ºå¤šä¸ªä¸‰è§’å½¢è®¡ç®—å°±å¥½äº†ã€‚ç”±äºé¢ç§¯è®¡ç®—çš„ç»“æœæ˜¯å¸¦ç¬¦å·çš„ï¼Œå› æ­¤ï¼Œæ­¤ç»“æœå¯¹äºå‡¹å‡¸å¤šè¾¹å½¢éƒ½æ˜¯æœ‰æ•ˆã€‚ç”šè‡³å¯ä»¥é€‰å–å¤šè¾¹å½¢å¤–çš„ä¸€ä¸ªç‚¹ï¼Œæ¥æ„å»ºä¸‰è§’å½¢è®¡ç®—ï¼Œä¹Ÿæ˜¯åŒæ ·æœ‰æ•ˆçš„ï¼Œåƒè¿™æ ·ï¼šå½“ç„¶ä¸€èˆ¬ä¸ä¼šé€‰æ‹©å¤–éƒ¨çš„ç‚¹ã€‚ è®¡ç®—å¸¦å­”å¤šè¾¹å½¢çš„é¢ç§¯å½“å¤šè¾¹å½¢å­˜åœ¨â€œå­”æ´â€æ—¶ï¼Œ ç¬¬ä¸€å±‚å­”æ´çš„ç¯åºæ˜¯ä¸å¤–ç¯åºä¸€å®šæ˜¯ç›¸åçš„ï¼Œå› æ­¤å­”æ´çš„é¢ç§¯å’Œå¤–ç¯çš„é¢ç§¯ç»“æœä¹Ÿæ˜¯ç›¸åçš„ï¼Œç›´æ¥ç›¸åŠ å³å¯ã€‚å¤šå±‚å­”æ´å½“ç„¶ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚æ³¨æ„ ç¯åºæ˜¯å¾ˆé‡è¦çš„ï¼ŒåŒä¸€å±‚ç¯è¿›è¡Œé¢ç§¯è®¡ç®—çš„æ—¶å€™ï¼Œè¦å§‹ç»ˆä¿æŒåŒä¸€ä¸ªæ–¹å‘çš„ç¯åºè¿›è¡Œè®¡ç®—ã€‚ ä¸åŒæ–‡ä»¶æ ¼å¼è¦æ±‚çš„æœ€å¤–éƒ¨ç¯åºæ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤ä¸è¦è®¤ä¸ºå¤–ç¯æ€»æ˜¯å’Œå¤§éƒ¨åˆ†æƒ…å†µä¸€æ ·æ˜¯é€†æ—¶é’ˆçš„ã€‚ æ‰©å±•1.ESRI shapefileï¼šå¤–å±‚ç¯åºä¸ºé¡ºæ—¶é’ˆã€‚2.OGCè§„èŒƒï¼šæ­¤æ ‡å‡†æœªå®šä¹‰å¤šè¾¹å½¢æ—‹è½¬ï¼›å®é™…çš„å¤šè¾¹å½¢æ—‹è½¬å¯ä»¥æ²¿é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆæ–¹å‘è¿›è¡Œã€‚3.Oracleï¼šExterior ring boundaries must be oriented counterclockwise, and interior ring boundaries must be oriented clockwise.ï¼ˆå¤–éƒ¨ç¯è¾¹ç•Œå¿…é¡»é€†æ—¶é’ˆå®šå‘ï¼Œè€Œå†…éƒ¨ç¯è¾¹ç•Œå¿…é¡»é¡ºæ—¶é’ˆå®šå‘ã€‚ï¼‰4.SQL Serverï¼š If SQL Server finds outer rings oriented in a clockwise direction, it will re-orient such rings to counter-clockwise - the direction required for outer rings in the Geography data type. The same goes for inner rings (holes), which SQL Server will orient to clockwise.ï¼ˆå¦‚æœSQL Serveræ‰¾åˆ°æ²¿é¡ºæ—¶é’ˆæ–¹å‘å®šå‘çš„å¤–ç¯ï¼Œåˆ™å®ƒå°†é‡æ–°å®šä½æ­¤ç±»ç¯ä¸ºé€†æ—¶é’ˆæ–¹å‘-Geographyæ•°æ®ç±»å‹ä¸­å¤–ç¯æ‰€éœ€çš„æ–¹å‘ã€‚å†…ç¯ï¼ˆå­”ï¼‰ä¹Ÿæ˜¯å¦‚æ­¤ï¼ŒSQL Serverä¼šå°†å…¶å®šä½ä¸ºé¡ºæ—¶é’ˆæ–¹å‘ã€‚ï¼‰5.PostGISï¼šForces the orientation of the vertices in a polygon to follow a Right-Hand-Rule, in which the area that is bounded by the polygon is to the right of the boundary. In particular, the exterior ring is orientated in a clockwise direction and the interior rings in a counter-clockwise direction.ï¼ˆå¼ºåˆ¶å¤šè¾¹å½¢ä¸­é¡¶ç‚¹çš„æ–¹å‘éµå¾ªâ€œå³æ‰‹è§„åˆ™â€ï¼Œå…¶ä¸­å¤šè¾¹å½¢æ‰€åŒ…å›´çš„åŒºåŸŸåœ¨è¾¹ç•Œçš„å³è¾¹ã€‚ç‰¹åˆ«åœ°ï¼Œå¤–ç¯æ²¿é¡ºæ—¶é’ˆæ–¹å‘å®šå‘ï¼Œè€Œå†…ç¯æ²¿é€†æ—¶é’ˆæ–¹å‘å®šå‘ã€‚ï¼‰ åˆ¤æ–­å¤šè¾¹å½¢çš„ç¯åºé¢ç§¯æ³•å¤šè¾¹å½¢é¢ç§¯ä¸ºæ­£ï¼šé€†æ—¶é’ˆï¼›é¢ç§¯ä¸ºè´Ÿï¼šé¡ºæ—¶é’ˆï¼› å‡¸å¤šè¾¹å½¢ä»»å–ä¸€ç‚¹å‰ä¹˜ï¼š$$\\vec {AB} \\times \\vec{BC}$$å€¼ä¸ºæ­£ï¼šé€†æ—¶é’ˆï¼›å€¼ä¸ºè´Ÿï¼šé¡ºæ—¶é’ˆã€‚ æç‚¹æ³•é€‰æ‹©å¤šè¾¹å½¢ä¸Šçš„æŸä¸ªæç‚¹ï¼ˆxæœ€å¤§ã€xæœ€å°ã€yæœ€å¤§ã€yæœ€å°ï¼‰ï¼Œè¿™ä¸ªæç‚¹åˆ™ä¸€å®šåœ¨å‡¸åŒ…ä¸Šï¼Œè®¡ç®—å‰ç§¯å¾—åˆ°ç¯åºæ–¹å‘ï¼Œå’Œä¸Šé¢å‡¸å¤šè¾¹å½¢ç®—æ³•ç»“è®ºä¸€è‡´ã€‚ è®¡ç®—å¤šè¾¹å½¢è´¨å¿ƒä¸‰è§’å½¢ä¸‰è§’å½¢ $\\triangle ABC$ è´¨å¿ƒè®¡ç®—å…¬å¼ï¼š$$Centroid_x = \\frac{A_x + B_x + C_x}{3}$$$$Centroid_y = \\frac{A_y + B_y + C_y}{3}$$ ä»»æ„å¤šè¾¹å½¢ä»»æ„å¹³é¢å¤šè¾¹å½¢ï¼Œè‹¥èƒ½è¢«æ‹†åˆ†ä¸º $i$ä¸ªç®€å•å›¾å½¢ï¼Œæ¯ä¸ªç®€å•å›¾å½¢çš„è´¨å¿ƒä¸ºï¼š$C_i$ï¼Œé¢ç§¯ä¸ºï¼š$A_i$ã€‚åˆ™è´¨å¿ƒCentroidçš„åæ ‡$(Centroid_x, Centroid_y)$ï¼Œæ»¡è¶³ä»¥ä¸‹å…¬å¼ï¼š$$Centroid_x = \\frac{\\sum {C_i}_x A_i}{\\sum A_i}$$$$Centroid_y = \\frac{\\sum {C_i}_y A_i}{\\sum A_i}$$ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"}],"author":null},{"title":"å‡ ä½•ç®—æ³•åŸºç¡€","slug":"spatial-calculate-basic","date":"2020-05-10T04:24:04.000Z","updated":"2021-05-06T06:57:33.038Z","comments":true,"path":"2020/05/10/spatial-calculate-basic/","link":"","permalink":"https://tanghaojie.github.io/2020/05/10/spatial-calculate-basic/","excerpt":"","text":"åŠ $$\\vec A + \\vec B = (A_x + B_x, A_y + B_y, A_z + B_z)$$ å‡$$\\vec A - \\vec B = (A_x - B_x, A_y - B_y, A_z - B_z)$$ æ¨¡$$\\left| \\vec A \\right| = \\sqrt[]{ A_x^2 + A_y^2 + A_z^2 }$$ æ•°ä¹˜ï¼ˆä¼¸ç¼©ï¼Œæ¢å‘ï¼‰$$k \\vec A = (kA_x, kA_y, kA_z)$$ ç‚¹ä¹˜$$\\vec A \\cdot \\vec B = \\sum A_i B_i = A_xB_x + A_yB_y + A_zB_z$$ $$\\vec A \\cdot \\vec B = \\left| \\vec A \\right| \\left| \\vec B \\right| \\cos \\theta$$ ç»“æœæ˜¯ä¸€ä¸ªæ ‡é‡ï¼ˆæ•°ï¼‰å‡ ä½•æ„ä¹‰ï¼š1.é™ç»´ï¼Œ2.$\\vec B$åœ¨$\\vec A$ä¸Šçš„æŠ•å½± $$\\left| \\vec B \\right| \\cos \\theta$$ ç‚¹ä¹˜å»¶ä¼¸ï¼š$$\\left| \\vec A \\cdot \\vec B \\right| \\le \\left| \\vec A \\right| \\left| \\vec B \\right|$$ ç­‰å·åªåœ¨$\\vec A$ä¸$\\vec B$å…±çº¿æ—¶æˆç«‹. $$\\vec A \\cdot \\vec B = \\vec B \\cdot \\vec A$$ $\\vec A \\cdot \\vec B &gt; 0$ï¼Œå¤¹è§’åœ¨ $0^\\circ$ åˆ° $90^\\circ$ ä¹‹é—´$\\vec A \\cdot \\vec B = 0$ï¼Œå‚ç›´$\\vec A \\cdot \\vec B &lt; 0$ï¼Œå¤¹è§’åœ¨ $90^\\circ$ åˆ° $180^\\circ$ ä¹‹é—´ å‰ä¹˜$$\\vec A \\times \\vec B = \\left| \\vec A \\right| \\left| \\vec B \\right| \\sin \\theta$$ äºŒç»´ï¼š $$\\vec A \\times \\vec B = A_xB_y - B_xA_y$$ ä¸‰ç»´ï¼š $$\\vec A \\times \\vec B = A_yB_z- B_yA_z + A_zB_x - A_xB_z+ A_xB_y - A_yB_x$$ å‡ ä½•æ„ä¹‰ï¼šäºŒç»´ï¼š$(0,0) \\quad (A_x, A_y) \\quad (B_x, B_y) \\quad ((A+B)_x, (A+B)_y)$æ„æˆçš„å¹³è¡Œå››è¾¹å½¢å¸¦ç¬¦å·çš„é¢ç§¯ä¸‰ç»´ï¼š$\\vec A \\times \\vec B$ ç»“æœçš„å‘é‡ï¼Œå‚ç›´äº $\\vec A$ å’Œ $\\vec B$ æ„æˆçš„å¹³é¢ å‰ä¹˜å»¶ä¼¸ï¼š$$\\left| \\vec A \\times \\vec B \\right| = \\left| \\vec A \\right| \\left| \\vec B \\right| \\sin \\theta$$ $$\\vec A \\times \\vec B = - \\vec B \\times \\vec A$$ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"}],"author":null},{"title":"Hexoæ·»åŠ æ•°å­¦å…¬å¼æ”¯æŒ","slug":"hexo-LaTex","date":"2020-05-10T03:50:01.000Z","updated":"2021-05-06T06:57:12.818Z","comments":true,"path":"2020/05/10/hexo-LaTex/","link":"","permalink":"https://tanghaojie.github.io/2020/05/10/hexo-LaTex/","excerpt":"","text":"ä¸ºåé¢çš„æ–‡æ¡£åšå‡†å¤‡ï¼Œæ·»åŠ æ•°å­¦å…¬å¼çš„æ”¯æŒã€‚ç½‘ä¸Šä¸€å †æ›´æ–°æ¸²æŸ“æ’ä»¶çš„åŠæ³•ï¼Œæˆ‘éƒ½å‡†å¤‡ç”¨äº†ã€‚å¹¸å¥½å…ˆçœ‹å®Œäº†æ–‡ç« ï¼Œåé¢è¦æ”¹ node_modules é‡Œé¢çš„æºç ï¼Œè¿™æ€ä¹ˆå¯èƒ½ï¼æˆ‘ä¸èƒ½æŠŠ node_modules ä¸Šä¼ åˆ° github å§ï¼Œä¸ä¸Šä¼ åˆæ€ä¹ˆåŒæ­¥å‘¢ã€‚åæ¥çœ‹äº†ä¸€ä¸‹ï¼Œhexo-theme-matery åšå¥½äº†æ’ä»¶ï¼Œé‚£å°±ç®€å•äº†ï¼šthemes/hexo-theme-matery/_config.yml ä¸­ï¼š mathjax: enable: true å®Œå·¥ï½å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œç„¶åæ¯ç¯‡è¦ç”¨åˆ°å…¬å¼çš„æ–‡æ¡£ï¼Œå¤´ä¸Šä¿®æ”¹mathjax: trueå°±å¥½äº†ã€‚ ç¤ºä¾‹$\\cos$ $x_i^2$ $|x+y|$ $\\sqrt[3]{x+y}$ $\\int_{r=1}^\\infty$ $\\frac{\\partial x}{\\partial y}$ $$\\Gamma(z) = \\int_0^\\infty t^{z-1}e^{-t}dt,.$$ $\\alpha$ $\\beta$ $\\theta$ $\\sum_{r=1}^n$ $\\prod_{i=1}^{K}$ $$\\begin{bmatrix} a &amp; b &amp; c &amp; d &amp; e\\\\ f &amp; g &amp; h &amp; i &amp; j \\\\ k &amp; l &amp; m &amp; n &amp; o \\\\ p &amp; q &amp; r &amp; s &amp; t \\end{bmatrix}$$ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"}],"author":null},{"title":"å…¨å›½ç”²ä¹™ä¸™çº§æµ‹ç»˜èµ„è´¨å•ä½åå•","slug":"surveying-qualification","date":"2020-05-09T15:01:28.000Z","updated":"2021-05-06T06:56:41.341Z","comments":true,"path":"2020/05/09/surveying-qualification/","link":"","permalink":"https://tanghaojie.github.io/2020/05/09/surveying-qualification/","excerpt":"","text":"å…¨å›½ç”²ä¹™ä¸™çº§æµ‹ç»˜èµ„è´¨å•ä½åå•ï¼šç”²çº§ï¼š1326 ä¸ª ä¹™çº§ï¼š5081 ä¸ª ä¸™çº§ï¼š8790 ä¸ª ç‚¹å‡»æŸ¥çœ‹å’Œä¸‹è½½ è¯¦ç»†ä¿¡æ¯å‹ç¼©åŒ…è§£å‹å¯†ç ï¼šå…³æ³¨å…¬ä¼—å·[æ¡€å£«]ï¼Œå›å¤â€œèµ„è´¨â€è·å–å¯†ç ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[],"tags":[],"author":null},{"title":"Scrapyçˆ¬è™«ä½¿ç”¨","slug":"scrapy-tutorial","date":"2020-05-09T13:20:01.000Z","updated":"2021-05-06T06:56:36.782Z","comments":true,"path":"2020/05/09/scrapy-tutorial/","link":"","permalink":"https://tanghaojie.github.io/2020/05/09/scrapy-tutorial/","excerpt":"","text":"é£é€Ÿèµ·æ­¥ å®‰è£… scrapypip install Scrapyï¼ˆ_ç±» unix è®°å¾—åŠ  sudo_ï¼‰å®‰è£…å®Œæˆä»¥åï¼Œåˆ°å‘½ä»¤è¡Œè¾“å…¥Scrapyï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚ å‡†å¤‡å’Œé…ç½® scrapy startproject [name]åˆ›å»ºé¡¹ç›®ã€‚ é¡¹ç›®æ–‡ä»¶è¯´æ˜ items.pyï¼šæ•°æ®æ¨¡å‹ï¼Œç±»ä¼¼äº dtoã€orm ä¸­çš„ modelspidersï¼šçˆ¬è™«ç¨‹åºmiddlewares.pyï¼šæ¨¡å‹ä¸­çš„ä¸­é—´ä»¶pipelines.pyï¼šç®¡é“ï¼Œå¯¹ item è¿›è¡Œå¤„ç†ï¼Œç±»ä¼¼äºå¾ˆå¤šæœåŠ¡å™¨çš„è¯·æ±‚ç®¡é“settings.pyï¼šç¨‹åºè®¾ç½®,ä¸»è¦æ˜¯ä¸€äº›ä¼˜å…ˆçº§è®¾ç½®,ä¼˜å…ˆçº§è¶Šé«˜,å€¼è¶Šå°scrapy.cfgï¼šé…ç½® åŸºç¡€è®¾ç½®settings.py ä¸­ï¼Œæ‰¾åˆ°ROBOTSTXT_OBEY = Trueï¼Œæ”¹ä¸ºROBOTSTXT_OBEY = Falseæˆ–è€…æŠŠä»–æ³¨é‡Šäº†è¿™ä¸œè¥¿çš„æ„æ€æ˜¯ï¼šæ¯ä¸ªç½‘ç«™å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹æ”¾ä¸€ä¸ª robots.txt çš„æ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œé¢å‘Šè¯‰äº†çˆ¬è™«å“ªäº›ç½‘å€æ˜¯å¯ä»¥çˆ¬çš„ï¼Œå½“ç„¶è¿™å°±æ˜¯ä¸ªå›å­åè®®ï¼Œé ä½ è‡ªå·±é€‰æ‹©æ˜¯ä¸æ˜¯è¦éµå®ˆã€‚ è®¾ç½® UTF-8ï¼šsettings.py ä¸­ï¼Œæ·»åŠ ä¸€è¡Œï¼šFEED_EXPORT_ENCODING = 'utf-8' ç”Ÿæˆçˆ¬è™«å‘½ä»¤è¡Œè¾“å…¥ï¼šscrapy genspider [æ–‡ä»¶å] [ç½‘å€]ï¼Œç”Ÿæˆçˆ¬è™«æ–‡ä»¶ã€‚å¯ä»¥åœ¨ spiders æ–‡ä»¶å¤¹ä¸‹é¢çœ‹åˆ°ã€‚ å¼€å§‹ä»£ç  itemï¼šè‡ªå·±å†™ä¸€ä¸ª item class yourItem(scrapy.Item): info1 = scrapy.Field() info2 = scrapy.Field() info1ã€info2ï¼Œå°±æ˜¯æ•°æ®æ¨¡å‹å¯¹åº”çš„å­—æ®µï¼Œçœ‹ scrapy.Item çš„æºç ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸ª dictæ‰€ä»¥å¯ä»¥è¿™æ ·ç†è§£ï¼š { \"info1\": None, \"info2\": None } spider from name.items import yourItem class YourSpider(scrapy.Spider): name = 'yourname' allowed_domains = ['xxx.com'] start_urls = ['http://xxx.com/yyy/zzz'] def parse(self, response): info1 = response.xpath('//div/a/text()').extract_first() #ç¬¬ä¸€ä¸ª info2 = response.xpath('//div/a/text()').extract() #extract æ°¸è¿œè¿”å›ä¸€ä¸ªæ•°ç»„ item = yourItem() item['info1'] = info1 item['info2'] = info2 yield item æ²¡å•¥å¥½è¯´çš„ï¼Œå°±æ˜¯çˆ¬å–ä¿¡æ¯ï¼Œç„¶åè®¾ç½® item çš„å±æ€§å°±å¥½ã€‚ å¯ä»¥çˆ¬äº†ï¼ï¼å‘½ä»¤è¡Œè¾“å…¥ï¼šscrapy crawl yourname -o filename.csvï¼Œyourname å¯¹åº” YourSpider è¿™ä¸ªç±»çš„ name å˜é‡å€¼ã€‚å°±ä¼šçˆ¬å–æ•°æ®æ”¾åˆ° filename.csv ä¸­ï¼Œè¿˜æœ‰å…¶ä»–æ ¼å¼ï¼Œè‡ªå·±ç ”ç©¶ã€‚ pipelineså¦‚æœä½ ä¸æƒ³ç”¨ scrapy é»˜è®¤çš„ä¿å­˜æ–‡ä»¶æ–¹æ³•ï¼Œé‚£ä¹ˆå°±è‡ªå®šä¹‰ä¸€ä¸ªä¿å­˜æ–‡ä»¶çš„ç®¡é“ï¼š class YourPipeline(object): def process_item(self, item, spider): # ä¼ªä»£ç  # open file # file.write(item.info1) # file.write(item.info2) # save and close file return item ä¹‹ååˆ° settings.pyï¼Œè¾“å…¥ï¼š ITEM_PIPELINES = { 'name.pipelines.YourPipeline': 300, } å¯åŠ¨å½“å‰ç®¡é“é…ç½®ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé å‰ï¼Œç„¶åå°±åªéœ€è¦è¾“å…¥scrapy crawl yournameå°±å¯ä»¥è¿è¡Œå’Œä¿å­˜äº† è°ƒè¯•æˆ‘ç”¨ä¸‡èƒ½ vscodeï¼šæ–°å»ºè°ƒè¯•é…ç½®æ–‡ä»¶ï¼Œè¾“å…¥ { \"version\": \"0.2.0\", \"configurations\": [ { \"name\": \"Scrapy\", \"type\": \"python\", \"request\": \"launch\", \"module\": \"scrapy\", \"args\": [\"crawl\", \"yourname\"] } ] } æå®šï¼ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"scrapy","slug":"scrapy","permalink":"https://tanghaojie.github.io/categories/scrapy/"},{"name":"python","slug":"scrapy/python","permalink":"https://tanghaojie.github.io/categories/scrapy/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://tanghaojie.github.io/tags/python/"},{"name":"scrapy","slug":"scrapy","permalink":"https://tanghaojie.github.io/tags/scrapy/"}],"author":null},{"title":"QGIS pluginå¼€å‘ä½¿ç”¨","slug":"qgis-plugin","date":"2020-04-12T02:17:00.000Z","updated":"2021-05-06T06:56:27.445Z","comments":true,"path":"2020/04/12/qgis-plugin/","link":"","permalink":"https://tanghaojie.github.io/2020/04/12/qgis-plugin/","excerpt":"","text":"èµ·æ­¥1.åˆšæ¥å°±ä¸å»ºè®®çœ‹æ–‡æ¡£æ‰‹åŠ¨åˆ›å»º plugin äº†ï¼Œpython å¾ˆç†Ÿæ‚‰çš„äººå¯ä»¥çœ‹æ–‡æ¡£è¯•è¯•ï¼Œå¦åˆ™è¿˜æ˜¯åˆ«æ‰‹åŠ¨åˆ›å»ºäº†ï¼Œå‡ ä¹æ‰€æœ‰çš„å¼€å‘è€…éƒ½æ˜¯é€šè¿‡Plugin Builderè¿™ä¸ª Plugin æ¥åˆ›å»ºçš„ Pluginï¼Œå®‰è£…å¥½äº†ä»¥åï¼Œæ‰“å¼€ Plugin Builderï¼Œæ ¹æ®æç¤ºè¾“å…¥å†…å®¹ï¼Œä¸€ç›´ä¸‹ä¸€æ­¥å°±åˆ›å»ºå¥½äº†ã€‚ 2.ç”¨ pyrcc5 -o resources.py resources.qrcå‘½ä»¤ï¼ŒæŠŠ resources.qrc èµ„æºæ–‡ä»¶è½¬æ¢æˆ py æ–‡ä»¶ï¼Œä¸»ç¨‹åº test.py æ–‡ä»¶ä¸­å·²ç»è‡ªåŠ¨å¼•å…¥äº†ã€‚å¦‚æœæ²¡æœ‰pyrcc5å‘½ä»¤ï¼Œæ‰§è¡Œpip install PyQt5å®‰è£… PyQtã€‚ 3.æŠŠæ•´ä¸ªç”Ÿæˆçš„æ–‡ä»¶å¤¹ï¼Œæ‹·è´åˆ°ï¼Œ~\\AppData\\Roaming\\QGIS\\QGIS3\\profiles\\default\\python\\plugins ä¸‹é¢ï¼Œæ‰€æœ‰çš„ plugin å…¶å®éƒ½åœ¨è¿™é‡Œã€‚ 4.æ‰“å¼€ qgis æ’ä»¶â€“å·²å®‰è£…ï¼Œå‹¾é€‰ test æ’ä»¶ï¼Œå°±å¯ä»¥çœ‹åˆ°èœå•ä¸Šå¤šäº†æŒ‰é’®ï¼Œç‚¹å‡»å°±èƒ½æ‰“å¼€äº†ã€‚ ä»¥ä¸Šæœ€åŸå§‹çš„ demo å°±èƒ½å¤Ÿçœ‹è§äº†ï¼Œä¸‹é¢è¯´è¯´æ€ä¹ˆè‡ªå·±å†™ä»£ç 5.æ’ä»¶æœ‰ä¸€ä¸ª test*dialog.py æ–‡ä»¶ï¼Œé‡Œé¢æœ€å…³é”®çš„ä¸€å¥ä»£ç åº”è¯¥æ˜¯FORM_CLASS, * = uic.loadUiType(os.path.join(os.path.dirname(**file**), 'Test_dialog_base.ui'))ï¼Œè¿™å°±æ˜¯åŠ è½½è½¬æ¢.uiæ–‡ä»¶ç»™pyqtç”¨çš„ã€‚ 6.ç”Ÿæˆçš„æ’ä»¶æ–‡ä»¶ï¼ŒåŒ…å«äº†Test_dialog_base.uiï¼Œå°±æ˜¯ç•Œé¢æ–‡ä»¶ã€‚å®‰è£…QGISçš„æ—¶å€™è‡ªå¸¦äº†Qt Designerï¼Œç”¨Designerå°±å¯ä»¥æ‰“å¼€å°±èƒ½çœ‹åˆ°å’Œç¼–è¾‘äº†ï¼Œè¿™é‡Œä»å·¦è¾¹æ‹–ä¸€ä¸ªPush Buttonè¿›å»ï¼Œåé¢ç”¨ã€‚ç¼–è¾‘å®Œæˆç•Œé¢ï¼Œå»QGISé‡Œé¢ï¼Œå–æ¶ˆå‹¾é€‰ï¼Œåœ¨é‡æ–°é€‰ä¸­ï¼Œå°±é‡æ–°åŠ è½½æ’ä»¶äº†ï¼Œèƒ½å¤Ÿçœ‹å‡ºæ¥ç»“æœã€‚è¿™é‡Œæ¨èä¸€ä¸ªæ’ä»¶ Plugin Reloaderï¼Œä¸ç”¨æ¯æ¬¡å»å–æ¶ˆé‡å‹¾é€‰ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬é‡åŠ è½½æ’ä»¶ã€‚ 7.ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨.uiæ–‡ä»¶å¯¹åº”çš„.pyæ–‡ä»¶çš„æ„é€ å‡½æ•°ï¼Œ**init**ä¸­ï¼ŒåŠ ä¸Šself.pushButton.clicked.connect(self.pushButtonClicked)ï¼Œæ–‡ä»¶å¤´å¯¼å…¥from PyQt5.QtWidgets import QMessageBoxç„¶åå®šä¹‰æ–¹æ³•ï¼š def pushButtonClicked(self): QMessageBox.warning(None, 'info', 'æµ‹è¯•') 8.å» QGIS é‡Œé¢ reload æ’ä»¶ï¼Œç‚¹å‡»æŒ‰é’®å°±èƒ½çœ‹åˆ°ç»“æœäº†ã€‚ 9.æ›´å¤šçš„ä¸œè¥¿å°±è‡ªå·±å°è¯•å’¯ï¼Œä½ å·²ç»å…¥é—¨äº†ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/categories/QGIS/"},{"name":"python","slug":"QGIS/python","permalink":"https://tanghaojie.github.io/categories/QGIS/python/"}],"tags":[{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/tags/QGIS/"},{"name":"python","slug":"python","permalink":"https://tanghaojie.github.io/tags/python/"}],"author":null},{"title":"uniappå¿«é€Ÿå®è·µ","slug":"fast-uniapp","date":"2020-04-09T17:29:03.000Z","updated":"2021-05-06T06:55:55.726Z","comments":true,"path":"2020/04/10/fast-uniapp/","link":"","permalink":"https://tanghaojie.github.io/2020/04/10/fast-uniapp/","excerpt":"","text":"ä»‹ç»ä¹‹å‰ç»™æ–‡ä¿å±€åšäº† GIS ç³»ç»Ÿå’Œç‰©è”ç½‘ç›‘æ§ç³»ç»Ÿæ•ˆæœä¸é”™ï¼Œç°åœ¨æƒ³å¼„ä¸ª erpï¼Œé—®äº†ä¸€ä¸‹ä¸šåŠ¡è§„æ¨¡ï¼Œå‡ ä¹çº¦ç­‰äºâ€œé›¶â€ã€‚å’‹åŠï¼Œå•ä¸€ä¸šåŠ¡çº¿èµ°åˆ°åº•å‘—ã€‚æœ¬æ¥è¯´æœ€è¿‘ä¸€ç›´åœ¨æ flutterï¼Œå°±ç”¨ flutter ç»™ä»–ä»¬å¼„ä¸€ä¸ªï¼Œapp å’Œ webï¼ˆbetaï¼‰ä¸€å¥—ç›´æ¥å°±ç”Ÿæˆäº†ã€‚æ–¹ä¾¿å¿«é€Ÿï¼ˆçœäº‹ï¼‰ã€‚ç»“æœå‘¢ï¼Œäººå®¶è¦ç”¨å¾®ä¿¡å°ç¨‹åºâ€¦å“ï¼Œç”²æ–¹æ˜¯çˆ¸çˆ¸ã€‚ç»“åˆå·²æœ‰æŠ€æœ¯ç»éªŒå’Œä¸šåŠ¡è§„æ¨¡ï¼ˆå¦‚æœæœ‰çš„è¯{ç¬‘}ï¼‰ï¼Œè¿˜è¦è€ƒè™‘å¯èƒ½å‡ºç°çš„ä¸šåŠ¡å¹³å°å˜æ›´è¿™ç§åŠç‚¸å¤©éœ€æ±‚ï¼Œè°ƒç ”äº†å‡ ä¸ªå¹³å°ï¼Œè¿™é‡Œæˆ‘åˆ—ä¸€ä¸‹ï¼š 1.å¾®ä¿¡å°ç¨‹åºåŸç”Ÿï¼šéš¾ç”¨çš„ ideï¼ŒæŠ€æœ¯æ ˆå°±æ˜¯ web å˜ç§ã€‚2.H5+appï¼šåŸç”Ÿä»£ç å°‘ä¸äº†ï¼ŒAndroid å’Œ iOS è¦å•ç‹¬é€‚é…ï¼Œæ¶‰åŠåˆ°å…¼å®¹æ€§çš„é—®é¢˜ã€‚3.mpvueï¼šç¾å›¢æçš„ï¼ŒåŸºäº Vue.js çš„å°ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œå°ç¨‹åºå’Œ H5 ä¸€å¥—æå®šå‹ã€‚4.uni-appï¼šDcloud æçš„ï¼Œä¹Ÿæ˜¯åŸºäº Vue.js çš„æ¡†æ¶ï¼ŒiOSã€Androidã€H5ã€å„ç§å°ç¨‹åºä¸€å¥—æå®šå‹ã€‚ å¯¹æ¯”äº†ä¸€ä¸‹ï¼Œå¾®ä¿¡å°ç¨‹åºåŸç”Ÿã€H5+appï¼Œæˆ‘ç›´æ¥å°±æ”¾å¼ƒäº†ï¼Œå¾®ä¿¡å°ç¨‹åºé‚£ä¸ª IDE ç®€ç›´ä¸è¦å¤ªéš¾ç”¨ï¼Œè€Œä¸”æ”¹å¹³å°å°±æ˜¯é‡å†™ä»£ç ï¼›H5+app ä¸€ä¸ªäººå¼„å¤ªè´¹äº‹ä¸è¯´ï¼Œç¼ºå°‘ä¼˜åŒ–å¯èƒ½æ•ˆæœä¹Ÿä¸€èˆ¬ï¼Œè™½ç„¶æœ‰åŸç”Ÿ app çš„è¶…é«˜å¤©èŠ±æ¿ï¼Œä½†æ˜¯è°å«å’±å°±ä¸€ä¸ªäººï¼Œè¿˜è¦å¿«é€Ÿå‡ºæ´»å‘¢ï¼›mpvue æœ¬æ¥æˆ‘æ˜¯å‡†å¤‡é€‰çš„ï¼Œå°ç¨‹åº+H5ï¼ŒåŸºæœ¬ä¸Šéƒ½èƒ½å¹²äº†ï¼Œåé¢è¦æ”¹åŸç”Ÿ app çš„è¯ï¼Œæˆ‘å°±å¥— webview çš„å£³ï¼Œå…³é”®æ˜¯å¼€æºå…è´¹ï¼Œæ€ªå°±æ€ªåœ¨å¼€æºå§ï¼Œæˆ‘ä¸Š github çœ‹äº†ä¸‹ commits å’Œ issuesï¼Œæœ€è¿‘çš„ commit æ˜¯å…«ä¸ªæœˆå‰äº†â€¦issues ä¹Ÿæœ‰ç‚¹æ··ä¹±çš„æ„Ÿè§‰ï¼ŒåŠ ä¸Šä¹‹å‰çˆ†å‡ºç¾å›¢çš„ KPI äº‹ä»¶ï¼Œæˆ‘è§‰å¾—ä¸ºäº†æˆ‘çš„ KPI å’Œå¤´å‘ï¼Œè¿˜æ˜¯ç®—äº†å§ã€‚éƒ½è¯´åˆ°è¿™äº†ï¼Œè¿˜æœ‰çš„é€‰å—ï¼Ÿæœ€å¼€å§‹æˆ‘æ˜¯è§‰å¾— uniapp å•†ä¸šè¯å¤ªä¸¥é‡ï¼ˆæ¨å¹¿ï¼‰ï¼ŒåŠ ä¸Šä¸å¼€æºï¼Œè¿˜æ˜¯æœ‰äº›é¡¾è™‘çš„ï¼Œä½†æ˜¯å¥½åƒç°åœ¨æ˜¯ï¼ˆéƒ¨åˆ†ï¼‰å¼€æºäº†ï¼Ÿæ¨å¹¿è¯´æ˜å®˜æ–¹å¾ˆé‡è§†ï¼Œé‚£ã€‚ã€‚è¿˜è¯´ä»€ä¹ˆå‘¢ï¼Œæ·¦ æ·¦å› ä¸ºå¾®ä¿¡å°ç¨‹åºå’Œ uniapp éƒ½æ²¡æè¿‡ï¼ŒèŠ±æ—¶é—´åˆ†åˆ«çœ‹äº†ä¸‹æ–‡æ¡£ï¼Œéƒ½æ˜¯ web å˜ç§ï¼Œä¼š web å°±ä¼šå¼€å‘ã€‚ä¸»è¦æ˜¯ç†Ÿæ‚‰ä¸‹æ•´ä½“çš„æ¡†æ¶ï¼Œä¸ºå•¥è¿™æ ·è®¾è®¡ï¼Œæœ‰å“ªäº›ä¸ªç»„ä»¶åˆ†åˆ«èƒ½å¹²å•¥äº‹ï¼Œæœ‰å“ªäº› APIã€‚ç»†èŠ‚åƒä¸‡åˆ«çœ‹ï¼Œå¤ªèŠ±æ—¶é—´ï¼Œè€Œä¸”ä½ è‚¯å®šè®°ä¸ä½ï¼Œæ‰€ä»¥å°±ç›´æ¥ä¸Šæ‰‹å§ã€‚uniapp æ”¯æŒ Weexï¼Œåœ¨ app ç«¯ï¼Œç”¨ vue é¡µé¢çš„è¯å°±æ˜¯ç”¨ webview æ¸²æŸ“çš„ï¼Œç”¨ nvue çš„è¯å°±æ˜¯ç”¨åŸç”Ÿæ¸²æŸ“ã€‚(ï½¡ï½¥âˆ€ï½¥)ï¾‰ï¾å—¨ï¼Œç­‰äºè¯´ç é‡è¿˜æ˜¯ä¸å°å•Šï¼Œå‘è¿˜æ˜¯å¤šå•Šã€‚ä¸è¿‡ uniapp æ”¯æŒ#ifdef #endifæ¡ä»¶ç¼–è¯‘è¯­æ³•ï¼Œè¿™ä¸ªæ²¡å•¥å¥½è¯´çš„ï¼Œå†™åç«¯çš„éƒ½çŸ¥é“ï¼Œèµä¸€ä¸ªã€‚ç„¶åå°±æ˜¯å†™é¡¹ç›®äº†ï¼Œå¦‚æœçœ‹äº†å¾®ä¿¡å°ç¨‹åºæ–‡æ¡£å’Œ uniapp çš„æ–‡æ¡£ï¼Œä½ å°±ä¼šå‘ç°ï¼Œå…¶å®å°±æ˜¯ä¸ª web å‰ç«¯çš„ä¸œè¥¿ï¼Œæ— éå°±æ˜¯è¯­æ³•å˜äº†ä¸€ç‚¹ï¼Œé…ç½®æ–‡ä»¶é’ˆå¯¹å¤šç«¯åˆå¹¶é‡å°è£…äº†ï¼Œå†™ä»£ç çš„æ—¶å€™è¦æ³¨æ„å…¼å®¹ï¼Œä¸€ä¸ª ui ç»„ä»¶æŠŠå‡ ä¸ªç«¯éƒ½åŒæ—¶è€ƒè™‘è¿›æ¥ï¼Œç”¨æ¡ä»¶ç¼–è¯‘ã€‚å°±è¡Œäº†ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå¿«é€Ÿå®è·µå°±ä»‹ç»å®Œäº†ï¼ˆå…¶å®æ˜¯ä¸çŸ¥é“è¯´å•¥äº†ï¼‰ã€‚ï¼ˆé€ƒï¼‰ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"uniapp","slug":"uniapp","permalink":"https://tanghaojie.github.io/categories/uniapp/"}],"tags":[{"name":"uniapp","slug":"uniapp","permalink":"https://tanghaojie.github.io/tags/uniapp/"}],"author":null},{"title":"ç½‘é¡µæ’ä»¶","slug":"weatherPlugin","date":"2020-04-03T13:47:44.000Z","updated":"2021-05-06T06:57:04.487Z","comments":true,"path":"2020/04/03/weatherPlugin/","link":"","permalink":"https://tanghaojie.github.io/2020/04/03/weatherPlugin/","excerpt":"","text":"å¤©æ°”ä¸­å›½å¤©æ°”ç½‘ï¼šhttps://cj.weather.com.cn/plugin/pcç”Ÿæˆæ’ä»¶æ”¾åˆ°ï¼š themes/matery/layout/layout.ejs åŠ¨æ€è¯—è¯ä»Šæ—¥è¯—è¯ï¼šhttps://www.jinrishici.com/ä¸€è¨€: https://hitokoto.cn/ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"}],"author":null},{"title":"æˆ‘çš„åšå®¢åœ°å€","slug":"myblogaddress","date":"2020-04-03T12:43:56.000Z","updated":"2021-05-06T07:50:56.183Z","comments":true,"path":"2020/04/03/myblogaddress/","link":"","permalink":"https://tanghaojie.github.io/2020/04/03/myblogaddress/","excerpt":"","text":"ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå•çº¯æŠŠåšå®¢éƒ¨ç½²åˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œå¾ˆå¯èƒ½è®¿é—®ä¸åˆ°ï¼Œæˆ–è€…è®¿é—®å¾ˆæ…¢ï¼Œæ‰€ä»¥è¿™é‡ŒåŒæ—¶éƒ¨ç½²åˆ° github å’Œ giteeï¼Œæé«˜è®¿é—®é€Ÿåº¦ [æ‰‹åŠ¨ç‹—å¤´] å‰ç½®æ¡ä»¶ï¼šä½ ä¼šæ­åšå®¢ï¼ˆç½‘ç«™ï¼‰ ç¤ºä¾‹æˆ‘çš„ä¸¤ä¸ªåšå®¢åœ°å€ï¼šhttps://tanghaojie.github.io/http://jackie_tang.gitee.io/ gitee pages çš„ä¸€ä¸ªå‘æ¯æ¬¡è¿œç¨‹éƒ¨ç½²ä»¥åï¼Œéœ€è¦æ‰‹åŠ¨åˆ° gitee pages æœåŠ¡é‡Œé¢å»ï¼Œæ‰‹åŠ¨ç‚¹å‡»æ›´æ–°æŒ‰é’®æ‰èƒ½è‡ªåŠ¨æ›´æ–°åšå®¢ã€‚ï¼ˆæƒ³è‡ªåŠ¨æ›´æ–°ï¼Ÿgitee pages pro äº†è§£ä¸€ä¸‹ï¼‰ ä» github åŒæ­¥æ–¹å¼éƒ¨ç½² åœ¨ gitee æ–°å»ºä»“åº“:æ³¨æ„ç‚¹ï¼š1.ä»“åº“åç”¨ gitee ç»™ä½ åˆ†é…çš„ä¸ªäººåœ°å€åï¼Œå¯ä»¥åˆ° ä¸ªäººä¸­å¿ƒâ€“&gt;ä¸ªäººç©ºé—´åœ°å€ ä¸­çœ‹åˆ°ï¼Œä¸ä¸€å®šæ˜¯ä½ çš„ç”¨æˆ·åï¼Œæ¯”å¦‚æˆ‘çš„åœ°å€æ˜¯ï¼šJackie_Tangï¼Œæˆ‘çš„ç”¨æˆ·åæ˜¯ï¼šJackieTangã€‚å› ä¸ºæˆ‘æ”¹è¿‡åã€‚ã€‚ã€‚2.ä¸‹é¢é€‰æ‹©å¯¼å…¥å·²æœ‰ä»“åº“ï¼Œç„¶åå¡«å…¥ github åœ°å€ä»¥åï¼Œä»“åº“åä¼šè‡ªåŠ¨å˜æˆ github ä»“åº“åï¼Œæ‰€ä»¥åˆéœ€è¦ä½ è‡ªå·±å»ä¸Šé¢æ”¹ä¸€æ¬¡ ç‚¹å‡» åˆ›å»ºï¼Œç­‰å¾… gitee è‡ªåŠ¨å¯¼å…¥ github ä»“åº“ã€‚ å¯¼å…¥å®Œæˆå¦‚å›¾é…ç½®æ³¨æ„ç‚¹ï¼š1.é€‰æ‹©ä½¿ç”¨ Httpsï¼Œå¦åˆ™ä¼šè·¨åŸŸ ä»¥ä¸Šæ­¥éª¤å°±å®Œæˆäº†ï¼Œä½ çš„åšå®¢åœ°å€ä¸ºï¼š{ä¸ªäººåœ°å€å}.gitee.ioï¼Œä»¥åè¦åŒæ­¥ github çš„æ•°æ®ï¼Œåªéœ€è¦è¿™æ ·æ“ä½œï¼š åŒæ­¥ä¸Šä¼ æˆ‘ç”¨çš„ hexoï¼Œåœ¨ _config.yml æ–‡ä»¶ï¼š deploy: type: git repo: github: https://github.com/tanghaojie/tanghaojie.github.io.git gitee: https://gitee.com/Jackie_Tang/Jackie_Tang.git branch: master åŠ ä¸¤ä¸ª repo å°±å¥½ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"}],"author":null},{"title":"ä¸­åäººæ°‘å…±å’Œå›½çœçº§è¡Œæ”¿åŒºåŸŸç•Œçº¿æ ‡æ³¨çš„å°tip","slug":"provincial-boundary","date":"2020-04-01T13:45:29.000Z","updated":"2021-05-06T07:52:05.757Z","comments":true,"path":"2020/04/01/provincial-boundary/","link":"","permalink":"https://tanghaojie.github.io/2020/04/01/provincial-boundary/","excerpt":"","text":"å¦‚æœå¤§æ®µä»¥æ²³é“ï¼ˆæˆ–å…¶ä»–æ°´ä½“ï¼‰ä¸ºçœç•Œçš„ï¼Œå…¨éƒ¨ä»¥å®çº¿æ ‡æ³¨ä¼šå½±å“æ²³æµæ°´ä½“çš„è¿ç»­å‘ˆç°æ—¶ï¼Œåˆ™ç”¨æ–­ç»­çº¿è¡¨ç¤ºã€‚å¦‚æ™‹é™•ã€æ™‹è±«é»„æ²³çœç•Œæ®µï¼Œå·è—ã€å·æ»‡ï¼ˆä¸œæ®µï¼‰é•¿æ±Ÿçœç•Œæ®µã€‚ è¯´æ˜æˆ‘æœ¬äººæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªè§„å®šçš„å‡ºå¤„ï¼Œæ˜¯å¦æ˜¯å›½å®¶è§„èŒƒä¸åšä¿è¯ã€‚ä½†æ˜¯ç™¾åº¦åœ°å›¾ç°åœ¨çœ‹å·²ç»æ˜¯è¿™æ ·åšæ ‡æ³¨äº†ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/categories/GIS/"}],"tags":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/tags/GIS/"}],"author":null},{"title":"flutterå®šä½æ’ä»¶location","slug":"flutter-location","date":"2020-03-31T12:31:11.000Z","updated":"2021-05-06T07:56:14.366Z","comments":true,"path":"2020/03/31/flutter-location/","link":"","permalink":"https://tanghaojie.github.io/2020/03/31/flutter-location/","excerpt":"","text":"iOS æ²¡æµ‹è¯•ï¼ŒAndroid éœ€è¦ç”¨åˆ° GMS æ¥è¾…åŠ©å®šä½ï¼Œæ‰€ä»¥å›½å†…ä¸èƒ½ç”¨ï¼ä¸èƒ½ç”¨ï¼ï¼ä¸èƒ½ç”¨ï¼ï¼ï¼ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"flutter","slug":"flutter","permalink":"https://tanghaojie.github.io/categories/flutter/"}],"tags":[{"name":"flutter","slug":"flutter","permalink":"https://tanghaojie.github.io/tags/flutter/"}],"author":null},{"title":"flutteråŠ è½½åœ°å›¾çš„å‡ ç§æ–¹å¼å¯¹æ¯”[æµ‹è¯•]","slug":"flutter-load-map","date":"2020-03-31T12:14:47.000Z","updated":"2021-05-06T07:55:58.254Z","comments":true,"path":"2020/03/31/flutter-load-map/","link":"","permalink":"https://tanghaojie.github.io/2020/03/31/flutter-load-map/","excerpt":"","text":"1.flutter_mapï¼šLeaflet ç”¨ Flutter çš„å®ç°ï¼Œä¸»è¦ç”¨äºåŠ è½½ç“¦ç‰‡åœ°å›¾å’Œç®€å•æ³¨è®°ï¼Œå¤æ‚çš„å‡ ä½•è¦ç´ å¯ä»¥ç”¨æ’ä»¶çš„å½¢å¼ï¼Œä½†è¦è‡ªå·±å®ç°ä»£ç ã€‚æ²¡æœ‰è‡ªå¸¦å®šä½çš„åŠŸèƒ½ï¼Œè¦è‡ªå·±å¤„ç†ã€‚ç»¼åˆæ¥çœ‹ï¼Œåªç”¨ç“¦ç‰‡åœ°å›¾ï¼Œå®šä½è¿™äº›åŸºç¡€åŠŸèƒ½çš„è¯ï¼Œå¯ä»¥é€‰è¿™ä¸ªï¼Œå›¢é˜Ÿå¼ºå¤§çš„è¯ï¼Œå¤æ‚åŠŸèƒ½ä¹Ÿå¯ä»¥è‡ªå·±ææ’ä»¶ã€‚å¤©èŠ±æ¿æŒºé«˜çš„ã€‚ 2.webview_flutterï¼šfluter å®˜æ–¹å‡ºå“çš„ webview æ’ä»¶ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç½‘é¡µèƒ½å¹²çš„äº‹ä»–éƒ½èƒ½å¹²ã€‚æœ€å¤§çš„é—®é¢˜æ˜¯ç›®å‰è¿˜æ˜¯é¢„è§ˆç‰ˆï¼Œå®˜æ–¹è¯´å› ä¸ºç”¨äº†æ–°çš„æœºåˆ¶ï¼Œå…·ä½“ä»€ä¹ˆæœºåˆ¶æˆ‘ä¹Ÿæ²¡çœ‹ï¼Œèƒ½ä¸èƒ½å®ç°å®˜æ–¹æ²¡è¯´ï¼Œdeadline ä¹Ÿæ²¡è¯´ï¼Œæœ‰ç‚¹ä¸è®©äººæ”¾å¿ƒã€‚ 3.flutter_webview_pluginï¼šç½‘ä¸Šç»¼åˆæ¨èæ¯”è¾ƒå¤šçš„ä¸€ä¸ªæ’ä»¶äº†ï¼Œå°±æ˜¯è°ƒç”¨ native webviewï¼Œç¨³å®šæ€§ï¼Œå…¼å®¹æ€§è‚¯å®šæ²¡é—®é¢˜ã€‚ä½†æ˜¯ç”±äºæ¥å…¥åŸç”Ÿï¼Œå¯¼è‡´ webview å§‹ç»ˆåœ¨æœ€ä¸Šå±‚ï¼Œä¼šè¦†ç›–åœ¨æ‰€æœ‰ Flutter widget ä¹‹ä¸Šï¼Œçµæ´»æ€§ç‰ºç‰²å¾ˆå¤§ã€‚æœ€æ–°çš„è¯´æ˜é‡Œå†™äº†ï¼Œè¦æŠŠè¿™ä¸ªæ’ä»¶åˆå¹¶åˆ°ä¸Šé¢æåˆ°çš„å®˜æ–¹æ’ä»¶é‡Œé¢å»äº†ã€‚æ‰€ä»¥åŸºæœ¬ä¸Šä¸ç”¨é€‰äº†ã€‚ 4.å…¶ä»–åº“ï¼šæ¯”å¦‚è¯´é«˜å¾· amapï¼Œç™¾åº¦åœ°å›¾ï¼Œè¿™ç±»å°±å±€é™å¹³å°äº†ã€‚ ç›®å‰å°±æµ‹è¯•äº†è¿™å‡ ç§åœ°å›¾ä½¿ç”¨æ–¹å¼ï¼Œæ€»çš„æ¥è¯´ï¼Œæœ‰å›¢é˜Ÿï¼Œæœ‰æ—¶é—´ï¼Œèƒ½è‡ªå·±ç ”å‘çš„ï¼Œå¯ä»¥ä¸Šã€‚ä¸ç„¶çš„è¯è¿˜æ˜¯ç”¨æ··åˆå¼€å‘å§ï¼Œflutter è¿˜éœ€è¦ç»™ä»–äº›æ—¶é—´æ¥æˆç†Ÿã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"flutter","slug":"flutter","permalink":"https://tanghaojie.github.io/categories/flutter/"}],"tags":[{"name":"flutter","slug":"flutter","permalink":"https://tanghaojie.github.io/tags/flutter/"}],"author":null},{"title":"Flutter Doctorï¼šAndroid license status unknown","slug":"post","date":"2020-03-27T10:22:12.000Z","updated":"2021-05-06T06:56:21.094Z","comments":true,"path":"2020/03/27/post/","link":"","permalink":"https://tanghaojie.github.io/2020/03/27/post/","excerpt":"","text":"æ‰§è¡Œï¼š flutter doctor --android-licenses ä¹‹åä¸€è·¯åŒæ„å°±å¥½äº†ã€‚ å¦‚æœæ˜¾ç¤ºï¼š &gt; Android sdkmanager tool not found (PATH) 1.æ‰“å¼€ Android SDK Manager 2.é€‰ SDK Tools 3.æŠŠä¸‹é¢çš„ï¼ŒHide Obsolete Packagesï¼Œå–æ¶ˆå‹¾é€‰ 4.æ‰“å‹¾ Android SDK Tools (Obsolete) 5.ç¡®å®šå®‰è£… Flutter å›¢é˜ŸçŸ¥é“è¿™ä¸ªé—®é¢˜ï¼Œå®˜æ–¹å»ºè®®å°±æ˜¯è¿™ä¹ˆå¤„ç†ï¼Œåç»­ç‰ˆæœ¬ä¼šè§£å†³çš„ã€‚ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"flutter","slug":"flutter","permalink":"https://tanghaojie.github.io/categories/flutter/"}],"tags":[{"name":"flutter","slug":"flutter","permalink":"https://tanghaojie.github.io/tags/flutter/"}],"author":null},{"title":"office2016é›¶å”®ç‰ˆè½¬VOLç‰ˆ","slug":"office2016ToVol","date":"2020-03-19T11:06:57.000Z","updated":"2021-05-06T06:56:18.072Z","comments":true,"path":"2020/03/19/office2016ToVol/","link":"","permalink":"https://tanghaojie.github.io/2020/03/19/office2016ToVol/","excerpt":"","text":"ä»¥ä¸‹ä»£ç å¤åˆ¶ä¸ºï¼š.bat æ–‡ä»¶ @ECHO OFF&PUSHD %~DP0 setlocal EnableDelayedExpansion&color 3e & cd /d \"%~dp0\" title office2016 retailè½¬æ¢volç‰ˆ %1 %2 mshta vbscript:createobject(\"shell.application\").shellexecute(\"%~s0\",\"goto :runas\",\"\",\"runas\",1)(window.close)&goto :eof :runas if exist \"%ProgramFiles%\\Microsoft Office\\Office16\\ospp.vbs\" cd /d \"%ProgramFiles%\\Microsoft Office\\Office16\" if exist \"%ProgramFiles(x86)%\\Microsoft Office\\Office16\\ospp.vbs\" cd /d \"%ProgramFiles(x86)%\\Microsoft Office\\Office16\" :WH cls echo. echo é€‰æ‹©éœ€è¦è½¬åŒ–çš„officeç‰ˆæœ¬åºå· echo. echo -------------------------------------------------------------------------------- echo 1. é›¶å”®ç‰ˆ Office Pro Plus 2016 è½¬åŒ–ä¸ºVOLç‰ˆ echo. echo 2. é›¶å”®ç‰ˆ Office Visio Pro 2016 è½¬åŒ–ä¸ºVOLç‰ˆ echo. echo 3. é›¶å”®ç‰ˆ Office Project Pro 2016 è½¬åŒ–ä¸ºVOLç‰ˆ echo. echo. -------------------------------------------------------------------------------- set /p tsk=\"è¯·è¾“å…¥éœ€è¦è½¬åŒ–çš„officeç‰ˆæœ¬åºå·ã€å›è½¦ã€‘ç¡®è®¤ï¼ˆ1-3ï¼‰: \" if not defined tsk goto:err if %tsk%==1 goto:1 if %tsk%==2 goto:2 if %tsk%==3 goto:3 :err goto:WH :1 cls echo æ­£åœ¨å®‰è£… KMS è®¸å¯è¯... for /f %%x in ('dir /b ..\\root\\Licenses16\\proplusvl_kms*.xrm-ms') do cscript ospp.vbs /inslic:\"..\\root\\Licenses16\\%%x\" >nul echo æ­£åœ¨å®‰è£… MAK è®¸å¯è¯... for /f %%x in ('dir /b ..\\root\\Licenses16\\proplusvl_mak*.xrm-ms') do cscript ospp.vbs /inslic:\"..\\root\\Licenses16\\%%x\" >nul set /p y=è¯·è¾“å…¥æ¿€æ´»å¯†é’¥ï¼ŒæŒ‰å›è½¦ç¡®å®š: cscript ospp.vbs /inpkey:%y% goto :e :2 cls echo æ­£åœ¨å®‰è£… KMS è®¸å¯è¯... for /f %%x in ('dir /b ..\\root\\Licenses16\\visio???vl_kms*.xrm-ms') do cscript ospp.vbs /inslic:\"..\\root\\Licenses16\\%%x\" >nul echo æ­£åœ¨å®‰è£… MAK è®¸å¯è¯... for /f %%x in ('dir /b ..\\root\\Licenses16\\visio???vl_mak*.xrm-ms') do cscript ospp.vbs /inslic:\"..\\root\\Licenses16\\%%x\" >nul set /p y=è¯·è¾“å…¥æ¿€æ´»å¯†é’¥ï¼ŒæŒ‰å›è½¦ç¡®å®š: cscript ospp.vbs /inpkey:%y% goto :e :3 cls echo æ­£åœ¨å®‰è£… KMS è®¸å¯è¯... for /f %%x in ('dir /b ..\\root\\Licenses16\\project???vl_kms*.xrm-ms') do cscript ospp.vbs /inslic:\"..\\root\\Licenses16\\%%x\" >nul echo æ­£åœ¨å®‰è£… MAK è®¸å¯è¯... for /f %%x in ('dir /b ..\\root\\Licenses16\\project???vl_mak*.xrm-ms') do cscript ospp.vbs /inslic:\"..\\root\\Licenses16\\%%x\" >nul set /p y=è¯·è¾“å…¥æ¿€æ´»å¯†é’¥ï¼ŒæŒ‰å›è½¦ç¡®å®š: cscript ospp.vbs /inpkey:%y% goto :e :e echo. echo è½¬åŒ–å®Œæˆï¼ŒæŒ‰ä»»æ„é”®é€€å‡ºï¼ pause >nul exit è®©å¡«å†™ç§˜é’¥æ—¶ï¼Œè¾“å…¥ XQNVK-8JYDB-WJ9W3-YJ8YR-WFG99 ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"}],"tags":[{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"}],"author":null},{"title":"vue use video.js support flash rtmp","slug":"vueVideo","date":"2020-03-12T13:06:17.000Z","updated":"2021-05-06T06:56:14.813Z","comments":true,"path":"2020/03/12/vueVideo/","link":"","permalink":"https://tanghaojie.github.io/2020/03/12/vueVideo/","excerpt":"","text":"åœ¨ Vue ä¸­ä½¿ç”¨ video.jsï¼Œå…¼å®¹ flash è§†é¢‘ï¼Œç ”ç©¶äº†ä¸€å¤©ï¼Œç®€å•è®°å½•ä¸€ä¸‹ã€‚ 1.åŒ…å®‰è£… npm install --save videojs npm install --save videojs-flash //å¦‚æœéœ€è¦ç”¨flashçš„è¯ 2.å®ç° vue-video.vue æ–‡ä»¶ &lt;template> &lt;div> &lt;video ref=\"videoPlayer\" class=\"video-js\">&lt;/video> &lt;/div> &lt;/template> &lt;script> import videojs from 'video.js' import 'videojs-flash' // if use flash import SWF_PATH from 'videojs-swf/dist/video-js.swf' // if use flash import 'video.js/dist/video-js.min.css' export default { props: { options: { type: Object, default() { return {} } } }, data() { return { player: null } }, mounted() { this.options.flash = {} // if use flash this.options.flash.swf = SWF_PATH // if use flash this.player = videojs(this.$refs.videoPlayer, this.options) }, beforeDestroy() { if (this.player) { this.player.dispose() } } } &lt;/script> 3.ä½¿ç”¨ &lt;template> &lt;div id=\"app\"> &lt;vue-video :options=\"videoOptions\" /> &lt;/div> &lt;/template> &lt;script> import vueVideo from './path/to/vue-video.vue' export default { name: 'App', components: { vueVideo }, data() { return { // videoOptionsæ ‡å‡†å‚è€ƒ https://docs.videojs.com/ videoOptions: { autoplay: true, controls: false, language: 'zh', width: 100, height: 200, sources: [ { src: 'rtmp://*************/live/qq', type: 'rtmp/flv' } ] // techOrder: ['flash'] } } } } &lt;/script> rtmpã€mp4 å·²æµ‹è¯•æ²¡æœ‰é—®é¢˜ï¼Œå…¶ä»–æ ¼å¼å°±æ²¡æµ‹è¯•äº†ã€‚éœ€è¦å‘å¸ƒæ‰èƒ½è¿›è¡Œæµ‹è¯•ï¼Œç±»ä¼¼ file://C:/test.html è¿™ç§æ–‡ä»¶å½¢å¼çš„æ˜¯æ— æ³•ä½¿ç”¨çš„ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":"vue","slug":"vue","permalink":"https://tanghaojie.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://tanghaojie.github.io/tags/vue/"}],"author":null},{"title":"Postgiså’ŒEntityFrameworkCoreçš„å…³ç³»æ˜ å°„ï¼Œå‡ ä½•å­—æ®µæ˜ å°„","slug":"entityframeworkcorewithpostgis","date":"2019-12-12T13:02:03.000Z","updated":"2021-05-06T06:56:11.229Z","comments":true,"path":"2019/12/12/entityframeworkcorewithpostgis/","link":"","permalink":"https://tanghaojie.github.io/2019/12/12/entityframeworkcorewithpostgis/","excerpt":"","text":"è¿™ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºCode Firstæ¨¡å¼ï¼Œå…¶ä»–æ¨¡å¼æˆ‘ä¸æ€ä¹ˆç”¨çš„ï¼Œä¸æ•¢ä¿è¯ ç°åœ¨æå¼€å‘æ•°æ®åº“æ“ä½œåŸºæœ¬ä¸Šéƒ½ç”¨ Orm äº†å§ï¼Œä½†æ˜¯æˆ‘ä»¬æ GIS çš„ï¼Œå› ä¸ºæ¶‰åŠåˆ°ç©ºé—´å‡ ä½•å­—æ®µã€ç©ºé—´æ‹“æ‰‘è¿ç®—æ“ä½œçš„æƒ…å†µï¼Œå¾ˆå¤šæ—¶å€™ä¼ ç»Ÿçš„ Orm å°±è§£å†³ä¸äº†äº†ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™è¦ä¹ˆå°±ç›´æ¥ç”¨ odbc åŸç”Ÿ Sql æ“ä½œäº†ï¼›æˆ–è€…æ˜¯ä¸šåŠ¡éƒ¨åˆ† EF+ç©ºé—´å‡ ä½• Sql è¿™ä¹ˆæ¥æ“ä½œã€‚è¿™ä¸¤ä¸ªæ–¹æ¡ˆå®ç°èµ·æ¥ç¡®å®æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å‰è€…ç”¨èµ·æ¥å®åœ¨éº»çƒ¦ï¼Œå¾ˆå¤šç®€å•çš„ä¸œè¥¿å°±æå¤æ‚äº†ï¼Œè¦ä¹ˆç»Ÿä¸€å°è£…ä¸€ä¸‹çš„è¯å°±åˆå›åˆ° Orm çš„è·¯å­ä¸Šï¼›åè€…æ˜¯æœ€çµæ´»çš„ä¸€ç§æ–¹æ¡ˆäº†ï¼Œä»»ä½•éœ€æ±‚éƒ½å¯ä»¥ç”¨è¿™ä¸ªåŠæ³•æ¥è§£å†³ï¼Œä½†é—®é¢˜å°±æ˜¯æ•´ä¸ªè½¯ä»¶çš„æ¡†æ¶ä¼šæ˜¾å¾—å¾ˆæ··ä¹±ï¼Œæ–°äººæ¥äº†ç»å¸¸é—®ä¸ºå•¥è¦è¿™æ ·æï¼Œæ€ç»´åˆ‡æ¢èµ·æ¥å¾ˆéº»çƒ¦ï¼Œå¦‚æœè¦æ”¹éœ€æ±‚è¿˜æ¶‰åŠåˆ°ç©ºé—´å‡ ä½•çš„è¯ï¼Œé‚£åªèƒ½æ‰“ä¸€æ¶å¥½äº†â€¦ ä¹‹å‰çš„ DotnetFramework+Npgsql+EF æ˜¯ä¸æ”¯æŒä½¿ç”¨ PostGIS æ‰©å±•çš„ï¼Œå®˜æ–¹ä¸€ç›´ä¹Ÿæ²¡æ˜ç¡®è¡¨æ€åç»­è§„åˆ’ä»€ä¹ˆçš„ï¼Œç›´åˆ°æœ€è¿‘åœ¨ github ä¸Šçœ‹åˆ°å¼€å‘è€…è¯´ä»¥ååº”è¯¥ä¸ä¼šæ”¯æŒäº†ï¼Œä¼šæŠŠé‡å¿ƒæ”¾åˆ° EF Core ä¸Šã€‚å› æ­¤ï¼Œæƒ³è¦ç›´æ¥æ˜ å°„å‡ ä½•å­—æ®µå‡ ä¹å˜æˆäº†ä¸å¯èƒ½çš„äº‹æƒ…ã€‚ ç½‘ä¸Šæœ‰ç”¨ SharpMap åšæ˜ å°„çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯æˆ‘ä¸€ç›´æ²¡æœ‰æµ‹è¯•æˆåŠŸè¿‡ &gt; å®˜æ–¹çš„æ•°æ®ç±»å‹æ˜ å°„è¡¨é‡Œé¢ä¹Ÿå†™äº† System.Data.Spatial.DbGeometry å¯ä»¥æ˜ å°„åˆ° Geometry ç±»å‹ã€‚è¿™ä¸ªèƒ½åœ¨ CodeFirst ä¸‹è¯†åˆ«ï¼Œä½†ç”Ÿæˆçš„å­—æ®µç±»å‹å¹¶ä¸æ˜¯ Geometryï¼Œè€Œæ˜¯ Byte[]ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“å“ªé”™äº†ï¼Œè¯¶ ç›´åˆ°æœ€è¿‘æˆ‘æ‰“ç®—æŠŠå¹³å°åˆ‡æ¢åˆ°.NetCoreï¼Œç„¶åå»ç ”ç©¶äº†ä¸€ä¸‹ï¼Œæ•´ä¸ªäººå°±è±ç„¶å¼€æœ—äº†å•Šã€‚1.å¾®è½¯å®˜æ–¹æ˜ç¡®è¡¨æ€å®ç°å‡ ä½•ç±»å‹çš„å­—æ®µã€‚2.Npgsql çš„ Core ç‰ˆæœ¬ç¡®å®åœ¨å®ç° Postgis çš„ä¸œè¥¿ï¼Œè€Œä¸”è¿›åº¦ç¥é€Ÿã€‚é‚£ä¹ˆï¼Œå°±ç”¨å‘—~ ä¾èµ–å¾ˆç®€å•ï¼Œå°±ä¸¤ä¸ªåŒ…ï¼š 1.Npgsql.EntityFrameworkCore.PostgreSQL 2.Npgsql.EntityFrameworkCore.PostgreSQL.NetTopologySuite ç„¶åæ˜¯é…ç½®ï¼Œé¦–å…ˆæ•°æ®åº“é‡Œé¢è¦å¯ç”¨ Postgisï¼Œç®€å•ï¼šCreate Extension Postgis;EFCore æ¡†æ¶ï¼š dbContextOptions.UseNpgsql(connectionString, o => o.UseNetTopologySuite()); //è¿™åœ¨å“ªè‡ªå·±æ‰¾ä¸€ä¸‹ //è¿™åœ¨ä½ çš„DbContexté‡Œé¢ protected override void OnModelCreating(ModelBuilder builder) { builder.HasPostgresExtension(\"postgis\"); //å¯ç”¨postgisæ‰©å±•ï¼Œéœ€è¦æ‰‹åŠ¨å†™æ‰©å±•åä¹Ÿæ˜¯æœ‰åŸå› çš„å“¦ } é½æ´»äº†ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚ä½¿ç”¨çš„è¯å°±å¾ˆç®€å•äº†ï¼š using NetTopologySuite.Geometries; public class TestGeometry{ [Column(TypeName = \"geometry (MultiLineString)\")] //å¯ä»¥æŒ‡å®šç±»å‹ã€ç»´åº¦ã€åæ ‡ç³» public MultiLineString Geom { get; set; } } æœ‰äº†è¿™ä¸ªåç»­çš„æ“ä½œå°±ç®€å•å¤šäº†ï¼š Geom.Area //é¢ç§¯ Geom.AsBinary() //è½¬wkb Geom.AsText() //åŒToString()ï¼Œè½¬wkt ... ... å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œå®˜æ–¹æ–‡æ¡£å¾ˆå…¨é¢çš„ã€‚ _ è¡¥å……ä¸€ä¸‹å…¶ä»–çš„å‘å§ï¼Œè½¬ .Net Core ä»¥åï¼ŒGdal ä¼šæˆä¸ºä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œè¿™ä¸ªéœ€è¦å¥½å¥½çš„è¯„ä¼°ä¸€ä¸‹ï¼ŒGdal ç›®å‰è¿˜æ²¡æœ‰å®˜æ–¹åš Core çš„é€‚é…ï¼Œè¿™ä¸ªå½±å“æŒºå¤§çš„ã€‚å½“ç„¶ Gdal çš„åŠŸèƒ½ä¹Ÿæœ‰ç›¸åº”å„ä¸ªç‹¬ç«‹çš„åº“èƒ½æ›¿æ¢çš„ï¼Œä½†å§‹ç»ˆä¸ä¼šåƒ Gdal è¿™ä¹ˆå¾—å¿ƒåº”æ‰‹ï¼Œä¸€å®šè¦æ³¨æ„è¯„ä¼°è¿™ä¸€ç‚¹ï¼ï¼ï¼ _ ç‰ˆæƒå£°æ˜ï¼šé™¤éæ³¨æ˜ï¼Œæœ¬åšæ–‡ç« å‡ä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·ä»¥é“¾æ¥å½¢å¼æ ‡æ˜æœ¬æ–‡åœ°å€ã€‚","categories":[{"name":".net core","slug":"net-core","permalink":"https://tanghaojie.github.io/categories/net-core/"},{"name":"GIS","slug":"net-core/GIS","permalink":"https://tanghaojie.github.io/categories/net-core/GIS/"}],"tags":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/tags/GIS/"},{"name":".net core","slug":"net-core","permalink":"https://tanghaojie.github.io/tags/net-core/"}],"author":null},{"title":"ç½‘ç«™æ”¶å½•","slug":"website","date":"2019-10-12T08:22:48.000Z","updated":"2021-05-06T06:58:58.765Z","comments":true,"path":"2019/10/12/website/","link":"","permalink":"https://tanghaojie.github.io/2019/10/12/website/","excerpt":"","text":"Google æ¢ç´¢å®éªŒå®¤","categories":[{"name":"website","slug":"website","permalink":"https://tanghaojie.github.io/categories/website/"}],"tags":[{"name":"website","slug":"website","permalink":"https://tanghaojie.github.io/tags/website/"}],"author":null},{"title":"åœ°ç†ä¿¡æ¯ç›¸å…³æ ‡å‡†","slug":"gisstandard","date":"2019-10-12T07:58:36.000Z","updated":"2021-05-06T06:56:04.582Z","comments":true,"path":"2019/10/12/gisstandard/","link":"","permalink":"https://tanghaojie.github.io/2019/10/12/gisstandard/","excerpt":"","text":"OGC å¼€æ”¾åœ°ç†ç©ºé—´ä¿¡æ¯è”ç›Ÿ(Open Geospatial Consortium),æ˜¯ä¸€ä¸ªéç›ˆåˆ©çš„å›½é™…æ ‡å‡†ç»„ç»‡ï¼Œå®ƒåˆ¶å®šäº†æ•°æ®å’ŒæœåŠ¡çš„ä¸€ç³»åˆ—æ ‡å‡†ï¼ŒGIS å‚å•†æŒ‰ç…§è¿™ä¸ªæ ‡å‡†è¿›è¡Œå¼€å‘å¯ä¿è¯ç©ºé—´æ•°æ®çš„äº’æ“ä½œã€‚ Spatial reference åæ ‡ç³»ç»Ÿæ”¶å½•ã€æŸ¥è¯¢ã€ä¸Šä¼ ã€æ•™è‚²ã€‚ GDal GDAL(Geospatial Data Abstraction Library)æ˜¯ä¸€ä¸ªåœ¨ X/MIT è®¸å¯åè®®ä¸‹çš„å¼€æºæ …æ ¼ç©ºé—´æ•°æ®è½¬æ¢åº“ã€‚å®ƒåˆ©ç”¨æŠ½è±¡æ•°æ®æ¨¡å‹æ¥è¡¨è¾¾æ‰€æ”¯æŒçš„å„ç§æ–‡ä»¶æ ¼å¼ã€‚å®ƒè¿˜æœ‰ä¸€ç³»åˆ—å‘½ä»¤è¡Œå·¥å…·æ¥è¿›è¡Œæ•°æ®è½¬æ¢å’Œå¤„ç†ã€‚OGR æ˜¯ GDAL é¡¹ç›®çš„ä¸€ä¸ªåˆ†æ”¯ï¼ŒåŠŸèƒ½ä¸ GDAL ç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒæä¾›å¯¹çŸ¢é‡æ•°æ®çš„æ”¯æŒã€‚ epsg å…¨çƒåæ ‡ç³»ç»Ÿ","categories":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/categories/GIS/"}],"tags":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/tags/GIS/"}],"author":null},{"title":"åœ°ç†åœ°å›¾æ•°æ®æä¾›ç½‘ç«™","slug":"gisdatawebsites","date":"2019-10-12T07:51:21.000Z","updated":"2021-05-06T06:55:58.677Z","comments":true,"path":"2019/10/12/gisdatawebsites/","link":"","permalink":"https://tanghaojie.github.io/2019/10/12/gisdatawebsites/","excerpt":"","text":"OSGeo ä¸­å›½ å¼€æ”¾åœ°ç†ç©ºé—´ä¿¡æ¯ç§‘å­¦ï¼šæŠ€æœ¯ã€æ•°æ®ã€çŸ¥è¯†å…±äº«ã€‚ spatial hadoop ä¸€ä¸ªä¸ºç©ºé—´æ•°æ®è®¾è®¡çš„ map reduce æ¡†æ¶ï¼Œæœ‰å¾ˆå¤šè¶…å¤§çš„æ•°æ®é›†æä¾›ä¸‹è½½ã€‚ å…¨å›½åœ°ç†ä¿¡æ¯èµ„æºç›®å½•æœåŠ¡ å›½å®¶åŸºç¡€åœ°ç†ä¿¡æ¯ä¸­å¿ƒæä¾›çš„èµ„æºæŸ¥è¯¢å’Œä¸‹è½½æœåŠ¡ã€‚","categories":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/categories/GIS/"},{"name":"data","slug":"GIS/data","permalink":"https://tanghaojie.github.io/categories/GIS/data/"}],"tags":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/tags/GIS/"},{"name":"data","slug":"data","permalink":"https://tanghaojie.github.io/tags/data/"}],"author":null},{"title":"ä¸€äº›å¥½ç©çš„åœ°ç†ç½‘ç«™","slug":"gisForFunWebsites","date":"2019-10-12T06:57:09.000Z","updated":"2021-05-06T06:56:01.911Z","comments":true,"path":"2019/10/12/gisForFunWebsites/","link":"","permalink":"https://tanghaojie.github.io/2019/10/12/gisForFunWebsites/","excerpt":"","text":"Open Street Map äººäººéƒ½å¯ç¼–è¾‘çš„ä¸–ç•Œåœ°å›¾ï¼Œä¸€ä¸ªç½‘ä¸Šåœ°å›¾åä½œè®¡åˆ’çš„äº§ç‰©ã€‚ Land Lines Google Creative Lab æäº¤çš„ä¸€ä¸ª Chrome Experiments é¡¹ç›®ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ ã€‚ GeoGuessr è¿™æ˜¯ä¸€ä¸ªçœŸå®çš„ã€Œæƒ…æ™¯åˆ¤æ–­æ¸¸æˆã€ã€‚å¼€å±€å°±æ˜¯éšä¾¿æŠŠç©å®¶è½åœ¨ Google è¡—æ™¯ä¸­çš„æŸä¸€å¤„ï¼Œä½ å¯ä»¥åœ¨è¡—æ™¯åœ°å›¾ä¸­ä¸€è·¯æ¸¸èµ°ï¼Œç„¶åæ ¹æ®å‘¨é­ä¿¡æ¯ï¼Œåˆ¤æ–­å‡ºèº«å¤„ä½•å¤„ã€‚ The WebGL Globe The WebGL Globe æ˜¯ä¸€ä¸ªä½¿æ•°æ®åœ°ç†å¯è§†åŒ–çš„å¹³å°ã€‚åˆ©ç”¨è¿™ä¸ªé¡¹ç›®æä¾›çš„å¼€æºä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶ä½œå±äºè‡ªå·±çš„æ•°æ®åœ°çƒã€‚åœ¨é¡¹ç›®ç½‘ç«™ä¸Šæœ‰ä¸å°‘ç½‘å‹æäº¤çš„å®éªŒï¼Œæ ¹æ®äººå£å˜åŒ–ã€ç«å±±æ´»åŠ¨ã€å„åœ°ç»´åŸºç™¾ç§‘ç¯‡ç›®ç­‰æ–¹æ–¹é¢é¢çš„æ•°æ®äº§ç”Ÿä¸åŒçš„å¯è§†åŒ–åœ°çƒã€‚ Ghost Map Ghost Map æ”¶å½•äº†å„ä¸ªåŸå¸‚çš„è¡—é“è·¯çº¿ï¼Œå°†å…¶éšè—åœ¨é»‘æš—ä¸­ã€‚é€šè¿‡ç§»åŠ¨é¼ æ ‡ï¼Œå…‰äº®åƒç»†æµå…¥å·ä¸€èˆ¬æµæ·Œåˆ°é™„è¿‘è¡—é“ä¸Šï¼Œç¯ç«æ˜äº®ï¼Œè½¦æ°´é©¬é¾™ï¼Œå‹¾å‹’å‡ºè¿™åº§åŸå¸‚çš„å»ºç­‘ä¸è¡—é“è§„åˆ’ã€‚å½“é¼ æ ‡æŒ‡é’ˆåœæ­¢ç§»åŠ¨ï¼Œä¸‡ç‰©æ­‡æ¯ï¼Œä¸€åˆ‡åˆæ²‰å…¥é»‘æš—ã€‚ SNAZZY MAPS åœ¨çº¿ Google Maps é…å›¾ã€‚è‡ªå¸¦å¤šç§é£æ ¼è‡ªç”±é€‰æ‹©ï¼Œè€Œä¸”éƒ½å¯ä»¥è‡ªå®šä¹‰ã€‚ Pixel Map åœ¨çº¿åƒç´ åœ°å›¾ç”Ÿæˆã€‚ åœ°å›¾æ…§ åœ¨çº¿åœ°å›¾åˆ¶ä½œï¼Œä¸Šä¼ è‡ªå·±çš„æ•°æ®ï¼Œå¯ä»¥åšçƒ­åŠ›å›¾ã€æµå‘å›¾ç­‰ç­‰å„ç§ä¸“é¢˜åœ°å›¾ã€‚ stamen åœ°å›¾ä¸åˆ¶å›¾ã€æ•°æ®å¯è§†åŒ–ã€‚ Map Box åœ¨çº¿åœ°å›¾åˆ¶å›¾ã€‚ Map Stack ä½¿è®¾è®¡åœ°å›¾å…è´¹,ç®€å•,æœ‰è¶£ã€‚ CAD Mapper cad su ç­‰æ ¼å¼çš„æ¨¡å‹ä¸‹è½½ã€‚ å‘ç°ä¸­å›½ ä¸­å›½å†å²åœ°å›¾ã€å¤åœ°å›¾ã€‚","categories":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/categories/GIS/"}],"tags":[{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/tags/GIS/"}],"author":null}],"categories":[{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/"},{"name":"specification","slug":"3D-Tiles/specification","permalink":"https://tanghaojie.github.io/categories/3D-Tiles/specification/"},{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/categories/other/"},{"name":"glTF","slug":"glTF","permalink":"https://tanghaojie.github.io/categories/glTF/"},{"name":"specification","slug":"glTF/specification","permalink":"https://tanghaojie.github.io/categories/glTF/specification/"},{"name":"vue","slug":"vue","permalink":"https://tanghaojie.github.io/categories/vue/"},{"name":"cesium","slug":"vue/cesium","permalink":"https://tanghaojie.github.io/categories/vue/cesium/"},{"name":"3D Tiles","slug":"vue/cesium/3D-Tiles","permalink":"https://tanghaojie.github.io/categories/vue/cesium/3D-Tiles/"},{"name":"shorthand","slug":"shorthand","permalink":"https://tanghaojie.github.io/categories/shorthand/"},{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/categories/GIS/"},{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/categories/specification/"},{"name":"tools","slug":"tools","permalink":"https://tanghaojie.github.io/categories/tools/"},{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/categories/QGIS/"},{"name":"python","slug":"QGIS/python","permalink":"https://tanghaojie.github.io/categories/QGIS/python/"},{"name":"git","slug":"git","permalink":"https://tanghaojie.github.io/categories/git/"},{"name":"other","slug":"git/other","permalink":"https://tanghaojie.github.io/categories/git/other/"},{"name":"docker","slug":"docker","permalink":"https://tanghaojie.github.io/categories/docker/"},{"name":"cheat sheet","slug":"docker/cheat-sheet","permalink":"https://tanghaojie.github.io/categories/docker/cheat-sheet/"},{"name":"cheat sheet","slug":"git/cheat-sheet","permalink":"https://tanghaojie.github.io/categories/git/cheat-sheet/"},{"name":"scrapy","slug":"scrapy","permalink":"https://tanghaojie.github.io/categories/scrapy/"},{"name":"python","slug":"scrapy/python","permalink":"https://tanghaojie.github.io/categories/scrapy/python/"},{"name":"uniapp","slug":"uniapp","permalink":"https://tanghaojie.github.io/categories/uniapp/"},{"name":"flutter","slug":"flutter","permalink":"https://tanghaojie.github.io/categories/flutter/"},{"name":".net core","slug":"net-core","permalink":"https://tanghaojie.github.io/categories/net-core/"},{"name":"GIS","slug":"net-core/GIS","permalink":"https://tanghaojie.github.io/categories/net-core/GIS/"},{"name":"website","slug":"website","permalink":"https://tanghaojie.github.io/categories/website/"},{"name":"data","slug":"GIS/data","permalink":"https://tanghaojie.github.io/categories/GIS/data/"}],"tags":[{"name":"specification","slug":"specification","permalink":"https://tanghaojie.github.io/tags/specification/"},{"name":"3D Tiles","slug":"3D-Tiles","permalink":"https://tanghaojie.github.io/tags/3D-Tiles/"},{"name":"other","slug":"other","permalink":"https://tanghaojie.github.io/tags/other/"},{"name":"glTF","slug":"glTF","permalink":"https://tanghaojie.github.io/tags/glTF/"},{"name":"vue","slug":"vue","permalink":"https://tanghaojie.github.io/tags/vue/"},{"name":"cesium","slug":"cesium","permalink":"https://tanghaojie.github.io/tags/cesium/"},{"name":"shorthand","slug":"shorthand","permalink":"https://tanghaojie.github.io/tags/shorthand/"},{"name":"GIS","slug":"GIS","permalink":"https://tanghaojie.github.io/tags/GIS/"},{"name":"tools","slug":"tools","permalink":"https://tanghaojie.github.io/tags/tools/"},{"name":"QGIS","slug":"QGIS","permalink":"https://tanghaojie.github.io/tags/QGIS/"},{"name":"python","slug":"python","permalink":"https://tanghaojie.github.io/tags/python/"},{"name":"git","slug":"git","permalink":"https://tanghaojie.github.io/tags/git/"},{"name":"cheat sheet","slug":"cheat-sheet","permalink":"https://tanghaojie.github.io/tags/cheat-sheet/"},{"name":"docker","slug":"docker","permalink":"https://tanghaojie.github.io/tags/docker/"},{"name":"scrapy","slug":"scrapy","permalink":"https://tanghaojie.github.io/tags/scrapy/"},{"name":"uniapp","slug":"uniapp","permalink":"https://tanghaojie.github.io/tags/uniapp/"},{"name":"flutter","slug":"flutter","permalink":"https://tanghaojie.github.io/tags/flutter/"},{"name":".net core","slug":"net-core","permalink":"https://tanghaojie.github.io/tags/net-core/"},{"name":"website","slug":"website","permalink":"https://tanghaojie.github.io/tags/website/"},{"name":"data","slug":"data","permalink":"https://tanghaojie.github.io/tags/data/"}]}